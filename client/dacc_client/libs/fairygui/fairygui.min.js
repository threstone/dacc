var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},fairygui;!function(t){var e=function(e){function i(){var n=e.call(this)||this;return n._x=0,n._y=0,n._alpha=1,n._rotation=0,n._visible=!0,n._touchable=!0,n._grayed=!1,n._draggable=!1,n._scaleX=1,n._scaleY=1,n._skewX=0,n._skewY=0,n._pivotX=0,n._pivotY=0,n._pivotAsAnchor=!1,n._pivotOffsetX=0,n._pivotOffsetY=0,n._sortingOrder=0,n._internalVisible=!0,n._handlingController=!1,n._focusable=!1,n._pixelSnapping=!1,n._disposed=!1,n.sourceWidth=0,n.sourceHeight=0,n.initWidth=0,n.initHeight=0,n.minWidth=0,n.minHeight=0,n.maxWidth=0,n.maxHeight=0,n._width=0,n._height=0,n._rawWidth=0,n._rawHeight=0,n._sizePercentInGroup=0,n._id=""+i._gInstanceCounter++,n._name="",n.createDisplayObject(),n._relations=new t.Relations(n),n._gears=[],n}return __extends(i,e),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this.setXY(t,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this.setXY(this._x,t)},enumerable:!0,configurable:!0}),i.prototype.setXY=function(e,n){if(this._x!=e||this._y!=n){var o=e-this._x,r=n-this._y;this._x=e,this._y=n,this.handleXYChanged(),this instanceof t.GGroup&&this.moveChildren(o,r),this.updateGear(1),!this._parent||this._parent instanceof t.GList||(this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(),this.dispatchEventWith(i.XY_CHANGED)),i.draggingObject!=this||i.sUpdateInDragging||this.localToGlobalRect(0,0,this.width,this.height,i.sGlobalRect)}},Object.defineProperty(i.prototype,"xMin",{get:function(){return this._pivotAsAnchor?this._x-this._width*this._pivotX:this._x},set:function(t){this._pivotAsAnchor?this.setXY(t+this._width*this._pivotX,this._y):this.setXY(t,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yMin",{get:function(){return this._pivotAsAnchor?this._y-this._height*this._pivotY:this._y},set:function(t){this._pivotAsAnchor?this.setXY(this._x,t+this._height*this._pivotY):this.setXY(this._x,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pixelSnapping",{get:function(){return this._pixelSnapping},set:function(t){this._pixelSnapping!=t&&(this._pixelSnapping=t,this.handleXYChanged())},enumerable:!0,configurable:!0}),i.prototype.center=function(e){void 0===e&&(e=!1);var i;i=null!=this._parent?this.parent:this.root,this.setXY((i.width-this.width)/2,(i.height-this.height)/2),e&&(this.addRelation(i,t.RelationType.Center_Center),this.addRelation(i,t.RelationType.Middle_Middle))},Object.defineProperty(i.prototype,"width",{get:function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width},set:function(t){this.setSize(t,this._rawHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height},set:function(t){this.setSize(this._rawWidth,t)},enumerable:!0,configurable:!0}),i.prototype.setSize=function(e,n,o){if(void 0===o&&(o=!1),this._rawWidth!=e||this._rawHeight!=n){this._rawWidth=e,this._rawHeight=n,e<this.minWidth&&(e=this.minWidth),n<this.minHeight&&(n=this.minHeight),this.maxWidth>0&&e>this.maxWidth&&(e=this.maxWidth),this.maxHeight>0&&n>this.maxHeight&&(n=this.maxHeight);var r=e-this._width,s=n-this._height;this._width=e,this._height=n,this.handleSizeChanged(),(0!=this._pivotX||0!=this._pivotY)&&(this._pivotAsAnchor?this.applyPivot():(o||this.setXY(this.x-this._pivotX*r,this.y-this._pivotY*s),this.updatePivotOffset())),this instanceof t.GGroup&&this.resizeChildren(r,s),this.updateGear(2),this._parent&&(this._relations.onOwnerSizeChanged(r,s,this._pivotAsAnchor||!o),this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(!0)),this.dispatchEventWith(i.SIZE_CHANGED)}},i.prototype.ensureSizeCorrect=function(){},Object.defineProperty(i.prototype,"actualWidth",{get:function(){return this.width*Math.abs(this._scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualHeight",{get:function(){return this.height*Math.abs(this._scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this.setScale(t,this._scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this.setScale(this._scaleX,t)},enumerable:!0,configurable:!0}),i.prototype.setScale=function(t,e){(this._scaleX!=t||this._scaleY!=e)&&(this._scaleX=t,this._scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},Object.defineProperty(i.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this.setSkew(t,this._skewY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this.setSkew(this._skewX,t)},enumerable:!0,configurable:!0}),i.prototype.setSkew=function(t,e){(this._skewX!=t||this._skewY!=e)&&(this._skewX=t,this._skewY=e,null!=this._displayObject&&(this._displayObject.skewX=t,this._displayObject.skewY=e),this.applyPivot())},Object.defineProperty(i.prototype,"pivotX",{get:function(){return this._pivotX},set:function(t){this.setPivot(t,this._pivotY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pivotY",{get:function(){return this._pivotY},set:function(t){this.setPivot(this._pivotX,t)},enumerable:!0,configurable:!0}),i.prototype.setPivot=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),(this._pivotX!=t||this._pivotY!=e||this._pivotAsAnchor!=i)&&(this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(i.prototype,"pivotAsAnchor",{get:function(){return this._pivotAsAnchor},enumerable:!0,configurable:!0}),i.prototype.internalSetPivot=function(t,e,i){void 0===e&&(e=0),this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,i&&this.handleXYChanged()},i.prototype.updatePivotOffset=function(){if(null!=this._displayObject)if(0!=this._pivotX||0!=this._pivotY){var t=this._pivotX*this._width,e=this._pivotY*this._height,n=this._displayObject.matrix.transformPoint(t,e,i.sHelperPoint);this._pivotOffsetX=this._pivotX*this._width-(n.x-this._displayObject.x),this._pivotOffsetY=this._pivotY*this._height-(n.y-this._displayObject.y)}else this._pivotOffsetX=0,this._pivotOffsetY=0},i.prototype.applyPivot=function(){(0!=this._pivotX||0!=this._pivotY)&&(this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(i.prototype,"touchable",{get:function(){return this._touchable},set:function(e){if(this._touchable!=e){if(this._touchable=e,this.updateGear(3),this instanceof t.GImage||this instanceof t.GMovieClip||this instanceof t.GTextField&&!(this instanceof t.GTextInput)&&!(this instanceof t.GRichTextField))return;null!=this._displayObject&&(this._displayObject.touchEnabled=this._touchable,this._displayObject instanceof egret.DisplayObjectContainer&&(this._displayObject.touchChildren=this._touchable))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"grayed",{get:function(){return this._grayed},set:function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayedChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return!this._grayed&&this._touchable},set:function(t){this.grayed=!t,this.touchable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this._displayObject&&(this._displayObject.rotation=this.normalizeRotation),this.applyPivot(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"normalizeRotation",{get:function(){var t=this._rotation%360;return t>180?t-=360:-180>t&&(t+=360),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t,this.handleAlphaChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!=t&&(this._visible=t,this.handleVisibleChanged(),this._parent&&this._parent.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"internalVisible",{get:function(){return this._internalVisible&&(!this._group||this._group.internalVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"internalVisible2",{get:function(){return this._visible&&(!this._group||this._group.internalVisible2)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortingOrder",{get:function(){return this._sortingOrder},set:function(t){if(0>t&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focusable",{get:function(){return this._focusable},set:function(t){this._focusable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this.root.focus==this},enumerable:!0,configurable:!0}),i.prototype.requestFocus=function(){for(var t=this;t&&!t._focusable;)t=t.parent;null!=t&&(this.root.focus=t)},Object.defineProperty(i.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._displayObject.blendMode},set:function(t){this._displayObject.blendMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filters",{get:function(){return this._displayObject.filters},set:function(t){this._displayObject.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inContainer",{get:function(){return null!=this._displayObject&&null!=this._displayObject.parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onStage",{get:function(){return null!=this._displayObject&&null!=this._displayObject.stage},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resourceURL",{get:function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(t){this._group!=t&&(null!=this._group&&this._group.setBoundsChangedFlag(!0),this._group=t,null!=this._group&&this._group.setBoundsChangedFlag(!0))},enumerable:!0,configurable:!0}),i.prototype.getGear=function(e){var i=this._gears[e];if(null==i){switch(e){case 0:i=new t.GearDisplay(this);break;case 1:i=new t.GearXY(this);break;case 2:i=new t.GearSize(this);break;case 3:i=new t.GearLook(this);break;case 4:i=new t.GearColor(this);break;case 5:i=new t.GearAnimation(this);break;case 6:i=new t.GearText(this);break;case 7:i=new t.GearIcon(this);break;default:throw"FairyGUI: invalid gear index!"}this._gears[e]=i}return i},i.prototype.updateGear=function(t){if(!this._underConstruct&&!this._gearLocked){var e=this._gears[t];null!=e&&null!=e.controller&&e.updateState()}},i.prototype.checkGearController=function(t,e){return null!=this._gears[t]&&this._gears[t].controller==e},i.prototype.updateGearFromRelations=function(t,e,i){null!=this._gears[t]&&this._gears[t].updateFromRelations(e,i)},i.prototype.addDisplayLock=function(){var t=this._gears[0];if(t&&t.controller){var e=t.addLock();return this.checkGearDisplay(),e}return 0},i.prototype.releaseDisplayLock=function(t){var e=this._gears[0];e&&e.controller&&(e.releaseLock(t),this.checkGearDisplay())},i.prototype.checkGearDisplay=function(){if(!this._handlingController){var t=null==this._gears[0]||this._gears[0].connected;t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this))}},Object.defineProperty(i.prototype,"gearXY",{get:function(){return this.getGear(1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gearSize",{get:function(){return this.getGear(2)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gearLook",{get:function(){return this.getGear(3)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relations",{get:function(){return this._relations},enumerable:!0,configurable:!0}),i.prototype.addRelation=function(t,e,i){void 0===i&&(i=!1),this._relations.add(t,e,i)},i.prototype.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e)},Object.defineProperty(i.prototype,"displayObject",{get:function(){return this._displayObject},enumerable:!0,configurable:!0}),i.prototype.setDisplayObject=function(t){this._displayObject=t},Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},Object.defineProperty(i.prototype,"root",{get:function(){if(this instanceof t.GRoot)return this;for(var e=this._parent;e;){if(e instanceof t.GRoot)return e;e=e.parent}return t.GRoot.inst},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asCom",{get:function(){return this instanceof t.GComponent?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asButton",{get:function(){return this instanceof t.GButton?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asLabel",{get:function(){return this instanceof t.GLabel?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asProgress",{get:function(){return this instanceof t.GProgressBar?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asTextField",{get:function(){return this instanceof t.GTextField?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asRichTextField",{get:function(){return this instanceof t.GRichTextField?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asTextInput",{get:function(){return this instanceof t.GTextInput?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asLoader",{get:function(){return this instanceof t.GLoader?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asList",{get:function(){return this instanceof t.GList?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asGraph",{get:function(){return this instanceof t.GGraph?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asGroup",{get:function(){return this instanceof t.GGroup?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asSlider",{get:function(){return this instanceof t.GSlider?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asComboBox",{get:function(){return this instanceof t.GComboBox?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asImage",{get:function(){return this instanceof t.GImage?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asMovieClip",{get:function(){return this instanceof t.GMovieClip?this:null},enumerable:!0,configurable:!0}),i.cast=function(t){return t.$owner},Object.defineProperty(i.prototype,"text",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.removeFromParent(),this._relations.dispose(),this._displayObject=null;for(var t=0;8>t;t++){var e=this._gears[t];null!=e&&e.dispose()}}},i.prototype.addClickListener=function(t,e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,t,e)},i.prototype.removeClickListener=function(t,e){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,t,e)},i.prototype.hasClickListener=function(){return this.hasEventListener(egret.TouchEvent.TOUCH_TAP)},i.prototype.addEventListener=function(t,i,n){e.prototype.addEventListener.call(this,t,i,n),null!=this._displayObject&&this._displayObject.addEventListener(t,this._reDispatch,this)},i.prototype.removeEventListener=function(t,i,n){e.prototype.removeEventListener.call(this,t,i,n),null==this._displayObject||this.hasEventListener(t)||this._displayObject.removeEventListener(t,this._reDispatch,this)},i.prototype._reDispatch=function(t){this.dispatchEvent(t)},Object.defineProperty(i.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragBounds",{get:function(){return this._dragBounds},set:function(t){this._dragBounds=t},enumerable:!0,configurable:!0}),i.prototype.startDrag=function(t){void 0===t&&(t=-1),null!=this._displayObject.stage&&this.dragBegin(null)},i.prototype.stopDrag=function(){this.dragEnd()},Object.defineProperty(i.prototype,"dragging",{get:function(){return i.draggingObject==this},enumerable:!0,configurable:!0}),i.prototype.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this._pivotAsAnchor&&(t+=this._pivotX*this._width,e+=this._pivotY*this._height),this._displayObject.localToGlobal(t,e,i)},i.prototype.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=this._displayObject.globalToLocal(t,e,i);return this._pivotAsAnchor&&(n.x-=this._pivotX*this._width,n.y-=this._pivotY*this._height),n},i.prototype.localToRoot=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var o=this._displayObject.localToGlobal(e,i,n);return o.x/=t.GRoot.contentScaleFactor,o.y/=t.GRoot.contentScaleFactor,o},i.prototype.rootToLocal=function(e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),e*=t.GRoot.contentScaleFactor,i*=t.GRoot.contentScaleFactor,this._displayObject.globalToLocal(e,i,n)},i.prototype.localToGlobalRect=function(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==o&&(o=new egret.Rectangle);var r=this.localToGlobal(t,e);return o.x=r.x,o.y=r.y,r=this.localToGlobal(t+i,e+n),o.right=r.x,o.bottom=r.y,o},i.prototype.globalToLocalRect=function(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==o&&(o=new egret.Rectangle);var r=this.globalToLocal(t,e);return o.x=r.x,o.y=r.y,r=this.globalToLocal(t+i,e+n),o.right=r.x,o.bottom=r.y,o},i.prototype.handleControllerChanged=function(t){this._handlingController=!0;for(var e=0;8>e;e++){var i=this._gears[e];null!=i&&i.controller==t&&i.apply()}this._handlingController=!1,this.checkGearDisplay()},i.prototype.createDisplayObject=function(){},i.prototype.switchDisplayObject=function(t){if(t!=this._displayObject){var e=this._displayObject;if(null!=this._displayObject.parent){var i=this._displayObject.parent.getChildIndex(this._displayObject);this._displayObject.parent.addChildAt(t,i),this._displayObject.parent.removeChild(this._displayObject)}this._displayObject=t,this._displayObject.x=e.x,this._displayObject.y=e.y,this._displayObject.rotation=e.rotation,this._displayObject.alpha=e.alpha,this._displayObject.visible=e.visible,this._displayObject.touchEnabled=e.touchEnabled,this._displayObject.scaleX=e.scaleX,this._displayObject.scaleY=e.scaleY,this._displayObject instanceof egret.DisplayObjectContainer&&(this._displayObject.touchChildren=this._touchable)}},i.prototype.handleXYChanged=function(){if(this._displayObject){var t=this._x,e=this._y;this._pivotAsAnchor&&(t-=this._pivotX*this._width,e-=this._pivotY*this._height),this._pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this._displayObject.x=t+this._pivotOffsetX,this._displayObject.y=e+this._pivotOffsetY}},i.prototype.handleSizeChanged=function(){null!=this._displayObject&&(this._displayObject.width=this.width,this._displayObject.height=this.height)},i.prototype.handleScaleChanged=function(){null!=this._displayObject&&(this._displayObject.scaleX=this._scaleX,this._displayObject.scaleY=this._scaleY)},i.prototype.handleGrayedChanged=function(){if(this._displayObject)if(this._grayed){var t=new egret.ColorMatrixFilter(i.colorMatrix);this._displayObject.filters=[t]}else this._displayObject.filters=null},i.prototype.handleAlphaChanged=function(){this._displayObject&&(this._displayObject.alpha=this._alpha)},i.prototype.handleVisibleChanged=function(){this._displayObject&&(this._displayObject.visible=this.internalVisible2)},i.prototype.constructFromResource=function(){},i.prototype.setup_beforeAdd=function(e,i){e.seek(i,0),e.skip(5);var n,o;this._id=e.readS(),this._name=e.readS(),n=e.readInt(),o=e.readInt(),this.setXY(n,o),e.readBool()&&(this.initWidth=e.readInt(),this.initHeight=e.readInt(),this.setSize(this.initWidth,this.initHeight,!0)),e.readBool()&&(this.minWidth=e.readInt(),this.maxWidth=e.readInt(),this.minHeight=e.readInt(),this.maxHeight=e.readInt()),e.readBool()&&(n=e.readFloat(),o=e.readFloat(),this.setScale(n,o)),e.readBool()&&(n=e.readFloat(),o=e.readFloat(),this.setSkew(n,o)),e.readBool()&&(n=e.readFloat(),o=e.readFloat(),this.setPivot(n,o,e.readBool())),n=e.readFloat(),1!=n&&(this.alpha=n),n=e.readFloat(),0!=n&&(this.rotation=n),e.readBool()||(this.visible=!1),e.readBool()||(this.touchable=!1),e.readBool()&&(this.grayed=!0);var r=e.readByte();2==r?this.blendMode=egret.BlendMode.ADD:5==r&&(this.blendMode=egret.BlendMode.ERASE);var s=e.readByte();if(1==s){var a=new t.ColorMatrix;a.adjustBrightness(e.readFloat()),a.adjustContrast(e.readFloat()),a.adjustSaturation(e.readFloat()),a.adjustHue(e.readFloat());var h=new egret.ColorMatrixFilter(a.matrix);this.filters=[h]}var l=e.readS();null!=l&&(this.data=l)},i.prototype.setup_afterAdd=function(t,e){t.seek(e,1);var i=t.readS();null!=i&&(this.tooltips=i);var n=t.readShort();n>=0&&(this.group=this.parent.getChildAt(n)),t.seek(e,2);for(var o=t.readShort(),r=0;o>r;r++){var s=t.readShort();s+=t.position;var a=this.getGear(t.readByte());a.setup(t),t.position=s}},i.prototype.initDrag=function(){this._draggable?this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__begin,this):this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__begin,this)},i.prototype.dragBegin=function(e){null!=i.draggingObject&&i.draggingObject.stopDrag(),null!=e?(i.sGlobalDragStart.x=e.stageX,i.sGlobalDragStart.y=e.stageY):(i.sGlobalDragStart.x=t.GRoot.mouseX,i.sGlobalDragStart.y=t.GRoot.mouseY),this.localToGlobalRect(0,0,this.width,this.height,i.sGlobalRect),i.draggingObject=this,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving2,this),t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__end2,this)},i.prototype.dragEnd=function(){i.draggingObject==this&&(t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving2,this),t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__end2,this),i.draggingObject=null)},i.prototype.reset=function(){t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving,this),t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__end,this)},i.prototype.__begin=function(e){null==this._touchDownPoint&&(this._touchDownPoint=new egret.Point),this._touchDownPoint.x=e.stageX,this._touchDownPoint.y=e.stageY,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving,this),t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__end,this)},i.prototype.__end=function(t){this.reset()},i.prototype.__moving=function(e){var i=t.UIConfig.touchDragSensitivity;if(!(null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-e.stageX)<i&&Math.abs(this._touchDownPoint.y-e.stageY)<i)){this.reset();var n=new t.DragEvent(t.DragEvent.DRAG_START);n.stageX=e.stageX,n.stageY=e.stageY,n.touchPointID=e.touchPointID,this.dispatchEvent(n),n.isDefaultPrevented()||this.dragBegin(e)}},i.prototype.__moving2=function(e){var n=e.stageX-i.sGlobalDragStart.x+i.sGlobalRect.x,o=e.stageY-i.sGlobalDragStart.y+i.sGlobalRect.y;if(null!=this._dragBounds){var r=t.GRoot.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,i.sDragHelperRect);n<r.x?n=r.x:n+i.sGlobalRect.width>r.right&&(n=r.right-i.sGlobalRect.width,n<r.x&&(n=r.x)),o<r.y?o=r.y:o+i.sGlobalRect.height>r.bottom&&(o=r.bottom-i.sGlobalRect.height,o<r.y&&(o=r.y))}i.sUpdateInDragging=!0;var s=this.parent.globalToLocal(n,o,i.sHelperPoint);this.setXY(Math.round(s.x),Math.round(s.y)),i.sUpdateInDragging=!1;var a=new t.DragEvent(t.DragEvent.DRAG_MOVING);a.stageX=e.stageX,a.stageY=e.stageY,a.touchPointID=e.touchPointID,this.dispatchEvent(a)},i.prototype.__end2=function(e){if(i.draggingObject==this){this.stopDrag();var n=new t.DragEvent(t.DragEvent.DRAG_END);n.stageX=e.stageX,n.stageY=e.stageY,n.touchPointID=e.touchPointID,this.dispatchEvent(n)}},i._gInstanceCounter=0,i.XY_CHANGED="__xyChanged",i.SIZE_CHANGED="__sizeChanged",i.SIZE_DELAY_CHANGE="__sizeDelayChange",i.GEAR_STOP="gearStop",i.colorMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],i.sGlobalDragStart=new egret.Point,i.sGlobalRect=new egret.Rectangle,i.sHelperPoint=new egret.Point,i.sDragHelperRect=new egret.Rectangle,i}(egret.EventDispatcher);t.GObject=e,__reflect(e.prototype,"fairygui.GObject")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._owner=t}return e.prototype.dispose=function(){null!=this._tweenConfig&&null!=this._tweenConfig._tweener&&(this._tweenConfig._tweener.kill(),this._tweenConfig._tweener=null)},Object.defineProperty(e.prototype,"controller",{get:function(){return this._controller},set:function(t){t!=this._controller&&(this._controller=t,this._controller&&this.init())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tweenConfig",{get:function(){return null==this._tweenConfig&&(this._tweenConfig=new i),this._tweenConfig},enumerable:!0,configurable:!0}),e.prototype.setup=function(e){this._controller=this._owner.parent.getControllerAt(e.readShort()),this.init();var n,o,r;if(this instanceof t.GearDisplay){n=e.readShort();var s=[];for(o=0;n>o;o++)s[o]=e.readS();this.pages=s}else{for(n=e.readShort(),o=0;n>o;o++)r=e.readS(),null!=r&&this.addStatus(r,e);e.readBool()&&this.addStatus(null,e)}e.readBool()&&(this._tweenConfig=new i,this._tweenConfig.easeType=e.readByte(),this._tweenConfig.duration=e.readFloat(),this._tweenConfig.delay=e.readFloat())},e.prototype.updateFromRelations=function(t,e){},e.prototype.addStatus=function(t,e){},e.prototype.init=function(){},e.prototype.apply=function(){},e.prototype.updateState=function(){},e.disableAllTweenEffect=!1,e}();t.GearBase=e,__reflect(e.prototype,"fairygui.GearBase");var i=function(){function e(){this.tween=!0,this.easeType=t.EaseType.QuadOut,this.duration=.3,this.delay=0}return e}();t.GearTweenConfig=i,__reflect(i.prototype,"fairygui.GearTweenConfig")}(fairygui||(fairygui={}));var fairygui;!function(t){var e;!function(t){t[t.Common=0]="Common",t[t.Check=1]="Check",t[t.Radio=2]="Radio"}(e=t.ButtonMode||(t.ButtonMode={}));var i;!function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Height=2]="Height"}(i=t.AutoSizeType||(t.AutoSizeType={}));var n;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(n=t.AlignType||(t.AlignType={}));var o;!function(t){t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom"}(o=t.VertAlignType||(t.VertAlignType={}));var r;!function(t){t[t.None=0]="None",t[t.Scale=1]="Scale",t[t.ScaleMatchHeight=2]="ScaleMatchHeight",t[t.ScaleMatchWidth=3]="ScaleMatchWidth",t[t.ScaleFree=4]="ScaleFree",t[t.ScaleNoBorder=5]="ScaleNoBorder"}(r=t.LoaderFillType||(t.LoaderFillType={}));var s;!function(t){t[t.SingleColumn=0]="SingleColumn",t[t.SingleRow=1]="SingleRow",t[t.FlowHorizontal=2]="FlowHorizontal",t[t.FlowVertical=3]="FlowVertical",t[t.Pagination=4]="Pagination"}(s=t.ListLayoutType||(t.ListLayoutType={}));var a;!function(t){t[t.Single=0]="Single",t[t.Multiple=1]="Multiple",t[t.Multiple_SingleClick=2]="Multiple_SingleClick",t[t.None=3]="None"}(a=t.ListSelectionMode||(t.ListSelectionMode={}));var h;!function(t){t[t.Visible=0]="Visible",t[t.Hidden=1]="Hidden",t[t.Scroll=2]="Scroll"}(h=t.OverflowType||(t.OverflowType={}));var l;!function(t){t[t.Image=0]="Image",t[t.MovieClip=1]="MovieClip",t[t.Sound=2]="Sound",t[t.Component=3]="Component",t[t.Atlas=4]="Atlas",t[t.Font=5]="Font",t[t.Swf=6]="Swf",t[t.Misc=7]="Misc",t[t.Unknown=8]="Unknown"}(l=t.PackageItemType||(t.PackageItemType={}));var u;!function(t){t[t.Image=0]="Image",t[t.MovieClip=1]="MovieClip",t[t.Swf=2]="Swf",t[t.Graph=3]="Graph",t[t.Loader=4]="Loader",t[t.Group=5]="Group",t[t.Text=6]="Text",t[t.RichText=7]="RichText",t[t.InputText=8]="InputText",t[t.Component=9]="Component",t[t.List=10]="List",t[t.Label=11]="Label",t[t.Button=12]="Button",t[t.ComboBox=13]="ComboBox",t[t.ProgressBar=14]="ProgressBar",t[t.Slider=15]="Slider",t[t.ScrollBar=16]="ScrollBar"}(u=t.ObjectType||(t.ObjectType={}));var c;!function(t){t[t.Percent=0]="Percent",t[t.ValueAndMax=1]="ValueAndMax",t[t.Value=2]="Value",t[t.Max=3]="Max"}(c=t.ProgressTitleType||(t.ProgressTitleType={}));var _;!function(t){t[t.Default=0]="Default",t[t.Visible=1]="Visible",t[t.Auto=2]="Auto",t[t.Hidden=3]="Hidden"}(_=t.ScrollBarDisplayType||(t.ScrollBarDisplayType={}));var p;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t[t.Both=2]="Both"}(p=t.ScrollType||(t.ScrollType={}));var d;!function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Both=3]="Both"}(d=t.FlipType||(t.FlipType={}));var f;!function(t){t[t.Ascent=0]="Ascent",t[t.Descent=1]="Descent",t[t.Arch=2]="Arch"}(f=t.ChildrenRenderOrder||(t.ChildrenRenderOrder={}));var g;!function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(g=t.GroupLayoutType||(t.GroupLayoutType={}));var y;!function(t){t[t.Auto=0]="Auto",t[t.Up=1]="Up",t[t.Down=2]="Down"}(y=t.PopupDirection||(t.PopupDirection={}));var m;!function(t){t[t.Left_Left=0]="Left_Left",t[t.Left_Center=1]="Left_Center",t[t.Left_Right=2]="Left_Right",t[t.Center_Center=3]="Center_Center",t[t.Right_Left=4]="Right_Left",t[t.Right_Center=5]="Right_Center",t[t.Right_Right=6]="Right_Right",t[t.Top_Top=7]="Top_Top",t[t.Top_Middle=8]="Top_Middle",t[t.Top_Bottom=9]="Top_Bottom",t[t.Middle_Middle=10]="Middle_Middle",t[t.Bottom_Top=11]="Bottom_Top",t[t.Bottom_Middle=12]="Bottom_Middle",t[t.Bottom_Bottom=13]="Bottom_Bottom",t[t.Width=14]="Width",t[t.Height=15]="Height",t[t.LeftExt_Left=16]="LeftExt_Left",t[t.LeftExt_Right=17]="LeftExt_Right",t[t.RightExt_Left=18]="RightExt_Left",t[t.RightExt_Right=19]="RightExt_Right",t[t.TopExt_Top=20]="TopExt_Top",t[t.TopExt_Bottom=21]="TopExt_Bottom",t[t.BottomExt_Top=22]="BottomExt_Top",t[t.BottomExt_Bottom=23]="BottomExt_Bottom",t[t.Size=24]="Size"}(m=t.RelationType||(t.RelationType={}));var v;!function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Radial90=3]="Radial90",t[t.Radial180=4]="Radial180",t[t.Radial360=5]="Radial360"}(v=t.FillMethod||(t.FillMethod={}));var b;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"
}(b=t.FillOrigin||(t.FillOrigin={}));var w;!function(t){t[t.TopLeft=0]="TopLeft",t[t.TopRight=1]="TopRight",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(w=t.FillOrigin90||(t.FillOrigin90={}))}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.createAction=function(e){switch(e){case 0:return new t.PlayTransitionAction;case 1:return new t.ChangePageAction}return null},e.prototype.run=function(t,e,i){null!=this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||null!=this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},e.prototype.enter=function(t){},e.prototype.leave=function(t){},e.prototype.setup=function(t){var e,i;for(e=t.readShort(),this.fromPage=[],i=0;e>i;i++)this.fromPage[i]=t.readS();for(e=t.readShort(),this.toPage=[],i=0;e>i;i++)this.toPage[i]=t.readS()},e}();t.ControllerAction=e,__reflect(e.prototype,"fairygui.ControllerAction")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._sortingChildCount=0,i._childrenRenderOrder=t.ChildrenRenderOrder.Ascent,i._apexIndex=0,i._children=new Array,i._controllers=new Array,i._transitions=new Array,i._margin=new t.Margin,i._alignOffset=new egret.Point,i}return __extends(i,e),i.prototype.createDisplayObject=function(){this._rootContainer=new t.UIContainer,this._rootContainer.$owner=this,this.setDisplayObject(this._rootContainer),this._container=this._rootContainer},i.prototype.dispose=function(){var t,i;for(i=this._transitions.length,t=0;i>t;++t){var n=this._transitions[t];n.dispose()}for(i=this._controllers.length,t=0;i>t;++t){var o=this._controllers[t];o.dispose()}for(this._scrollPane&&this._scrollPane.dispose(),i=this._children.length,t=i-1;t>=0;--t){var r=this._children[t];r.parent=null,r.dispose()}this._boundsChanged=!1,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"displayListContainer",{get:function(){return this._container},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){return this.addChildAt(t,this._children.length),t},i.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw"child is null";var i=this._children.length;if(e>=0&&i>=e){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var n=this._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this._sortingChildCount>0&&e>n-this._sortingChildCount&&(e=n-this._sortingChildCount),e==n?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw"Invalid child index"},i.prototype.getInsertPosForSortingChild=function(t){var e=this._children.length,i=0;for(i=0;e>i;i++){var n=this._children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},i.prototype.removeChild=function(t,e){void 0===e&&(e=!1);var i=this._children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},i.prototype.removeChildAt=function(e,i){if(void 0===i&&(i=!1),e>=0&&e<this.numChildren){var n=this._children[e];return n.parent=null,0!=n.sortingOrder&&this._sortingChildCount--,this._children.splice(e,1),n.group=null,n.inContainer&&(this._container.removeChild(n.displayObject),this._childrenRenderOrder==t.ChildrenRenderOrder.Arch&&t.GTimers.inst.callLater(this.buildNativeDisplayList,this)),i&&n.dispose(),this.setBoundsChangedFlag(),n}throw"Invalid child index"},i.prototype.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;e>=n;++n)this.removeChildAt(t,i)},i.prototype.getChildAt=function(t){if(void 0===t&&(t=0),t>=0&&t<this.numChildren)return this._children[t];throw"Invalid child index"},i.prototype.getChild=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i].name==t)return this._children[i];return null},i.prototype.getVisibleChild=function(t){for(var e=this._children.length,i=0;e>i;++i){var n=this._children[i];if(n.internalVisible&&n.internalVisible&&n.name==t)return n}return null},i.prototype.getChildInGroup=function(t,e){for(var i=this._children.length,n=0;i>n;++n){var o=this._children[n];if(o.group==e&&o.name==t)return o}return null},i.prototype.getChildById=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i]._id==t)return this._children[i];return null},i.prototype.getChildIndex=function(t){return this._children.indexOf(t)},i.prototype.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0==t.sortingOrder){var n=this._children.length;this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),this._setChildIndex(t,i,e)}},i.prototype.setChildIndexBefore=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0!=t.sortingOrder)return i;var n=this._children.length;return this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),e>i?this._setChildIndex(t,i,e-1):this._setChildIndex(t,i,e)},i.prototype._setChildIndex=function(e,i,n){void 0===n&&(n=0);var o=this._children.length;if(n>o&&(n=o),i==n)return i;if(this._children.splice(i,1),this._children.splice(n,0,e),e.inContainer){var r,s,a=0;if(this._childrenRenderOrder==t.ChildrenRenderOrder.Ascent){for(s=0;n>s;s++)r=this._children[s],r.inContainer&&a++;a==this._container.numChildren&&a--,this._container.setChildIndex(e.displayObject,a)}else if(this._childrenRenderOrder==t.ChildrenRenderOrder.Descent){for(s=o-1;s>n;s--)r=this._children[s],r.inContainer&&a++;a==this._container.numChildren&&a--,this._container.setChildIndex(e.displayObject,a)}else t.GTimers.inst.callLater(this.buildNativeDisplayList,this);this.setBoundsChangedFlag()}return n},i.prototype.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw"Not a child of this container";this.swapChildrenAt(i,n)},i.prototype.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),i.prototype.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},i.prototype.addController=function(t){this._controllers.push(t),t.parent=this,this.applyController(t)},i.prototype.getControllerAt=function(t){return this._controllers[t]},i.prototype.getController=function(t){for(var e=this._controllers.length,i=0;e>i;++i){var n=this._controllers[i];if(n.name==t)return n}return null},i.prototype.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw"controller not exists";t.parent=null,this._controllers.splice(e,1);for(var i=this._children.length,n=0;i>n;n++){var o=this._children[n];o.handleControllerChanged(t)}},Object.defineProperty(i.prototype,"controllers",{get:function(){return this._controllers},enumerable:!0,configurable:!0}),i.prototype.childStateChanged=function(e){if(!this._buildingDisplayList){var i,n,o=this._children.length;if(e instanceof t.GGroup)for(n=0;o>n;n++)i=this._children[n],i.group==e&&this.childStateChanged(i);else if(e.displayObject)if(e.internalVisible){if(!e.displayObject.parent){var r=0;if(this._childrenRenderOrder==t.ChildrenRenderOrder.Ascent){for(n=0;o>n&&(i=this._children[n],i!=e);n++)null!=i.displayObject&&null!=i.displayObject.parent&&r++;this._container.addChildAt(e.displayObject,r)}else if(this._childrenRenderOrder==t.ChildrenRenderOrder.Descent){for(n=o-1;n>=0&&(i=this._children[n],i!=e);n--)null!=i.displayObject&&null!=i.displayObject.parent&&r++;this._container.addChildAt(e.displayObject,r)}else this._container.addChild(e.displayObject),t.GTimers.inst.callLater(this.buildNativeDisplayList,this)}}else e.displayObject.parent&&this._container.removeChild(e.displayObject)}},i.prototype.buildNativeDisplayList=function(){var e=this._children.length;if(0!=e){var i,n;switch(this._childrenRenderOrder){case t.ChildrenRenderOrder.Ascent:for(i=0;e>i;i++)n=this._children[i],null!=n.displayObject&&n.internalVisible&&this._container.addChild(n.displayObject);break;case t.ChildrenRenderOrder.Descent:for(i=e-1;i>=0;i--)n=this._children[i],null!=n.displayObject&&n.internalVisible&&this._container.addChild(n.displayObject);break;case t.ChildrenRenderOrder.Arch:for(i=0;i<this._apexIndex;i++)n=this._children[i],null!=n.displayObject&&n.internalVisible&&this._container.addChild(n.displayObject);for(i=e-1;i>=this._apexIndex;i--)n=this._children[i],null!=n.displayObject&&n.internalVisible&&this._container.addChild(n.displayObject)}}},i.prototype.applyController=function(t){this._applyingController=t;for(var e,i=this._children.length,n=0;i>n;n++)e=this._children[n],e.handleControllerChanged(t);this._applyingController=null,t.runActions()},i.prototype.applyAllControllers=function(){for(var t=this._controllers.length,e=0;t>e;++e)this.applyController(this._controllers[e])},i.prototype.adjustRadioGroupDepth=function(e,i){var n,o,r=this._children.length,s=-1,a=-1;for(n=0;r>n;n++)o=this._children[n],o==e?s=n:o instanceof t.GButton&&o.relatedController==i&&n>a&&(a=n);a>s&&(null!=this._applyingController&&this._children[a].handleControllerChanged(this._applyingController),this.swapChildrenAt(s,a))},i.prototype.getTransitionAt=function(t){return this._transitions[t]},i.prototype.getTransition=function(t){for(var e=this._transitions.length,i=0;e>i;++i){var n=this._transitions[i];if(n.name==t)return n}return null},i.prototype.isChildInView=function(t){return null!=this._rootContainer.scrollRect?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null!=this._scrollPane?this._scrollPane.isChildInView(t):!0},i.prototype.getFirstChildInView=function(){for(var t=this._children.length,e=0;t>e;++e){var i=this._children[e];if(this.isChildInView(i))return e}return-1},Object.defineProperty(i.prototype,"scrollPane",{get:function(){return this._scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opaque",{get:function(){return this._opaque},set:function(t){this._opaque!=t&&(this._opaque=t,this._opaque?this.updateOpaque():this._rootContainer.hitArea=null)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{get:function(){return this._margin},set:function(t){this._margin.copy(t),null!=this._rootContainer.scrollRect&&(this._container.x=this._margin.left+this._alignOffset.x,this._container.y=this._margin.top+this._alignOffset.y),this.handleSizeChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"childrenRenderOrder",{get:function(){return this._childrenRenderOrder},set:function(t){this._childrenRenderOrder!=t&&(this._childrenRenderOrder=t,this.buildNativeDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"apexIndex",{get:function(){return this._apexIndex},set:function(e){this._apexIndex!=e&&(this._apexIndex=e,this._childrenRenderOrder==t.ChildrenRenderOrder.Arch&&this.buildNativeDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this._rootContainer.mask},set:function(t){this._rootContainer.mask=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseUserData",{get:function(){var t=this.packageItem.rawData;return t.seek(0,4),t.readS()},enumerable:!0,configurable:!0}),i.prototype.updateOpaque=function(){this._rootContainer.hitArea||(this._rootContainer.hitArea=new egret.Rectangle),this._rootContainer.hitArea.setTo(0,0,this.width,this.height)},i.prototype.updateScrollRect=function(){var t=this._rootContainer.scrollRect;null==t&&(t=new egret.Rectangle);var e=this.width-this._margin.right,i=this.height-this._margin.bottom;t.setTo(0,0,e,i),this._rootContainer.scrollRect=t},i.prototype.setupScroll=function(e){this._rootContainer==this._container&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container)),this._scrollPane=new t.ScrollPane(this),this._scrollPane.setup(e),this.setBoundsChangedFlag()},i.prototype.setupOverflow=function(e){e==t.OverflowType.Hidden?(this._rootContainer==this._container&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container)),this.updateScrollRect(),this._container.x=this._margin.left,this._container.y=this._margin.top):(0!=this._margin.left||0!=this._margin.top)&&(this._rootContainer==this._container&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container)),this._container.x=this._margin.left,this._container.y=this._margin.top),this.setBoundsChangedFlag()},i.prototype.handleSizeChanged=function(){this._scrollPane?this._scrollPane.onOwnerSizeChanged():null!=this._rootContainer.scrollRect&&this.updateScrollRect(),this._opaque&&this.updateOpaque()},i.prototype.handleGrayedChanged=function(){var t=this.getController("grayed");if(null!=t)return void(t.selectedIndex=this.grayed?1:0);for(var e=this.grayed,i=this._children.length,n=0;i>n;++n)this._children[n].grayed=e},i.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),null!=this._scrollPane&&this._scrollPane.handleControllerChanged(t)},i.prototype.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,egret.callLater(this.__render,this)))},i.prototype.__render=function(){if(this._boundsChanged){var t=this._children.length;if(t>0)for(var e=0;t>e;e++){var i=this._children[e];i.ensureSizeCorrect()}this.updateBounds()}},i.prototype.ensureBoundsCorrect=function(){var t=this._children.length;if(t>0)for(var e=0;t>e;e++){var i=this._children[e];i.ensureSizeCorrect()}this._boundsChanged&&this.updateBounds()},i.prototype.updateBounds=function(){var t=0,e=0,i=0,n=0,o=this._children.length;if(o>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;for(var r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=0,h=0,h=0;o>h;h++){var l=this._children[h];a=l.x,t>a&&(t=a),a=l.y,e>a&&(e=a),a=l.x+l.actualWidth,a>r&&(r=a),a=l.y+l.actualHeight,a>s&&(s=a)}i=r-t,n=s-e}this.setBounds(t,e,i,n)},i.prototype.setBounds=function(t,e,i,n){void 0===n&&(n=0),this._boundsChanged=!1,this._scrollPane&&this._scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},Object.defineProperty(i.prototype,"viewWidth",{get:function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},set:function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewHeight",{get:function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},set:function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom},enumerable:!0,configurable:!0}),i.prototype.getSnappingPosition=function(t,e,i){i||(i=new egret.Point);var n=this._children.length;if(0==n)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var o=null,r=null,s=0;if(0!=e){for(;n>s;s++)if(o=this._children[s],e<o.y){if(0==s){e=0;break}r=this._children[s-1],e=e<r.y+r.actualHeight/2?r.y:o.y;break}s==n&&(e=o.y)}if(0!=t){for(s>0&&s--;n>s;s++)if(o=this._children[s],t<o.x){if(0==s){t=0;break}r=this._children[s-1],t=t<r.x+r.actualWidth/2?r.x:o.x;break}s==n&&(t=o.x)}return i.x=t,i.y=e,i},i.prototype.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var n=this._children.indexOf(t),o=this.getInsertPosForSortingChild(t);o>n?this._setChildIndex(t,n,o-1):this._setChildIndex(t,n,o)}},i.prototype.constructFromResource=function(){this.constructFromResource2(null,0)},i.prototype.constructFromResource2=function(e,i){this.packageItem.decoded||(this.packageItem.decoded=!0,t.TranslationHelper.translateComponent(this.packageItem));var n,o,r,s,a,h,l=this.packageItem.rawData;l.seek(0,0),this._underConstruct=!0,this.sourceWidth=l.readInt(),this.sourceHeight=l.readInt(),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),l.readBool()&&(this.minWidth=l.readInt(),this.maxWidth=l.readInt(),this.minHeight=l.readInt(),this.maxHeight=l.readInt()),l.readBool()&&(a=l.readFloat(),h=l.readFloat(),this.internalSetPivot(a,h,l.readBool())),l.readBool()&&(this._margin.top=l.readInt(),this._margin.bottom=l.readInt(),this._margin.left=l.readInt(),this._margin.right=l.readInt());var u=l.readByte();if(u==t.OverflowType.Scroll){var c=l.position;l.seek(0,7),this.setupScroll(l),l.position=c}else this.setupOverflow(u);l.readBool()&&l.skip(8),this._buildingDisplayList=!0,l.seek(0,1);var _=l.readShort();for(n=0;_>n;n++){s=l.readShort(),s+=l.position;var p=new t.Controller;this._controllers.push(p),p.parent=this,p.setup(l),l.position=s}l.seek(0,2);var d,f=l.readShort();for(n=0;f>n;n++){if(o=l.readShort(),r=l.position,null!=e)d=e[i+n];else{l.seek(r,0);var g=l.readByte(),y=l.readS(),m=l.readS(),v=null;if(null!=y){var b;b=null!=m?t.UIPackage.getById(m):this.packageItem.owner,v=null!=b?b.getItemById(y):null}null!=v?(d=t.UIObjectFactory.newObject(v),d.packageItem=v,d.constructFromResource()):d=t.UIObjectFactory.newObject2(g)}d._underConstruct=!0,d.setup_beforeAdd(l,r),d.parent=this,this._children.push(d),l.position=r+o}for(l.seek(0,3),this.relations.setup(l,!0),l.seek(0,2),l.skip(2),n=0;f>n;n++)s=l.readShort(),s+=l.position,l.seek(l.position,3),this._children[n].relations.setup(l,!1),l.position=s;for(l.seek(0,2),l.skip(2),n=0;f>n;n++)s=l.readShort(),s+=l.position,d=this._children[n],d.setup_afterAdd(l,l.position),d._underConstruct=!1,l.position=s;l.seek(0,4),l.skip(2),this.opaque=l.readBool();var w=l.readShort();-1!=w&&(this.mask=this.getChildAt(w).displayObject,l.readBool());l.readS();l.seek(0,5);var C=l.readShort();for(n=0;C>n;n++){s=l.readShort(),s+=l.position;var S=new t.Transition(this);S.setup(l),this._transitions.push(S),l.position=s}this._transitions.length>0&&(this.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,this.___added,this),this.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.___removed,this)),this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,this.buildNativeDisplayList(),this.setBoundsChangedFlag(),this.packageItem.objectType!=t.ObjectType.Component&&this.constructExtension(l),this.constructFromXML(null)},i.prototype.constructExtension=function(t){},i.prototype.constructFromXML=function(t){},i.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,4);var n=t.readShort();null!=n&&null!=this._scrollPane&&(this._scrollPane.pageController=this._parent.getControllerAt(n));for(var o=t.readShort(),r=0;o>r;r++){var s=this.getController(t.readS()),a=t.readS();null!=s&&(s.selectedPageId=a)}},i.prototype.___added=function(t){for(var e=this._transitions.length,i=0;e>i;++i)this._transitions[i].onOwnerAddedToStage()},i.prototype.___removed=function(t){for(var e=this._transitions.length,i=0;e>i;++i)this._transitions[i].onOwnerRemovedFromStage()},i}(t.GObject);t.GComponent=e,__reflect(e.prototype,"fairygui.GComponent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._count=0,this._pool={}}return e.prototype.clear=function(){for(var t in this._pool)for(var e=this._pool[t],i=e.length,n=0;i>n;n++)e[n].dispose();this._pool={},this._count=0},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.getObject=function(e){if(e=t.UIPackage.normalizeURL(e),null==e)return null;var i=this._pool[e];if(null!=i&&i.length)return this._count--,i.shift();var n=t.UIPackage.createObjectFromURL(e);return n},e.prototype.returnObject=function(t){var e=t.resourceURL;if(e){var i=this._pool[e];null==i&&(i=new Array,this._pool[e]=i),this._count++,i.push(t)}},e}();t.GObjectPool=e,__reflect(e.prototype,"fairygui.GObjectPool")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(){var i=e.call(this)||this;return i._fontSize=0,i._leading=0,i._letterSpacing=0,i._underline=!1,i._textWidth=0,i._textHeight=0,i._fontSize=12,i._align=t.AlignType.Left,i._verticalAlign=t.VertAlignType.Top,i._text="",i._leading=3,i._color=0,i._templateVars=null,i._autoSize=t.AutoSizeType.Both,i._widthAutoSize=!0,i._heightAutoSize=!0,i._bitmapPool=new Array,i}return __extends(n,e),n.prototype.createDisplayObject=function(){this._textField=new egret.TextField,this._textField.$owner=this,this._textField.touchEnabled=!1,this.setDisplayObject(this._textField)},n.prototype.switchBitmapMode=function(t){t&&this.displayObject==this._textField?(null==this._bitmapContainer&&(this._bitmapContainer=new egret.Sprite,this._bitmapContainer.$owner=this),this.switchDisplayObject(this._bitmapContainer)):t||this.displayObject!=this._bitmapContainer||this.switchDisplayObject(this._textField)},n.prototype.dispose=function(){e.prototype.dispose.call(this),this._bitmapFont=null,this._requireRender=!1},Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,null==this._text&&(this._text=""),this.updateGear(6),this.parent&&this.parent._underConstruct?this.renderNow():this.render()},enumerable:!0,configurable:!0}),n.prototype.updateTextFieldText=function(){var e=this._text;if(null!=this._templateVars&&(e=this.parseTemplate(e)),this._ubbEnabled){var i=n._htmlParser.parser(t.ToolSet.parseUBB(t.ToolSet.encodeHTML(e)));if(this._underline)for(var o=0;o<i.length;o++){var r=i[o];r.style?r.style.underline=!0:r.style={underline:!0}}this._textField.textFlow=i}else if(this._underline){var i=new Array(1);i[0]={text:e,style:{underline:!0}},this._textField.textFlow=i}else this._textField.text=e},Object.defineProperty(n.prototype,"font",{get:function(){return this._font},set:function(t){this._font!=t&&(this._font=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){0>t||this._fontSize!=t&&(this._fontSize=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this._textField.textAlign=this.getAlignTypeString(this._align),this._bitmapFont&&!this._underConstruct&&this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this._textField.verticalAlign=this.getVertAlignTypeString(this._verticalAlign),this._bitmapFont&&!this._underConstruct&&this.render())},enumerable:!0,configurable:!0}),n.prototype.getAlignTypeString=function(e){return e==t.AlignType.Left?egret.HorizontalAlign.LEFT:e==t.AlignType.Center?egret.HorizontalAlign.CENTER:egret.HorizontalAlign.RIGHT},n.prototype.getVertAlignTypeString=function(e){return e==t.VertAlignType.Top?egret.VerticalAlign.TOP:e==t.VertAlignType.Middle?egret.VerticalAlign.MIDDLE:egret.VerticalAlign.BOTTOM},Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!=t&&(this._leading=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!=t&&(this._letterSpacing=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"underline",{get:function(){return this._underline},set:function(t){this._underline=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return this._textField.bold},set:function(t){this._textField.bold=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return this._textField.italic},set:function(t){this._textField.italic=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"singleLine",{get:function(){return!this._textField.multiline},set:function(t){t=!t,this._textField.multiline!=t&&(this._textField.multiline=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._textField.stroke},set:function(t){this._textField.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this._textField.strokeColor},set:function(t){this._textField.strokeColor=t,this.updateGear(4)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ubbEnabled",{get:function(){return this._ubbEnabled},set:function(t){this._ubbEnabled!=t&&(this._ubbEnabled=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoSize",{get:function(){return this._autoSize},set:function(e){this._autoSize!=e&&(this._autoSize=e,this._widthAutoSize=e==t.AutoSizeType.Both,this._heightAutoSize=e==t.AutoSizeType.Both||e==t.AutoSizeType.Height,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this._requireRender&&this.renderNow(),this._textWidth},enumerable:!0,configurable:!0}),n.prototype.ensureSizeCorrect=function(){this._sizeDirty&&this._requireRender&&this.renderNow()},n.prototype.updateTextFormat=function(){if(this._textField.size=this._fontSize,this._bitmapFont=null,t.ToolSet.startsWith(this._font,"ui://")){var e=t.UIPackage.getItemByURL(this._font);e&&(this._bitmapFont=e.owner.getItemAsset(e))}null==this._bitmapFont&&(this._font?this._textField.fontFamily=this._font:this._textField.fontFamily=t.UIConfig.defaultFont),this.grayed?this._textField.textColor=11184810:this._textField.textColor=this._color,this._textField.lineSpacing=this._leading,this._underConstruct||this.render()},n.prototype.render=function(){this._requireRender||(this._requireRender=!0,egret.callLater(this.__render,this)),this._sizeDirty||!this._widthAutoSize&&!this._heightAutoSize||(this._sizeDirty=!0,this.dispatchEventWith(t.GObject.SIZE_DELAY_CHANGE))},n.prototype.__render=function(){this._requireRender&&this.renderNow()},n.prototype.renderNow=function(t){if(void 0===t&&(t=!0),this._requireRender=!1,this._sizeDirty=!1,null!=this._bitmapFont)return void this.renderWithBitmapFont(t);this.switchBitmapMode(!1),this._textField.width=this._widthAutoSize?this.maxWidth<=0?1e4:this.maxWidth:Math.ceil(this.width),this.updateTextFieldText(),this._textWidth=Math.ceil(this._textField.textWidth),this._textWidth>0&&(this._textWidth+=4),this._textHeight=Math.ceil(this._textField.textHeight),this._textHeight>0&&(this._textHeight+=4);var e,i=0;this._widthAutoSize?(e=this._textWidth,this._textField.width=e):e=this.width,this._heightAutoSize?(i=this._textHeight,this._textField.height!=this._textHeight&&(this._textField.height=this._textHeight)):(i=this.height,this._textHeight>i&&(this._textHeight=i)),t&&(this._updatingSize=!0,this.setSize(e,i),this._updatingSize=!1)},n.prototype.renderWithBitmapFont=function(e){this.switchBitmapMode(!0);for(var o=this._bitmapContainer.numChildren,r=0;o>r;r++){var s=this._bitmapContainer.getChildAt(r);this._bitmapPool.push(s)}this._bitmapContainer.removeChildren(),this._lines?i.returnList(this._lines):this._lines=new Array;var a,h=this._letterSpacing,l=this._leading-1,u=this.width-2*n.GUTTER_X,c=0,_=0,p=0,d=0,f=0,g=0,y=0,m=0,v=0,b="",w=n.GUTTER_Y,C=!this._widthAutoSize&&this._textField.multiline,S=this._bitmapFont.resizable?this._fontSize/this._bitmapFont.size:1;this._textWidth=0,this._textHeight=0;var T=this._text;null!=this._templateVars&&(T=this.parseTemplate(T));for(var x=T.length,I=0;x>I;++I){var O=T.charAt(I),P=O.charCodeAt(0);if(10!=P){if(P>=65&&90>=P||P>=97&&122>=P?(0==g&&(y=c),g++):(g>0&&(m=c),g=0),32==P)d=Math.ceil(this._fontSize/2),f=this._fontSize;else{var j=this._bitmapFont.glyphs[O];j?(d=Math.ceil(j.advance*S),f=Math.ceil(j.lineHeight*S)):(d=0,f=0)}if(f>p&&(p=f),f>_&&(_=f),0!=c&&(c+=h),c+=d,!C||u>=c)b+=O;else{if(a=i.borrow(),a.height=_,a.textHeight=p,0==b.length)a.text=O;else if(g>0&&m>0){b+=O;var k=b.length-g;a.text=t.ToolSet.trimRight(b.substr(0,k)),a.width=m,b=b.substr(k),c-=y}else a.text=b,a.width=c-(d+h),b=O,c=d,_=f,p=f;a.y=w,w+=a.height+l,a.width>this._textWidth&&(this._textWidth=a.width),g=0,y=0,m=0,this._lines.push(a)}}else b+=O,a=i.borrow(),a.width=c,0==p&&(0==v&&(v=this._fontSize),0==_&&(_=v),p=_),a.height=_,v=_,a.textHeight=p,a.text=b,a.y=w,w+=a.height+l,a.width>this._textWidth&&(this._textWidth=a.width),this._lines.push(a),b="",c=0,_=0,p=0,g=0,y=0,m=0}b.length>0&&(a=i.borrow(),a.width=c,0==_&&(_=v),0==p&&(p=_),a.height=_,a.textHeight=p,a.text=b,a.y=w,a.width>this._textWidth&&(this._textWidth=a.width),this._lines.push(a)),this._textWidth>0&&(this._textWidth+=2*n.GUTTER_X);var L=this._lines.length;0==L?this._textHeight=0:(a=this._lines[this._lines.length-1],this._textHeight=a.y+a.height+n.GUTTER_Y);var E,B=0;if(E=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width,B=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height,e&&(this._updatingSize=!0,this.setSize(E,B),this._updatingSize=!1),0!=E&&0!=B){var A=n.GUTTER_X,M=0,z=0;u=this.width-2*n.GUTTER_X;for(var G=this._lines.length,r=0;G>r;r++){a=this._lines[r],A=n.GUTTER_X,M=this._align==t.AlignType.Center?(u-a.width)/2:this._align==t.AlignType.Right?u-a.width:0,x=a.text.length;for(var R=0;x>R;R++)if(O=a.text.charAt(R),P=O.charCodeAt(0),10!=P)if(32!=P)if(j=this._bitmapFont.glyphs[O],null!=j){z=(a.height+a.textHeight)/2-Math.ceil(j.lineHeight*S);var F;this._bitmapPool.length?F=this._bitmapPool.pop():(F=new egret.Bitmap,F.smoothing=!0),F.x=A+M+Math.ceil(j.offsetX*S),F.y=a.y+z+Math.ceil(j.offsetY*S),F.$backupY=F.y,F.texture=j.texture,F.scaleX=S,F.scaleY=S,this._bitmapContainer.addChild(F),A+=h+Math.ceil(j.advance*S)}else A+=h;else A+=h+Math.ceil(this._fontSize/2)}this.doAlign()}},n.prototype.handleSizeChanged=function(){this._updatingSize||(null!=this._bitmapFont?this._widthAutoSize?this.doAlign():this.render():this._underConstruct?(this._textField.width=this.width,this._textField.height=this.height):this._widthAutoSize||(this._heightAutoSize?this._textField.width=this.width:(this._textField.width=this.width,this._textField.height=this.height)))},n.prototype.parseTemplate=function(t){for(var e,i,n,o,r=0,s="";-1!=(e=t.indexOf("{",r));)if(e>0&&92==t.charCodeAt(e-1))s+=t.substring(r,e-1),s+="{",r=e+1;else{if(s+=t.substring(r,e),r=e,e=t.indexOf("}",r),-1==e)break;e!=r+1?(n=t.substring(r+1,e),i=n.indexOf("="),-1!=i?(o=this._templateVars[n.substring(0,i)],s+=null==o?n.substring(i+1):o):(o=this._templateVars[n],null!=o&&(s+=o)),r=e+1):(s+=t.substr(r,2),r=e+1)}return r<t.length&&(s+=t.substr(r)),s},Object.defineProperty(n.prototype,"templateVars",{get:function(){return this._templateVars},set:function(t){(null!=this._templateVars||null!=t)&&(this._templateVars=t,this.flushVars())},enumerable:!0,configurable:!0}),n.prototype.setVar=function(t,e){return this._templateVars||(this._templateVars={}),this._templateVars[t]=e,this},n.prototype.flushVars=function(){this.render()},n.prototype.handleGrayedChanged=function(){e.prototype.handleGrayedChanged.call(this),this.updateTextFormat()},n.prototype.doAlign=function(){var e;if(this._verticalAlign==t.VertAlignType.Top||0==this._textHeight)e=n.GUTTER_Y;else{var i=this.height-this._textHeight;0>i&&(i=0),e=this._verticalAlign==t.VertAlignType.Middle?Math.floor(i/2):Math.floor(i)}for(var o=this._bitmapContainer.numChildren,r=0;o>r;r++){var s=this._bitmapContainer.getChildAt(r);
s.y=s.$backupY+e}},n.prototype.setup_beforeAdd=function(i,n){e.prototype.setup_beforeAdd.call(this,i,n),i.seek(n,5),this._font=i.readS(),this._fontSize=i.readShort(),this._color=i.readColor(),this.align=i.readByte(),this.verticalAlign=i.readByte(),this._leading=i.readShort(),this._letterSpacing=i.readShort(),this._ubbEnabled=i.readBool(),this._autoSize=i.readByte(),this._widthAutoSize=this._autoSize==t.AutoSizeType.Both,this._heightAutoSize=this._autoSize==t.AutoSizeType.Both||this._autoSize==t.AutoSizeType.Height,this._underline=i.readBool(),this._textField.italic=i.readBool(),this._textField.bold=i.readBool(),this._textField.multiline=!i.readBool(),i.readBool()&&(this._textField.strokeColor=i.readColor(),this.stroke=i.readFloat()+1),i.readBool()&&i.skip(12),i.readBool()&&(this._templateVars={})},n.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),this.updateTextFormat(),t.seek(i,6);var n=t.readS();null!=n&&(this.text=n),this._sizeDirty=!1},n.GUTTER_X=2,n.GUTTER_Y=2,n._htmlParser=new egret.HtmlTextParser,n}(t.GObject);t.GTextField=e,__reflect(e.prototype,"fairygui.GTextField");var i=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.y=0}return t.borrow=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.returns=function(e){t.pool.push(e)},t.returnList=function(e){for(var i=e.length,n=0;i>n;n++){var o=e[n];t.pool.push(o)}e.length=0},t.pool=[],t}();t.LineInfo=i,__reflect(i.prototype,"fairygui.LineInfo")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this._readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.url=this.onTag_URL,this._handlers.img=this.onTag_IMG,this._handlers.b=this.onTag_Simple,this._handlers.i=this.onTag_Simple,this._handlers.u=this.onTag_Simple,this._handlers.sup=this.onTag_Simple,this._handlers.sub=this.onTag_Simple,this._handlers.color=this.onTag_COLOR,this._handlers.font=this.onTag_FONT,this._handlers.size=this.onTag_SIZE}return t.prototype.onTag_URL=function(t,e,i){if(e)return"</a>";if(null!=i)return'<a href="'+i+'" target="_blank">';var n=this.getTagText();return'<a href="'+n+'" target="_blank">'},t.prototype.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},t.prototype.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},t.prototype.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},t.prototype.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},t.prototype.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},t.prototype.getTagText=function(t){void 0===t&&(t=!1);for(var e,i=this._readPos,n="";-1!=(e=this._text.indexOf("[",i));){if(92!=this._text.charCodeAt(e-1)){n+=this._text.substring(i,e);break}n+=this._text.substring(i,e-1),n+="[",i=e+1}return-1==e?null:(t&&(this._readPos=e),n)},t.prototype.parse=function(t,e){void 0===e&&(e=!1),this._text=t;for(var i,n,o,r,s,a,h,l=0,u="";-1!=(i=this._text.indexOf("[",l));)if(i>0&&92==this._text.charCodeAt(i-1))u+=this._text.substring(l,i-1),u+="[",l=i+1;else{if(u+=this._text.substring(l,i),l=i,i=this._text.indexOf("]",l),-1==i)break;o="/"==this._text.charAt(l+1),r=this._text.substring(o?l+2:l+1,i),this._readPos=i+1,s=null,a=null,n=r.indexOf("="),-1!=n&&(s=r.substring(n+1),r=r.substring(0,n)),r=r.toLowerCase(),h=this._handlers[r],null!=h?e||(a=h.call(this,r,o,s),null!=a&&(u+=a)):u+=this._text.substring(l,this._readPos),l=this._readPos}return l<this._text.length&&(u+=this._text.substr(l)),this._text=null,u},t.inst=new t,t}();t.UBBParser=e,__reflect(e.prototype,"fairygui.UBBParser")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.width=0,this.height=0,this.tileGridIndice=0,this.interval=0,this.repeatDelay=0}return t.prototype.load=function(){return this.owner.getItemAsset(this)},t.prototype.toString=function(){return this.name},t}();t.PackageItem=e,__reflect(e.prototype,"fairygui.PackageItem")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0}return t}();t.BMGlyph=e,__reflect(e.prototype,"fairygui.BMGlyph")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=-1);var r=t.call(this,e,!1)||this;return r.touchPointID=0,r.stageX=i,r.stageY=n,r.touchPointID=o,r}return __extends(e,t),e.prototype.preventDefault=function(){this._prevented=!0},e.prototype.isDefaultPrevented=function(){return this._prevented},e.DRAG_START="__dragStart",e.DRAG_END="__dragEnd",e.DRAG_MOVING="__dragMoving",e}(egret.Event);t.DragEvent=e,__reflect(e.prototype,"fairygui.DragEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e,!1)||this;return n.source=i,n}return __extends(e,t),e.DROP="__drop",e}(egret.Event);t.DropEvent=e,__reflect(e.prototype,"fairygui.DropEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i,n,o){void 0===i&&(i=null),void 0===n&&(n=0),void 0===o&&(o=0);var r=t.call(this,e,!1)||this;return r.itemObject=i,r.stageX=n,r.stageY=o,r}return __extends(e,t),e.CLICK="___itemClick",e}(egret.Event);t.ItemEvent=e,__reflect(e.prototype,"fairygui.ItemEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){return t.call(this,e,!1)||this}return __extends(e,t),e.CHANGED="___stateChanged",e}(egret.Event);t.StateChangeEvent=e,__reflect(e.prototype,"fairygui.StateChangeEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._selectedIndex=0,t._previousIndex=0,t.changing=!1,t._pageIds=[],t._pageNames=[],t._selectedIndex=-1,t._previousIndex=-1,t}return __extends(i,e),i.prototype.dispose=function(){},Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){if(this._selectedIndex!=e){if(e>this._pageIds.length-1)throw"index out of bounds: "+e;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=e,this.parent.applyController(this),this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED)),this.changing=!1}},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.changing=!1}},Object.defineProperty(i.prototype,"previsousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedPage",{get:function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},set:function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.selectedIndex=e},enumerable:!0,configurable:!0}),i.prototype.setSelectedPage=function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.setSelectedIndex(e)},Object.defineProperty(i.prototype,"previousPage",{get:function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._pageIds.length},enumerable:!0,configurable:!0}),i.prototype.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t]},i.prototype.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length)},i.prototype.addPageAt=function(t,e){void 0===e&&(e=0);var n=""+i._nextPageId++;e==this._pageIds.length?(this._pageIds.push(n),this._pageNames.push(t)):(this._pageIds.splice(e,0,n),this._pageNames.splice(e,0,t))},i.prototype.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this))},i.prototype.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this)},i.prototype.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this.parent.applyController(this)},i.prototype.hasPage=function(t){return-1!=this._pageNames.indexOf(t)},i.prototype.getPageIndexById=function(t){return this._pageIds.indexOf(t)},i.prototype.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null},i.prototype.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null},i.prototype.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t]},Object.defineProperty(i.prototype,"selectedPageId",{get:function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},set:function(t){var e=this._pageIds.indexOf(t);this.selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"oppositePageId",{set:function(t){var e=this._pageIds.indexOf(t);e>0?this.selectedIndex=0:this._pageIds.length>1&&(this.selectedIndex=1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"previousPageId",{get:function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]},enumerable:!0,configurable:!0}),i.prototype.runActions=function(){if(this._actions)for(var t=this._actions.length,e=0;t>e;e++)this._actions[e].run(this,this.previousPageId,this.selectedPageId)},i.prototype.setup=function(e){var i=e.position;e.seek(i,0),this.name=e.readS(),this.autoRadioGroupDepth=e.readBool(),e.seek(i,1);var n,o,r=e.readShort();for(n=0;r>n;n++)this._pageIds.push(e.readS()),this._pageNames.push(e.readS());if(e.seek(i,2),r=e.readShort(),r>0)for(null==this._actions&&(this._actions=new Array),n=0;r>n;n++){o=e.readShort(),o+=e.position;var s=t.ControllerAction.createAction(e.readByte());s.setup(e),this._actions.push(s),e.position=o}null!=this.parent&&this._pageIds.length>0?this._selectedIndex=0:this._selectedIndex=-1},i._nextPageId=0,i}(egret.EventDispatcher);t.Controller=e,__reflect(e.prototype,"fairygui.Controller")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("\\"),-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("."),-1!=e?t.substring(0,e):t},e.startsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},e.endsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},e.trim=function(t){return e.trimLeft(e.trimRight(t))},e.trimLeft=function(t){for(var e="",i=0;i<t.length&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i++);return t.substr(i)},e.trimRight=function(t){for(var e="",i=t.length-1;i>=0&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i--);return t.substring(0,i+1)},e.convertToHtmlColor=function(t,e){void 0===e&&(e=!1);var i;i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),o=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),1==r.length&&(r="0"+r),"#"+i+n+o+r},e.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},e.displayObjectToGObject=function(t){for(;null!=t&&!(t instanceof egret.Stage);){if(t.$owner)return t.$owner;t=t.parent}return null},e.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},e.parseUBB=function(t){return e.defaultUBBParser.parse(t)},e.clamp=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},e.clamp01=function(t){return t>1?t=1:0>t&&(t=0),t},e.lerp=function(t,e,i){return t+i*(e-t)},e.defaultUBBParser=new t.UBBParser,e}();t.ToolSet=e,__reflect(e.prototype,"fairygui.ToolSet")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.matrix=new Array(t.LENGTH),this.reset()}return t.create=function(e,i,n,o){var r=new t;return r.adjustColor(e,i,n,o),r},t.prototype.reset=function(){for(var e=0;e<t.LENGTH;e++)this.matrix[e]=t.IDENTITY_MATRIX[e]},t.prototype.invert=function(){this.multiplyMatrix([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])},t.prototype.adjustColor=function(t,e,i,n){this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.prototype.adjustBrightness=function(t){t=255*this.cleanValue(t,1),this.multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0])},t.prototype.adjustContrast=function(t){t=this.cleanValue(t,1);var e=t+1,i=128*(1-e);this.multiplyMatrix([e,0,0,0,i,0,e,0,0,i,0,0,e,0,i,0,0,0,1,0])},t.prototype.adjustSaturation=function(e){e=this.cleanValue(e,1),e+=1;var i=1-e,n=i*t.LUMA_R,o=i*t.LUMA_G,r=i*t.LUMA_B;this.multiplyMatrix([n+e,o,r,0,0,n,o+e,r,0,0,n,o,r+e,0,0,0,0,0,1,0])},t.prototype.adjustHue=function(e){e=this.cleanValue(e,1),e*=Math.PI;var i=Math.cos(e),n=Math.sin(e);this.multiplyMatrix([t.LUMA_R+i*(1-t.LUMA_R)+n*-t.LUMA_R,t.LUMA_G+i*-t.LUMA_G+n*-t.LUMA_G,t.LUMA_B+i*-t.LUMA_B+n*(1-t.LUMA_B),0,0,t.LUMA_R+i*-t.LUMA_R+.143*n,t.LUMA_G+i*(1-t.LUMA_G)+.14*n,t.LUMA_B+i*-t.LUMA_B+n*-.283,0,0,t.LUMA_R+i*-t.LUMA_R+n*-(1-t.LUMA_R),t.LUMA_G+i*-t.LUMA_G+n*t.LUMA_G,t.LUMA_B+i*(1-t.LUMA_B)+n*t.LUMA_B,0,0,0,0,0,1,0])},t.prototype.concat=function(e){e.length==t.LENGTH&&this.multiplyMatrix(e)},t.prototype.clone=function(){var e=new t;return e.copyMatrix(this.matrix),e},t.prototype.copyMatrix=function(e){for(var i=t.LENGTH,n=0;i>n;n++)this.matrix[n]=e[n]},t.prototype.multiplyMatrix=function(t){for(var e=[],i=0,n=0;4>n;++n){for(var o=0;5>o;++o)e[i+o]=t[i]*this.matrix[o]+t[i+1]*this.matrix[o+5]+t[i+2]*this.matrix[o+10]+t[i+3]*this.matrix[o+15]+(4==o?t[i+4]:0);i+=5}this.copyMatrix(e)},t.prototype.cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.LENGTH=t.IDENTITY_MATRIX.length,t.LUMA_R=.299,t.LUMA_G=.587,t.LUMA_B=.114,t}();t.ColorMatrix=e,__reflect(e.prototype,"fairygui.ColorMatrix")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.evaluate=function(n,o,r,s,a){switch(n){case t.EaseType.Linear:return o/r;case t.EaseType.SineIn:return-Math.cos(o/r*e._PiOver2)+1;case t.EaseType.SineOut:return Math.sin(o/r*e._PiOver2);case t.EaseType.SineInOut:return-.5*(Math.cos(Math.PI*o/r)-1);case t.EaseType.QuadIn:return(o/=r)*o;case t.EaseType.QuadOut:return-(o/=r)*(o-2);case t.EaseType.QuadInOut:return(o/=.5*r)<1?.5*o*o:-.5*(--o*(o-2)-1);case t.EaseType.CubicIn:return(o/=r)*o*o;case t.EaseType.CubicOut:return(o=o/r-1)*o*o+1;case t.EaseType.CubicInOut:return(o/=.5*r)<1?.5*o*o*o:.5*((o-=2)*o*o+2);case t.EaseType.QuartIn:return(o/=r)*o*o*o;case t.EaseType.QuartOut:return-((o=o/r-1)*o*o*o-1);case t.EaseType.QuartInOut:return(o/=.5*r)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2);case t.EaseType.QuintIn:return(o/=r)*o*o*o*o;case t.EaseType.QuintOut:return(o=o/r-1)*o*o*o*o+1;case t.EaseType.QuintInOut:return(o/=.5*r)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2);case t.EaseType.ExpoIn:return 0==o?0:Math.pow(2,10*(o/r-1));case t.EaseType.ExpoOut:return o==r?1:-Math.pow(2,-10*o/r)+1;case t.EaseType.ExpoInOut:return 0==o?0:o==r?1:(o/=.5*r)<1?.5*Math.pow(2,10*(o-1)):.5*(-Math.pow(2,-10*--o)+2);case t.EaseType.CircIn:return-(Math.sqrt(1-(o/=r)*o)-1);case t.EaseType.CircOut:return Math.sqrt(1-(o=o/r-1)*o);case t.EaseType.CircInOut:return(o/=.5*r)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1);case t.EaseType.ElasticIn:var h;return 0==o?0:1==(o/=r)?1:(0==a&&(a=.3*r),1>s?(s=1,h=a/4):h=a/e._TwoPi*Math.asin(1/s),-(s*Math.pow(2,10*(o-=1))*Math.sin((o*r-h)*e._TwoPi/a)));case t.EaseType.ElasticOut:var l;return 0==o?0:1==(o/=r)?1:(0==a&&(a=.3*r),1>s?(s=1,l=a/4):l=a/e._TwoPi*Math.asin(1/s),s*Math.pow(2,-10*o)*Math.sin((o*r-l)*e._TwoPi/a)+1);case t.EaseType.ElasticInOut:var u;return 0==o?0:2==(o/=.5*r)?1:(0==a&&(a=r*(.3*1.5)),1>s?(s=1,u=a/4):u=a/e._TwoPi*Math.asin(1/s),1>o?-.5*(s*Math.pow(2,10*(o-=1))*Math.sin((o*r-u)*e._TwoPi/a)):s*Math.pow(2,-10*(o-=1))*Math.sin((o*r-u)*e._TwoPi/a)*.5+1);case t.EaseType.BackIn:return(o/=r)*o*((s+1)*o-s);case t.EaseType.BackOut:return(o=o/r-1)*o*((s+1)*o+s)+1;case t.EaseType.BackInOut:return(o/=.5*r)<1?.5*(o*o*(((s*=1.525)+1)*o-s)):.5*((o-=2)*o*(((s*=1.525)+1)*o+s)+2);case t.EaseType.BounceIn:return i.easeIn(o,r);case t.EaseType.BounceOut:return i.easeOut(o,r);case t.EaseType.BounceInOut:return i.easeInOut(o,r);default:return-(o/=r)*(o-2)}},e._PiOver2=.5*Math.PI,e._TwoPi=2*Math.PI,e}();t.EaseManager=e,__reflect(e.prototype,"fairygui.EaseManager");var i=function(){function t(){}return t.easeIn=function(e,i){return 1-t.easeOut(i-e,i)},t.easeOut=function(t,e){return(t/=e)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.easeInOut=function(e,i){return.5*i>e?.5*t.easeIn(2*e,i):.5*t.easeOut(2*e-i,i)+.5},t}();__reflect(i.prototype,"Bounce")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){}return t.Linear=0,t.SineIn=1,t.SineOut=2,t.SineInOut=3,t.QuadIn=4,t.QuadOut=5,t.QuadInOut=6,t.CubicIn=7,t.CubicOut=8,t.CubicInOut=9,t.QuartIn=10,t.QuartOut=11,t.QuartInOut=12,t.QuintIn=13,t.QuintOut=14,t.QuintInOut=15,t.ExpoIn=16,t.ExpoOut=17,t.ExpoInOut=18,t.CircIn=19,t.CircOut=20,t.CircInOut=21,t.ElasticIn=22,t.ElasticOut=23,t.ElasticInOut=24,t.BackIn=25,t.BackOut=26,t.BackInOut=27,t.BounceIn=28,t.BounceOut=29,t.BounceInOut=30,t.Custom=31,t}();t.EaseType=e,__reflect(e.prototype,"fairygui.EaseType")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.to=function(e,i,n){return t.TweenManager.createTween()._to(e,i,n)},e.to2=function(e,i,n,o,r){return t.TweenManager.createTween()._to2(e,i,n,o,r)},e.to3=function(e,i,n,o,r,s,a){return t.TweenManager.createTween()._to3(e,i,n,o,r,s,a)},e.to4=function(e,i,n,o,r,s,a,h,l){return t.TweenManager.createTween()._to4(e,i,n,o,r,s,a,h,l)},e.toColor=function(e,i,n){return t.TweenManager.createTween()._toColor(e,i,n)},e.delayedCall=function(e){return t.TweenManager.createTween().setDelay(e)},e.shake=function(e,i,n,o){return t.TweenManager.createTween()._shake(e,i,n,o)},e.isTweening=function(e,i){return t.TweenManager.isTweening(e,i)},e.kill=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=null),t.TweenManager.killTweens(e,!1,null)},e.getTween=function(e,i){return void 0===i&&(i=null),t.TweenManager.getTween(e,i)},e.catchCallbackExceptions=!0,e}();t.GTween=e,__reflect(e.prototype,"fairygui.GTween")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._startValue=new t.TweenValue,this._endValue=new t.TweenValue,this._value=new t.TweenValue,this._deltaValue=new t.TweenValue,this._reset()}return e.prototype.setDelay=function(t){return this._delay=t,this},Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),e.prototype.setDuration=function(t){return this._duration=t,this},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),e.prototype.setBreakpoint=function(t){return this._breakpoint=t,this},e.prototype.setEase=function(t){return this._easeType=t,this},e.prototype.setEasePeriod=function(t){return this._easePeriod=t,this},e.prototype.setEaseOvershootOrAmplitude=function(t){return this._easeOvershootOrAmplitude=t,this},e.prototype.setRepeat=function(t,e){return void 0===e&&(e=!1),this._repeat=t,this._yoyo=e,this},Object.defineProperty(e.prototype,"repeat",{get:function(){return this._repeat},enumerable:!0,configurable:!0}),e.prototype.setTimeScale=function(t){return this._timeScale=t,this},e.prototype.setSnapping=function(t){return this._snapping=t,this},e.prototype.setTarget=function(t,e){return void 0===e&&(e=null),this._target=t,this._propType=e,this},Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e.prototype.setUserData=function(t){return this._userData=t,this},Object.defineProperty(e.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),e.prototype.onUpdate=function(t,e){return this._onUpdate=t,this._onUpdateCaller=e,this},e.prototype.onStart=function(t,e){return this._onStart=t,this._onStartCaller=e,this},e.prototype.onComplete=function(t,e){return this._onComplete=t,this._onCompleteCaller=e,this},Object.defineProperty(e.prototype,"startValue",{get:function(){return this._startValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this._endValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaValue",{get:function(){return this._deltaValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalizedTime",{get:function(){return this._normalizedTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return 0!=this._ended},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCompleted",{get:function(){return 1==this._ended},enumerable:!0,configurable:!0}),e.prototype.setPaused=function(t){return this._paused=t,this},e.prototype.seek=function(t){if(!this._killed){if(this._elapsedTime=t,this._elapsedTime<this._delay){if(!this._started)return;this._elapsedTime=this._delay}this.update()}},e.prototype.kill=function(t){void 0===t&&(t=!1),this._killed||(t&&(0==this._ended&&(this._breakpoint>=0?this._elapsedTime=this._delay+this._breakpoint:this._repeat>=0?this._elapsedTime=this._delay+this._duration*(this._repeat+1):this._elapsedTime=this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)},e.prototype._to=function(t,e,i){return this._valueSize=1,this._startValue.x=t,this._endValue.x=e,this._value.x=t,this._duration=i,this},e.prototype._to2=function(t,e,i,n,o){return this._valueSize=2,this._startValue.x=t,this._endValue.x=i,this._startValue.y=e,this._endValue.y=n,this._value.x=t,this._value.y=e,this._duration=o,this},e.prototype._to3=function(t,e,i,n,o,r,s){return this._valueSize=3,this._startValue.x=t,this._endValue.x=n,this._startValue.y=e,this._endValue.y=o,this._startValue.z=i,this._endValue.z=r,this._value.x=t,this._value.y=e,this._value.z=i,this._duration=s,this},e.prototype._to4=function(t,e,i,n,o,r,s,a,h){return this._valueSize=4,this._startValue.x=t,this._endValue.x=o,this._startValue.y=e,this._endValue.y=r,this._startValue.z=i,this._endValue.z=s,this._startValue.w=n,this._endValue.w=a,this._value.x=t,this._value.y=e,this._value.z=i,this._value.w=n,this._duration=h,this},e.prototype._toColor=function(t,e,i){return this._valueSize=4,this._startValue.color=t,this._endValue.color=e,this._value.color=t,this._duration=i,this},e.prototype._shake=function(t,e,i,n){return this._valueSize=5,this._startValue.x=t,this._startValue.y=e,this._startValue.w=i,this._duration=n,this},e.prototype._init=function(){this._delay=0,this._duration=0,this._breakpoint=-1,this._easeType=t.EaseType.QuadOut,this._timeScale=1,this._easePeriod=0,this._easeOvershootOrAmplitude=1.70158,this._snapping=!1,this._repeat=0,this._yoyo=!1,this._valueSize=0,this._started=!1,this._paused=!1,this._killed=!1,this._elapsedTime=0,this._normalizedTime=0,this._ended=0},e.prototype._reset=function(){this._target=null,this._userData=null,this._onStart=this._onUpdate=this._onComplete=null,this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null},e.prototype._update=function(t){if(1!=this._timeScale&&(t*=this._timeScale),0!=t){if(0!=this._ended)return this.callCompleteCallback(),void(this._killed=!0);this._elapsedTime+=t,this.update(),0!=this._ended&&(this._killed||(this.callCompleteCallback(),this._killed=!0))}},e.prototype.update=function(){if(this._ended=0,0==this._valueSize)return void(this._elapsedTime>=this._delay+this._duration&&(this._ended=1));if(!this._started){if(this._elapsedTime<this._delay)return;if(this._started=!0,this.callStartCallback(),this._killed)return}var e=!1,i=this._elapsedTime-this._delay;if(this._breakpoint>=0&&i>=this._breakpoint&&(i=this._breakpoint,this._ended=2),0!=this._repeat){var n=Math.floor(i/this._duration);i-=this._duration*n,this._yoyo&&(e=n%2==1),this._repeat>0&&this._repeat-n<0&&(this._yoyo&&(e=this._repeat%2==1),i=this._duration,this._ended=1)}else i>=this._duration&&(i=this._duration,this._ended=1);if(this._normalizedTime=t.EaseManager.evaluate(this._easeType,e?this._duration-i:i,this._duration,this._easeOvershootOrAmplitude,this._easePeriod),this._value.setZero(),this._deltaValue.setZero(),5==this._valueSize)if(0==this._ended){var o=this._startValue.w*(1-this._normalizedTime),r=o*(Math.random()>.5?1:-1),s=o*(Math.random()>.5?1:-1);this._deltaValue.x=r,this._deltaValue.y=s,this._value.x=this._startValue.x+r,this._value.y=this._startValue.y+s}else this._value.x=this._startValue.x,this._value.y=this._startValue.y;else for(var a=0;a<this._valueSize;a++){var h=this._startValue.getField(a),l=this._endValue.getField(a),u=h+(l-h)*this._normalizedTime;this._snapping&&(u=Math.round(u)),this._deltaValue.setField(a,u-this._value.getField(a)),this._value.setField(a,u)}if(null!=this._target&&null!=this._propType)if(this._propType instanceof Function)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else 5==this._valueSize?this._target[this._propType]=this._value.color:this._target[this._propType]=this._value.x;this.callUpdateCallback()},e.prototype.callStartCallback=function(){if(null!=this._onStart)try{this._onStart.call(this._onStartCaller,this)}catch(t){console.log("FairyGUI: error in start callback > "+t)}},e.prototype.callUpdateCallback=function(){if(null!=this._onUpdate)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(t){console.log("FairyGUI: error in update callback > "+t)}},e.prototype.callCompleteCallback=function(){if(null!=this._onComplete)try{this._onComplete.call(this._onCompleteCaller,this)}catch(t){console.log("FairyGUI: error in complete callback > "+t)}},e}();t.GTweener=e,__reflect(e.prototype,"fairygui.GTweener")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.createTween=function(){e._inited||(egret.startTick(e.update,null),e._inited=!0,e._lastTime=egret.getTimer());var i,n=e._tweenerPool.length;return i=n>0?e._tweenerPool.pop():new t.GTweener,i._init(),e._activeTweens[e._totalActiveTweens++]=i,e._totalActiveTweens==e._activeTweens.length&&(e._activeTweens.length=e._activeTweens.length+Math.ceil(.5*e._activeTweens.length)),i},e.isTweening=function(t,i){if(null==t)return!1;for(var n=null==i||void 0==i,o=0;o<e._totalActiveTweens;o++){var r=e._activeTweens[o];if(null!=r&&r.target==t&&!r._killed&&(n||r._propType==i))return!0}return!1},e.killTweens=function(t,i,n){if(null==t)return!1;for(var o=!1,r=e._totalActiveTweens,s=null==n||void 0==n,a=0;r>a;a++){var h=e._activeTweens[a];null==h||h.target!=t||h._killed||!s&&h._propType!=n||(h.kill(i),o=!0)}return o},e.getTween=function(t,i){if(null==t)return null;for(var n=e._totalActiveTweens,o=null==i||void 0==i,r=0;n>r;r++){var s=e._activeTweens[r];if(null!=s&&s.target==t&&!s._killed&&(o||s._propType==i))return s}return null},e.update=function(i){var n=i-e._lastTime;e._lastTime=i,n/=1e3;for(var o=e._totalActiveTweens,r=-1,s=0,a=0;o>a;a++){var h=e._activeTweens[a];null==h?(-1==r&&(r=a),s++):h._killed?(h._reset(),e._tweenerPool.push(h),e._activeTweens[a]=null,-1==r&&(r=a),s++):(h._target instanceof t.GObject&&h._target.isDisposed?h._killed=!0:h._paused||h._update(n),-1!=r&&(e._activeTweens[r]=h,e._activeTweens[a]=null,r++))}if(r>=0){if(e._totalActiveTweens!=o){var l=o;for(o=e._totalActiveTweens-o,a=0;o>a;a++)e._activeTweens[r++]=e._activeTweens[l++]}e._totalActiveTweens=r}return!1},e._activeTweens=new Array(30),e._tweenerPool=new Array,e._totalActiveTweens=0,e._lastTime=0,e._inited=!1,e}();t.TweenManager=e,__reflect(e.prototype,"fairygui.TweenManager")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.x=this.y=this.z=this.w=0}return Object.defineProperty(t.prototype,"color",{get:function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},set:function(t){this.x=(16711680&t)>>16,this.y=(65280&t)>>8,this.z=255&t,this.w=(4278190080&t)>>24},enumerable:!0,configurable:!0}),t.prototype.getField=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setField=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setZero=function(){this.x=this.y=this.z=this.w=0},t}();t.TweenValue=e,__reflect(e.prototype,"fairygui.TweenValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.playTimes=1,e.delay=0,e.stopOnExit=!1,e}return __extends(e,t),e.prototype.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this._currentTransition&&this._currentTransition.playing?e.changePlayTimes(this.playTimes):e.play(null,null,null,this.playTimes,this.delay),this._currentTransition=e)},e.prototype.leave=function(t){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null)},e.prototype.setup=function(e){t.prototype.setup.call(this,e),this.transitionName=e.readS(),this.playTimes=e.readInt(),this.delay=e.readFloat(),this.stopOnExit=e.readBool()},e}(t.ControllerAction);t.PlayTransitionAction=e,__reflect(e.prototype,"fairygui.PlayTransitionAction")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this._default=new i(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={}},n.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.width=e.readInt(),n.height=e.readInt(),n.scaleX=e.readFloat(),n.scaleY=e.readFloat()},n.prototype.apply=function(){var e=this._storage[this._controller.selectedPageId];if(e||(e=this._default),this._tweenConfig&&this._tweenConfig.tween&&!t.UIPackage._constructing&&!t.GearBase.disableAllTweenEffect){if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==e.width&&this._tweenConfig._tweener.endValue.y==e.height&&this._tweenConfig._tweener.endValue.z==e.scaleX&&this._tweenConfig._tweener.endValue.w==e.scaleY)return;
this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var i=e.width!=this._owner.width||e.height!=this._owner.height,n=e.scaleX!=this._owner.scaleX||e.scaleY!=this._owner.scaleY;(i||n)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=t.GTween.to4(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY,e.width,e.height,e.scaleX,e.scaleY,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((i?1:0)+(n?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.setSize(e.width,e.height,this._owner.gearXY.controller==this._controller),this._owner.setScale(e.scaleX,e.scaleY),this._owner._gearLocked=!1},n.prototype.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&this._owner.setSize(t.value.x,t.value.y,this._owner.checkGearController(1,this._controller)),0!=(2&e)&&this._owner.setScale(t.value.z,t.value.w),this._owner._gearLocked=!1},n.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},n.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY},n.prototype.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.width+=t,n.height+=e}this._default.width+=t,this._default.height+=e,this.updateState()}},n}(t.GearBase);t.GearSize=e,__reflect(e.prototype,"fairygui.GearSize");var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}return t}();__reflect(i.prototype,"GearSizeValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.init=function(){this._default=new egret.Point(this._owner.x,this._owner.y),this._storage={}},i.prototype.addStatus=function(t,e){var i;null==t?i=this._default:(i=new egret.Point,this._storage[t]=i),i.x=e.readInt(),i.y=e.readInt()},i.prototype.apply=function(){var e=this._storage[this._controller.selectedPageId];if(e||(e=this._default),this._tweenConfig&&this._tweenConfig.tween&&!t.UIPackage._constructing&&!t.GearBase.disableAllTweenEffect){if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==e.x&&this._tweenConfig._tweener.endValue.y==e.y)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}(this._owner.x!=e.x||this._owner.y!=e.y)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=t.GTween.to2(this._owner.x,this._owner.y,e.x,e.y,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.setXY(e.x,e.y),this._owner._gearLocked=!1},i.prototype.__tweenUpdate=function(t){this._owner._gearLocked=!0,this._owner.setXY(t.value.x,t.value.y),this._owner._gearLocked=!1},i.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},i.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new egret.Point,this._storage[this._controller.selectedPageId]=t),t.x=this._owner.x,t.y=this._owner.y},i.prototype.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.x+=t,n.y+=e}this._default.x+=t,this._default.y+=e,this.updateState()}},i}(t.GearBase);t.GearXY=e,__reflect(e.prototype,"fairygui.GearXY")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this._default=this._owner.text,this._storage={}},e.prototype.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];void 0!==t?this._owner.text=t:this._owner.text=this._default,this._owner._gearLocked=!1},e.prototype.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text},e}(t.GearBase);t.GearText=e,__reflect(e.prototype,"fairygui.GearText")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this._default=this._owner.icon,this._storage={}},e.prototype.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];void 0!==t?this._owner.icon=t:this._owner.icon=this._default,this._owner._gearLocked=!1},e.prototype.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.icon},e}(t.GearBase);t.GearIcon=e,__reflect(e.prototype,"fairygui.GearIcon")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this._default=new i(this._owner.playing,this._owner.frame),this._storage={}},e.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.playing=e.readBool(),n.frame=e.readInt()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1},e.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.frame=this._owner.frame,t.playing=this._owner.playing},e}(t.GearBase);t.GearAnimation=e,__reflect(e.prototype,"fairygui.GearAnimation");var i=function(){function t(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}return t}();__reflect(i.prototype,"GearAnimationValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){void 0!=this._owner.strokeColor?this._default=new i(this._owner.color,this._owner.strokeColor):this._default=new i(this._owner.color),this._storage={}},e.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.color=e.readColor(),n.strokeColor=e.readColor()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.color=t.color,void 0==this._owner.strokeColor||isNaN(t.strokeColor)||(this._owner.strokeColor=t.strokeColor),this._owner._gearLocked=!1},e.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i(null,null),this._storage[this._controller.selectedPageId]=t),t.color=this._owner.color,void 0!=this._owner.strokeColor&&(t.strokeColor=this._owner.strokeColor)},e}(t.GearBase);t.GearColor=e,__reflect(e.prototype,"fairygui.GearColor");var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.color=t,this.strokeColor=e}return t}();__reflect(i.prototype,"GearColorValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._displayLockToken=1,i._visible=0,i}return __extends(e,t),e.prototype.init=function(){this.pages=null},e.prototype.apply=function(){this._displayLockToken++,0==this._displayLockToken&&(this._displayLockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0},e.prototype.addLock=function(){return this._visible++,this._displayLockToken},e.prototype.releaseLock=function(t){t==this._displayLockToken&&this._visible--},Object.defineProperty(e.prototype,"connected",{get:function(){return null==this._controller||this._visible>0},enumerable:!0,configurable:!0}),e}(t.GearBase);t.GearDisplay=e,__reflect(e.prototype,"fairygui.GearDisplay")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this._default=new i(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable),this._storage={}},n.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.alpha=e.readFloat(),n.rotation=e.readFloat(),n.grayed=e.readBool(),n.touchable=e.readBool()},n.prototype.apply=function(){var e=this._storage[this._controller.selectedPageId];if(e||(e=this._default),this._tweenConfig&&this._tweenConfig.tween&&!t.UIPackage._constructing&&!t.GearBase.disableAllTweenEffect){if(this._owner._gearLocked=!0,this._owner.grayed=e.grayed,this._owner.touchable=e.touchable,this._owner._gearLocked=!1,null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==e.alpha&&this._tweenConfig._tweener.endValue.y==e.rotation)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var i=e.alpha!=this._owner.alpha,n=e.rotation!=this._owner.rotation;(i||n)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=t.GTween.to2(this._owner.alpha,this._owner.rotation,e.alpha,e.rotation,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((i?1:0)+(n?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.grayed=e.grayed,this._owner.touchable=e.touchable,this._owner.alpha=e.alpha,this._owner.rotation=e.rotation,this._owner._gearLocked=!1},n.prototype.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&(this._owner.alpha=t.value.x),0!=(2&e)&&(this._owner.rotation=t.value.y),this._owner._gearLocked=!1},n.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},n.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed,t.touchable=this._owner.touchable},n}(t.GearBase);t.GearLook=e,__reflect(e.prototype,"fairygui.GearLook");var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!0),this.alpha=t,this.rotation=e,this.grayed=i,this.touchable=n}return t}();__reflect(i.prototype,"GearLookValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.enter=function(e){if(this.controllerName){var i;if(this.objectId){var n=e.parent.getChildById(this.objectId);if(!(n instanceof t.GComponent))return;i=n}else i=e.parent;if(i){var o=i.getController(this.controllerName);o&&o!=e&&!o.changing&&(o.selectedPageId=this.targetPage)}}},i.prototype.setup=function(t){e.prototype.setup.call(this,t),this.objectId=t.readS(),this.controllerName=t.readS(),this.targetPage=t.readS()},i}(t.ControllerAction);t.ChangePageAction=e,__reflect(e.prototype,"fairygui.ChangePageAction")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._ownerBaseX=0,this._ownerBaseY=0,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._paused=!1,this._options=0,this._reversed=!1,this._totalDuration=0,this._autoPlay=!1,this._autoPlayTimes=1,this._autoPlayDelay=0,this._timeScale=1,this._startTime=0,this._endTime=0,this._owner=t,this._items=new Array}return e.prototype.play=function(t,e,i,n,o,r,s){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=-1),this._play(t,e,i,n,o,r,s,!1)},e.prototype.playReverse=function(t,e,i,n,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),this._play(t,e,i,n,o,0,-1,!0)},e.prototype.changePlayTimes=function(t){this._totalTimes=t},e.prototype.setAutoPlay=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=0),this._autoPlay!=t&&(this._autoPlay=t,this._autoPlayTimes=e,this._autoPlayDelay=i,this._autoPlay?this._owner.onStage&&this.play(null,null,this._autoPlayTimes,this._autoPlayDelay):this._owner.onStage||this.stop(!1,!0))},e.prototype._play=function(e,n,o,r,s,a,h,l){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=-1),void 0===l&&(l=!1),this.stop(!0,!0),this._totalTimes=r,this._reversed=l,this._startTime=a,this._endTime=h,this._playing=!0,this._paused=!1,this._onComplete=e,this._onCompleteParam=o,this._onCompleteCaller=n;for(var u=this._items.length,c=0;u>c;c++){var _=this._items[c];if(null==_.target?_.targetId?_.target=this._owner.getChildById(_.targetId):_.target=this._owner:_.target!=this._owner&&_.target.parent!=this._owner&&(_.target=null),null!=_.target&&_.type==i.Transition){var p=_.target.getTransition(_.value.transName);if(p==this&&(p=null),null!=p)if(0==_.value.playTimes){var d;for(d=c-1;d>=0;d--){var f=this._items[d];if(f.type==i.Transition&&f.value.trans==p){f.value.stopTime=_.time-f.time;break}}0>d?_.value.stopTime=0:p=null}else _.value.stopTime=-1;_.value.trans=p}}0==s?this.onDelayedPlay():t.GTween.delayedCall(s).onComplete(this.onDelayedPlay,this)},e.prototype.stop=function(e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var n=this._onComplete,o=this._onCompleteParam,r=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,t.GTween.kill(this);var s=this._items.length;if(this._reversed)for(var a=s-1;a>=0;a--){var h=this._items[a];null!=h.target&&this.stopItem(h,e)}else for(a=0;s>a;a++)h=this._items[a],null!=h.target&&this.stopItem(h,e);i&&null!=n&&n.call(r,o)}},e.prototype.stopItem=function(t,e){if(0!=t.displayLockToken&&(t.target.releaseDisplayLock(t.displayLockToken),t.displayLockToken=0),null!=t.tweener&&(t.tweener.kill(e),t.tweener=null,t.type!=i.Shake||e||(t.target._gearLocked=!0,t.target.setXY(t.target.x-t.value.lastOffsetX,t.target.y-t.value.lastOffsetY),t.target._gearLocked=!1)),t.type==i.Transition){var n=t.value.trans;null!=n&&n.stop(e,!1)}},e.prototype.setPaused=function(e){if(this._playing&&this._paused!=e){this._paused=e;var n=t.GTween.getTween(this);null!=n&&n.setPaused(e);for(var o=this._items.length,r=0;o>r;r++){var s=this._items[r];null!=s.target&&(s.type==i.Transition?null!=s.value.trans&&s.value.trans.setPaused(e):s.type==i.Animation&&(e?(s.value.flag=s.target.playing,s.target.playing=!1):s.target.playing=s.value.flag),null!=s.tweener&&s.tweener.setPaused(e))}}},e.prototype.dispose=function(){this._playing&&t.GTween.kill(this);for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];null!=n.tweener&&(n.tweener.kill(),n.tweener=null),n.target=null,n.hook=null,null!=n.tweenConfig&&(n.tweenConfig.endHook=null)}this._items.length=0,this._playing=!1,this._onComplete=null,this._onCompleteCaller=null,this._onCompleteParam=null},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o,r=this._items.length,s=0;r>s;s++){var a=this._items[s];if(a.label==t)o=null!=a.tweenConfig?a.tweenConfig.startValue:a.value;else{if(null==a.tweenConfig||a.tweenConfig.endLabel!=t)continue;o=a.tweenConfig.endValue}switch(a.type){case i.XY:case i.Size:case i.Pivot:case i.Scale:case i.Skew:o.b1=!0,o.b2=!0,o.f1=parseFloat(e[0]),o.f2=parseFloat(e[1]);break;case i.Alpha:o.f1=parseFloat(e[0]);break;case i.Rotation:o.f1=parseFloat(e[0]);break;case i.Color:o.f1=parseFloat(e[0]);break;case i.Animation:o.frame=parseInt(e[0]),e.length>1&&(o.playing=e[1]);break;case i.Visible:o.visible=e[0];break;case i.Sound:o.sound=e[0],e.length>1&&(o.volume=parseFloat(e[1]));break;case i.Transition:o.transName=e[0],e.length>1&&(o.playTimes=parseInt(e[1]));break;case i.Shake:o.amplitude=parseFloat(e[0]),e.length>1&&(o.duration=parseFloat(e[1]));break;case i.ColorFilter:o.f1=parseFloat(e[0]),o.f2=parseFloat(e[1]),o.f3=parseFloat(e[2]),o.f4=parseFloat(e[3]);break;case i.Text:case i.Icon:o.text=e[0]}}},e.prototype.setHook=function(t,e,i){for(var n=this._items.length,o=0;n>o;o++){var r=this._items[o];if(r.label==t){r.hook=e,r.hookCaller=i;break}if(null!=r.tweenConfig&&r.tweenConfig.endLabel==t){r.tweenConfig.endHook=e,r.tweenConfig.endHookCaller=i;break}}},e.prototype.clearHooks=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.hook=null,i.hookCaller=null,null!=i.tweenConfig&&(i.tweenConfig.endHook=null,i.tweenConfig.endHookCaller=null)}},e.prototype.setTarget=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var o=this._items[n];o.label==t&&(o.targetId=e==this._owner||null==e?"":e.id,this._playing?o.targetId.length>0?o.target=this._owner.getChildById(o.targetId):o.target=this._owner:o.target=null)}},e.prototype.setDuration=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var o=this._items[n];null!=o.tweenConfig&&o.label==t&&(o.tweenConfig.duration=e)}},e.prototype.getLabelTime=function(t){for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];if(n.label==t)return n.time;if(null!=n.tweenConfig&&n.tweenConfig.endLabel==t)return n.time+n.tweenConfig.duration}return Number.NaN},Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){if(this._timeScale!=t&&(this._timeScale=t,this._playing))for(var e=this._items.length,n=0;e>n;n++){var o=this._items[n];null!=o.tweener?o.tweener.setTimeScale(t):o.type==i.Transition?null!=o.value.trans&&(o.value.trans.timeScale=t):o.type==i.Animation&&null!=o.target&&(o.target.timeScale=t)}},enumerable:!0,configurable:!0}),e.prototype.updateFromRelations=function(t,e,n){var o=this._items.length;if(0!=o)for(var r=0;o>r;r++){var s=this._items[r];s.type==i.XY&&s.targetId==t&&(null!=s.tweenConfig?(s.tweenConfig.startValue.f1+=e,s.tweenConfig.startValue.f2+=n,s.tweenConfig.endValue.f1+=e,s.tweenConfig.endValue.f2+=n):(s.value.f1+=e,s.value.f2+=n))}},e.prototype.onOwnerAddedToStage=function(){this._autoPlay&&!this._playing&&this.play(null,null,null,this._autoPlayTimes,this._autoPlayDelay)},e.prototype.onOwnerRemovedFromStage=function(){0==(this._options&e.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&e.OPTION_AUTO_STOP_AT_END)?!0:!1,!1)},e.prototype.onDelayedPlay=function(){if(this.internalPlay(),this._playing=this._totalTasks>0,this._playing){if(0!=(this._options&e.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var t=this._items.length,i=0;t>i;i++){var n=this._items[i];null!=n.target&&n.target!=this._owner&&(n.displayLockToken=n.target.addDisplayLock())}}else if(null!=this._onComplete){var o=this._onComplete,r=this._onCompleteParam,s=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,o.call(s,r)}},e.prototype.internalPlay=function(){this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;var t,e,n=this._items.length,o=!1;if(this._reversed)for(e=n-1;e>=0;e--)t=this._items[e],null!=t.target&&this.playItem(t);else for(e=0;n>e;e++)t=this._items[e],null!=t.target&&(t.type==i.Animation&&0!=this._startTime&&t.time<=this._startTime?(o=!0,t.value.flag=!1):this.playItem(t));o&&this.skipAnimations()},e.prototype.playItem=function(e){var n;if(null!=e.tweenConfig){if(n=this._reversed?this._totalDuration-e.time-e.tweenConfig.duration:e.time,-1==this._endTime||n<=this._endTime){var o,r;switch(this._reversed?(o=e.tweenConfig.endValue,r=e.tweenConfig.startValue):(o=e.tweenConfig.startValue,r=e.tweenConfig.endValue),e.value.b1=o.b1||r.b1,e.value.b2=o.b2||r.b2,e.type){case i.XY:case i.Size:case i.Scale:case i.Skew:e.tweener=t.GTween.to2(o.f1,o.f2,r.f1,r.f2,e.tweenConfig.duration);break;case i.Alpha:case i.Rotation:e.tweener=t.GTween.to(o.f1,r.f1,e.tweenConfig.duration);break;case i.Color:e.tweener=t.GTween.toColor(o.f1,r.f1,e.tweenConfig.duration);break;case i.ColorFilter:e.tweener=t.GTween.to4(o.f1,o.f2,o.f3,o.f4,r.f1,r.f2,r.f3,r.f4,e.tweenConfig.duration)}e.tweener.setDelay(n).setEase(e.tweenConfig.easeType).setRepeat(e.tweenConfig.repeat,e.tweenConfig.yoyo).setTimeScale(this._timeScale).setTarget(e).onStart(this.onTweenStart,this).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),this._endTime>=0&&e.tweener.setBreakpoint(this._endTime-n),this._totalTasks++}}else e.type==i.Shake?(n=this._reversed?this._totalDuration-e.time-e.value.duration:e.time,e.value.offsetX=e.value.offsetY=0,e.value.lastOffsetX=e.value.lastOffsetY=0,e.tweener=t.GTween.shake(0,0,e.value.amplitude,e.value.duration).setDelay(n).setTimeScale(this._timeScale).setTarget(e).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),this._endTime>=0&&e.tweener.setBreakpoint(this._endTime-e.time),this._totalTasks++):(n=this._reversed?this._totalDuration-e.time:e.time,n<=this._startTime?(this.applyValue(e),this.callHook(e,!1)):(-1==this._endTime||n<=this._endTime)&&(this._totalTasks++,e.tweener=t.GTween.delayedCall(n).setTimeScale(this._timeScale).setTarget(e).onComplete(this.onDelayedPlayItem,this)));null!=e.tweener&&e.tweener.seek(this._startTime)},e.prototype.skipAnimations=function(){for(var t,e,n,o,r,s,a=this._items.length,h=0;a>h;h++)if(s=this._items[h],!(s.type!=i.Animation||s.time>this._startTime||(o=s.value,o.flag))){r=s.target,t=r.frame,e=r.playing?0:-1,n=0;for(var l=h;a>l;l++)s=this._items[l],s.type!=i.Animation||s.target!=r||s.time>this._startTime||(o=s.value,o.flag=!0,-1!=o.frame?(t=o.frame,e=o.playing?s.time:-1,n=0):o.playing?0>e&&(e=s.time):(e>=0&&(n+=s.time-e),e=-1),this.callHook(s,!1));e>=0&&(n+=this._startTime-e),r.playing=e>=0,r.frame=t,n>0&&r.advance(1e3*n)}},e.prototype.onDelayedPlayItem=function(t){var e=t.target;e.tweener=null,this._totalTasks--,this.applyValue(e),this.callHook(e,!1),this.checkAllComplete()},e.prototype.onTweenStart=function(t){var e=t.target;if(e.type==i.XY||e.type==i.Size){var n,o;this._reversed?(n=e.tweenConfig.endValue,o=e.tweenConfig.startValue):(n=e.tweenConfig.startValue,o=e.tweenConfig.endValue),e.type==i.XY?e.target!=this._owner?(n.b1||(n.f1=e.target.x),n.b2||(n.f2=e.target.y)):(n.b1||(n.f1=e.target.x-this._ownerBaseX),n.b2||(n.f2=e.target.y-this._ownerBaseY)):(n.b1||(n.f1=e.target.width),n.b2||(n.f2=e.target.height)),o.b1||(o.f1=n.f1),o.b2||(o.f2=n.f2),t.startValue.x=n.f1,t.startValue.y=n.f2,t.endValue.x=o.f1,t.endValue.y=o.f2}this.callHook(e,!1)},e.prototype.onTweenUpdate=function(t){var e=t.target;switch(e.type){case i.XY:case i.Size:case i.Scale:case i.Skew:e.value.f1=t.value.x,e.value.f2=t.value.y;break;case i.Alpha:case i.Rotation:e.value.f1=t.value.x;break;case i.Color:e.value.f1=t.value.color;break;case i.ColorFilter:e.value.f1=t.value.x,e.value.f2=t.value.y,e.value.f3=t.value.z,e.value.f4=t.value.w;break;case i.Shake:e.value.offsetX=t.deltaValue.x,e.value.offsetY=t.deltaValue.y}this.applyValue(e)},e.prototype.onTweenComplete=function(t){var e=t.target;e.tweener=null,this._totalTasks--,t.allCompleted&&this.callHook(e,!0),this.checkAllComplete()},e.prototype.onPlayTransCompleted=function(t){this._totalTasks--,this.checkAllComplete()},e.prototype.callHook=function(t,e){e?null!=t.tweenConfig&&null!=t.tweenConfig.endHook&&t.tweenConfig.endHook.call(t.tweenConfig.endHookCaller):t.time>=this._startTime&&null!=t.hook&&t.hook.call(t.hookCaller)},e.prototype.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)this.internalPlay();else if(this._totalTimes--,this._totalTimes>0)this.internalPlay();else{this._playing=!1;for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];null!=i.target&&0!=i.displayLockToken&&(i.target.releaseDisplayLock(i.displayLockToken),i.displayLockToken=0)}if(null!=this._onComplete){var n=this._onComplete,o=this._onCompleteParam,r=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,n.call(r,o)}}},e.prototype.applyValue=function(e){switch(e.target._gearLocked=!0,e.type){case i.XY:if(e.target==this._owner){var n,o;n=e.value.b1?e.value.f1+this._ownerBaseX:e.target.x,o=e.value.b2?e.value.f2+this._ownerBaseY:e.target.y,e.target.setXY(n,o)}else e.value.b1||(e.value.f1=e.target.x),e.value.b2||(e.value.f2=e.target.y),e.target.setXY(e.value.f1,e.value.f2);break;case i.Size:e.value.b1||(e.value.f1=e.target.width),e.value.b2||(e.value.f2=e.target.height),e.target.setSize(e.value.f1,e.value.f2);break;case i.Pivot:e.target.setPivot(e.value.f1,e.value.f2,e.target.pivotAsAnchor);break;case i.Alpha:e.target.alpha=e.value.f1;break;case i.Rotation:e.target.rotation=e.value.f1;break;case i.Scale:e.target.setScale(e.value.f1,e.value.f2);break;case i.Skew:e.target.setSkew(e.value.f1,e.value.f2);break;case i.Color:e.target.color=e.value.f1;break;case i.Animation:e.value.frame>=0&&(e.target.frame=e.value.frame),e.target.playing=e.value.playing,e.target.timeScale=this._timeScale;break;case i.Visible:e.target.visible=e.value.visible;break;case i.Transition:if(this._playing){var r=e.value.trans;if(null!=r){this._totalTasks++;var s=this._startTime>e.time?this._startTime-e.time:0,a=this._endTime>=0?this._endTime-e.time:-1;e.value.stopTime>=0&&(0>a||a>e.value.stopTime)&&(a=e.value.stopTime),r.timeScale=this._timeScale,r._play(this.onPlayTransCompleted,this,e,e.value.playTimes,0,s,a,this._reversed)}}break;case i.Sound:if(this._playing&&e.time>=this._startTime){if(null==e.value.audioClip){var h=t.UIPackage.getItemByURL(e.value.sound);h&&(e.value.audioClip=h.owner.getItemAsset(h))}e.value.audioClip&&t.GRoot.inst.playOneShotSound(e.value.audioClip,e.value.volume)}break;case i.Shake:e.target.setXY(e.target.x-e.value.lastOffsetX+e.value.offsetX,e.target.y-e.value.lastOffsetY+e.value.offsetY),e.value.lastOffsetX=e.value.offsetX,e.value.lastOffsetY=e.value.offsetY;break;case i.ColorFilter:var l,u=e.target.filters;u&&u[0]instanceof egret.ColorMatrixFilter?l=u[0]:(l=new egret.ColorMatrixFilter,u=[l]);var c=new t.ColorMatrix;c.adjustBrightness(e.value.f1),c.adjustContrast(e.value.f2),c.adjustSaturation(e.value.f3),c.adjustHue(e.value.f4),l.matrix=c.matrix,e.target.filters=u;break;case i.Text:e.target.text=e.value.text;break;case i.Icon:e.target.icon=e.value.text}e.target._gearLocked=!1},e.prototype.setup=function(t){this.name=t.readS(),this._options=t.readInt(),this._autoPlay=t.readBool(),this._autoPlayTimes=t.readInt(),this._autoPlayDelay=t.readFloat();for(var e=t.readShort(),i=0;e>i;i++){var r=t.readShort(),s=t.position;t.seek(s,0);var a=new n(t.readByte());this._items[i]=a,a.time=t.readFloat();var h=t.readShort();0>h?a.targetId="":a.targetId=this._owner.getChildAt(h).id,a.label=t.readS(),t.readBool()?(t.seek(s,1),a.tweenConfig=new o,a.tweenConfig.duration=t.readFloat(),a.time+a.tweenConfig.duration>this._totalDuration&&(this._totalDuration=a.time+a.tweenConfig.duration),a.tweenConfig.easeType=t.readByte(),a.tweenConfig.repeat=t.readInt(),a.tweenConfig.yoyo=t.readBool(),a.tweenConfig.endLabel=t.readS(),t.seek(s,2),this.decodeValue(a,t,a.tweenConfig.startValue),t.seek(s,3),this.decodeValue(a,t,a.tweenConfig.endValue)):(a.time>this._totalDuration&&(this._totalDuration=a.time),t.seek(s,2),this.decodeValue(a,t,a.value)),t.position=s+r}},e.prototype.decodeValue=function(t,e,n){switch(t.type){case i.XY:case i.Size:case i.Pivot:case i.Skew:n.b1=e.readBool(),n.b2=e.readBool(),n.f1=e.readFloat(),n.f2=e.readFloat();break;case i.Alpha:case i.Rotation:n.f1=e.readFloat();break;case i.Scale:n.f1=e.readFloat(),n.f2=e.readFloat();break;case i.Color:n.f1=e.readColor();break;case i.Animation:n.playing=e.readBool(),n.frame=e.readInt();break;case i.Visible:n.visible=e.readBool();break;case i.Sound:n.sound=e.readS(),n.volume=e.readFloat();break;case i.Transition:n.transName=e.readS(),n.playTimes=e.readInt();break;case i.Shake:n.amplitude=e.readFloat(),n.duration=e.readFloat();break;case i.ColorFilter:n.f1=e.readFloat(),n.f2=e.readFloat(),n.f3=e.readFloat(),n.f4=e.readFloat();break;case i.Text:case i.Icon:n.text=e.readS()}},e.OPTION_IGNORE_DISPLAY_CONTROLLER=1,e.OPTION_AUTO_STOP_DISABLED=2,e.OPTION_AUTO_STOP_AT_END=4,e}();t.Transition=e,__reflect(e.prototype,"fairygui.Transition");var i=function(){function t(){}return t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Sound=9,t.Transition=10,t.Shake=11,t.ColorFilter=12,t.Skew=13,t.Text=14,t.Icon=15,t.Unknown=16,t}();__reflect(i.prototype,"TransitionActionType");var n=function(){function t(t){switch(this.type=t,t){case i.XY:case i.Size:case i.Scale:case i.Pivot:case i.Skew:case i.Alpha:case i.Rotation:case i.Color:case i.ColorFilter:this.value=new c;break;case i.Animation:this.value=new s;break;case i.Shake:this.value=new l;break;case i.Sound:this.value=new a;break;case i.Transition:this.value=new h;break;case i.Visible:this.value=new r;break;case i.Text:case i.Icon:this.value=new u}}return t}();__reflect(n.prototype,"TransitionItem");var o=function(){function e(){this.duration=0,this.repeat=0,this.yoyo=!1,this.easeType=t.EaseType.QuadOut,this.startValue=new c,this.endValue=new c}return e}();__reflect(o.prototype,"TweenConfig");var r=function(){function t(){}return t}();__reflect(r.prototype,"TValue_Visible");var s=function(){function t(){}return t}();__reflect(s.prototype,"TValue_Animation");var a=function(){function t(){}return t}();__reflect(a.prototype,"TValue_Sound");var h=function(){function t(){}return t}();__reflect(h.prototype,"TValue_Transition");var l=function(){function t(){}return t}();__reflect(l.prototype,"TValue_Shake");var u=function(){function t(){}return t}();__reflect(u.prototype,"TValue_Text");var c=function(){function t(){this.f1=this.f2=this.f3=this.f4=0,this.b1=this.b2=!0}return t}();__reflect(c.prototype,"TValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.addDelay=0}return t}();t.Frame=e,__reflect(e.prototype,"fairygui.Frame")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.fillImage=function(e,i,n,o,r,s,a){if(r.clear(),100>i){r.lineStyle(0),r.beginFill(0),i/=100;var h=0,l=0,u=Math.ceil(Math.sqrt(s*s+a*a)),c=s/2,_=a/2;switch(e){case t.FillMethod.Radial90:n==t.FillOrigin90.TopRight?(c=s,_=0,r.moveTo(c,_),o?(h=Math.PI/2,r.lineTo(c-u,_)):(h=Math.PI,r.lineTo(c,_+u))):n==t.FillOrigin90.TopLeft?(c=0,_=0,r.moveTo(c,_),o?(h=0,r.lineTo(c,_+u)):(h=Math.PI/2,r.lineTo(c+u,_))):n==t.FillOrigin90.BottomRight?(c=s,_=a,r.moveTo(c,_),o?(h=Math.PI,r.lineTo(c-u,_)):(h=3*Math.PI/2,r.lineTo(c,_-u))):(c=0,_=a,r.moveTo(c,_),o?(h=3*Math.PI/2,r.lineTo(c,_-u)):(h=0,r.lineTo(c+u,_))),l=o?h+i*Math.PI/2:h-i*Math.PI/2,r.drawArc(c,_,u,h,l,!o),r.lineTo(c,_);break;case t.FillMethod.Radial180:n==t.FillOrigin.Right?(c=s,r.moveTo(c,_),r.lineTo(c,_-u),h=o?Math.PI/2:3*Math.PI/2):n==t.FillOrigin.Bottom?(h=Math.PI,_=a,r.moveTo(c,_),r.lineTo(c-u,_),h=o?Math.PI:0):n==t.FillOrigin.Left?(c=0,r.moveTo(c,_),r.lineTo(c-u,_),h=o?3*Math.PI/2:Math.PI/2):(_=0,r.moveTo(c,_),r.lineTo(c+u,_),h=o?0:Math.PI),l=o?h+i*Math.PI:h-i*Math.PI,r.drawArc(c,_,u,h,l,!o),r.lineTo(c,_);
break;case t.FillMethod.Radial360:h=0,i>=1?r.drawCircle(c,_,u):(r.moveTo(c,_),n==t.FillOrigin.Right?(h=0,r.lineTo(c+u,_)):n==t.FillOrigin.Bottom?(h=Math.PI/2,r.lineTo(c,_+u)):n==t.FillOrigin.Left?(h=Math.PI,r.lineTo(c-u,_)):(h=3*Math.PI/2,r.lineTo(c,_-u)),l=o?h+i*Math.PI*2:h-i*Math.PI*2,r.drawArc(c,_,u,h,l,!o),r.lineTo(c,_))}r.endFill()}},e}();t.GraphicsHelper=e,__reflect(e.prototype,"fairygui.GraphicsHelper")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"invertedMatrix",{set:function(t){this._invertedMatrix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitArea",{get:function(){return this._hitArea},set:function(t){this._hitArea&&t?(this._hitArea.x=t.x,this._hitArea.y=t.y,this._hitArea.width=t.width,this._hitArea.height=t.height):this._hitArea=t?t.clone():null},enumerable:!0,configurable:!0}),e.prototype.$hitTest=function(e,i){var n=t.prototype.$hitTest.call(this,e,i);if(n==this){if(!this.touchEnabled||null==this._hitArea)return null}else if(null==n&&this.touchEnabled&&this.visible&&null!=this._hitArea){var o=this._invertedMatrix;null==o&&(o=this.$getInvertedConcatenatedMatrix());var r=o.a*e+o.c*i+o.tx,s=o.b*e+o.d*i+o.ty;this._hitArea.contains(r,s)&&(n=this)}return n},e}(egret.DisplayObjectContainer);t.UIContainer=e,__reflect(e.prototype,"fairygui.UIContainer")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._mode=t.ButtonMode.Common,i._title="",i._icon="",i._sound=t.UIConfig.buttonSound,i._soundVolumeScale=t.UIConfig.buttonSoundVolumeScale,i._pageOption=new t.PageOption,i._changeStateOnClick=!0,i._downEffect=0,i._downEffectValue=.8,i}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIcon",{get:function(){return this._selectedIcon},set:function(t){this._selectedIcon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedTitle",{get:function(){return this._selectedTitle},set:function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){var t=this.getTextField();return null!=t?t.color:0},set:function(t){var e=this.getTextField();null!=e&&(e.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundVolumeScale",{get:function(){return this._soundVolumeScale},set:function(t){this._soundVolumeScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._mode!=t.ButtonMode.Common&&this._selected!=e){if(this._selected=e,this.grayed&&this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this._selected?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this._selected?this.setState(this._over?i.SELECTED_OVER:i.DOWN):this.setState(this._over?i.OVER:i.UP),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var n=this._selected?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=n)}this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController.autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):this._mode==t.ButtonMode.Check&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode!=e&&(e==t.ButtonMode.Common&&(this.selected=!1),this._mode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relatedController",{get:function(){return this._relatedController},set:function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageOption",{get:function(){return this._pageOption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"changeStateOnClick",{get:function(){return this._changeStateOnClick},set:function(t){this._changeStateOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linkedPopup",{get:function(){return this._linkedPopup},set:function(t){this._linkedPopup=t},enumerable:!0,configurable:!0}),i.prototype.getTextField=function(){return this._titleObject instanceof t.GTextField?this._titleObject:this._titleObject instanceof t.GLabel?this._titleObject.getTextField():this._titleObject instanceof i?this._titleObject.getTextField():null},i.prototype.addStateListener=function(e,i){this.addEventListener(t.StateChangeEvent.CHANGED,e,i)},i.prototype.removeStateListener=function(e,i){this.removeEventListener(t.StateChangeEvent.CHANGED,e,i)},i.prototype.fireClick=function(e){void 0===e&&(e=!0),e&&this._mode==t.ButtonMode.Common&&(this.setState(i.OVER),t.GTimers.inst.add(100,1,function(){this.setState(i.DOWN)},this),t.GTimers.inst.add(200,1,function(){this.setState(i.UP)},this)),this.__click(null)},i.prototype.setState=function(e){if(this._buttonController&&(this._buttonController.selectedPage=e),1==this._downEffect){var n=this.numChildren;if(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED)for(var o=255*this._downEffectValue,r=(o<<16)+(o<<8)+o,s=0;n>s;s++){var a=this.getChildAt(s);void 0==a.color||a instanceof t.GTextField||(a.color=r)}else for(var s=0;n>s;s++){var a=this.getChildAt(s);void 0==a.color||a instanceof t.GTextField||(a.color=16777215)}}else 2==this._downEffect&&(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED?this._downScaled||(this._downScaled=!0,this._rootContainer.invertedMatrix=this._rootContainer.$getInvertedConcatenatedMatrix().clone(),this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue)):this._downScaled&&(this._downScaled=!1,this._rootContainer.invertedMatrix=null,this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue)))},i.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._relatedController==t&&(this.selected=this._pageOption.id==t.selectedPageId)},i.prototype.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this.grayed?this._selected&&this._buttonController.hasPage(i.SELECTED_DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this._selected?this.setState(i.DOWN):this.setState(i.UP):e.prototype.handleGrayedChanged.call(this)},i.prototype.constructExtension=function(e){e.seek(0,6),this._mode=e.readByte();var n=e.readS();n&&(this._sound=n),this._soundVolumeScale=e.readFloat(),this._downEffect=e.readByte(),this._downEffectValue=e.readFloat(),2==this._downEffect&&this.setPivot(.5,.5,this.pivotAsAnchor),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),null!=this._titleObject&&(this._title=this._titleObject.text),null!=this._iconObject&&(this._icon=this._iconObject.icon),this._mode==t.ButtonMode.Common&&this.setState(i.UP),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mousedown,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__click,this)},i.prototype.setup_afterAdd=function(t,i){if(e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType){var n,o;n=t.readS(),null!=n&&(this.title=n),n=t.readS(),null!=n&&(this.selectedTitle=n),n=t.readS(),null!=n&&(this.icon=n),n=t.readS(),null!=n&&(this.selectedIcon=n),t.readBool()&&(this.titleColor=t.readColor()),o=t.readInt(),0!=o&&(this.titleFontSize=o),o=t.readShort(),o>=0&&(this._relatedController=this.parent.getControllerAt(o)),this.pageOption.id=t.readS(),n=t.readS(),null!=n&&(this._sound=n),t.readBool()&&(this._soundVolumeScale=t.readFloat()),this.selected=t.readBool()}},i.prototype.__rollover=function(t){this._buttonController&&this._buttonController.hasPage(i.OVER)&&(this._over=!0,this._down||this.setState(this._selected?i.SELECTED_OVER:i.OVER))},i.prototype.__rollout=function(t){this._buttonController&&this._buttonController.hasPage(i.OVER)&&(this._over=!1,this._down||this.setState(this._selected?i.DOWN:i.UP))},i.prototype.__mousedown=function(e){this._down=!0,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._mode==t.ButtonMode.Common&&(this.grayed&&this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DOWN)),null!=this._linkedPopup&&(this._linkedPopup instanceof t.Window?this._linkedPopup.toggleStatus():this.root.togglePopup(this._linkedPopup,this))},i.prototype.__mouseup=function(e){if(this._down){if(t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._down=!1,null==this.displayObject)return;this._mode==t.ButtonMode.Common&&(this.grayed&&this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this.setState(i.DISABLED):this._over?this.setState(i.OVER):this.setState(i.UP))}},i.prototype.__click=function(e){if(this._sound){var i=t.UIPackage.getItemByURL(this._sound);if(i){var n=i.owner.getItemAsset(i);n&&t.GRoot.inst.playOneShotSound(n,this._soundVolumeScale)}}this._mode==t.ButtonMode.Check?this._changeStateOnClick&&(this.selected=!this._selected,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))):this._mode==t.ButtonMode.Radio?this._changeStateOnClick&&!this._selected&&(this.selected=!0,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))):this._relatedController&&(this._relatedController.selectedPageId=this._pageOption.id)},i.UP="up",i.DOWN="down",i.OVER="over",i.SELECTED_OVER="selectedOver",i.DISABLED="disabled",i.SELECTED_DISABLED="selectedDisabled",i}(t.GComponent);t.GButton=e,__reflect(e.prototype,"fairygui.GButton")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._visibleItemCount=0,i._selectedIndex=0,i._popupDirection=t.PopupDirection.Auto,i._visibleItemCount=t.UIConfig.defaultComboBoxVisibleItemCount,i._itemsUpdated=!0,i._selectedIndex=-1,i._items=[],i._values=[],i}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this._titleObject?this._titleObject.text:null},set:function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._iconObject?this._iconObject.icon:null},set:function(t){this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){var t=this.getTextField();return null!=t?t.color:0},set:function(t){var e=this.getTextField();null!=e&&(e.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleItemCount",{get:function(){return this._visibleItemCount},set:function(t){this._visibleItemCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupDirection",{get:function(){return this._popupDirection},set:function(t){this._popupDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(t){t?this._items=t.concat():this._items.length=0,this._items.length>0?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1),this._itemsUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icons",{get:function(){return this._icons},set:function(t){this._icons=t,null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){t?this._values=t.concat():this._values.length=0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.selectedIndex>=0&&this.selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)),this.updateSelectionController())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._values[this._selectedIndex]},set:function(t){this.selectedIndex=this._values.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionController",{get:function(){return this._selectionController},set:function(t){this._selectionController=t},enumerable:!0,configurable:!0}),i.prototype.getTextField=function(){return this._titleObject instanceof t.GTextField?this._titleObject:this._titleObject instanceof t.GLabel?this._titleObject.getTextField():this._titleObject instanceof t.GButton?this._titleObject.getTextField():null},i.prototype.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},i.prototype.constructExtension=function(e){var i;if(this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),i=e.readS()){if(this.dropdown=t.UIPackage.createObjectFromURL(i),!this.dropdown)return void console.error("下拉框必须为元件");if(this.dropdown.name="this.dropdown",this._list=this.dropdown.getChild("list").asList,null==this._list)return void console.error(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");this._list.addEventListener(t.ItemEvent.CLICK,this.__clickItem,this),this._list.addRelation(this.dropdown,t.RelationType.Width),this._list.removeRelation(this.dropdown,t.RelationType.Height),this.dropdown.addRelation(this._list,t.RelationType.Height),this.dropdown.removeRelation(this._list,t.RelationType.Width),this.dropdown.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__popupWinClosed,this)}this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mousedown,this)},i.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._selectionController==t&&(this.selectedIndex=t.selectedIndex)},i.prototype.updateSelectionController=function(){if(null!=this._selectionController&&!this._selectionController.changing&&this._selectedIndex<this._selectionController.pageCount){var t=this._selectionController;this._selectionController=null,t.selectedIndex=this._selectedIndex,this._selectionController=t}},i.prototype.dispose=function(){this.dropdown&&(this.dropdown.dispose(),this.dropdown=null),e.prototype.dispose.call(this)},i.prototype.setup_afterAdd=function(t,i){if(e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType){var n,o,r,s,a=t.readShort();for(n=0;a>n;n++)r=t.readShort(),r+=t.position,this._items[n]=t.readS(),this._values[n]=t.readS(),s=t.readS(),null!=s&&(null==this._icons&&(this._icons=new Array),this._icons[n]=s),t.position=r;s=t.readS(),null!=s?(this.text=s,this._selectedIndex=this._items.indexOf(s)):this._items.length>0?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1,s=t.readS(),null!=s&&(this.icon=s),t.readBool()&&(this.titleColor=t.readColor()),o=t.readInt(),o>0&&(this._visibleItemCount=o),this._popupDirection=t.readByte(),o=t.readShort(),o>=0&&(this._selectionController=this.parent.getControllerAt(o))}},i.prototype.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1,this._list.removeChildrenToPool();for(var e=this._items.length,i=0;e>i;i++){var n=this._list.addItemFromPool();n.name=i<this._values.length?this._values[i]:"",n.text=this._items[i],n.icon=null!=this._icons&&i<this._icons.length?this._icons[i]:null}this._list.resizeToFit(this._visibleItemCount)}this._list.selectedIndex=-1,this.dropdown.width=this.width;var o=null;this._popupDirection==t.PopupDirection.Down?o=!0:this._popupDirection==t.PopupDirection.Up&&(o=!1),this.root.togglePopup(this.dropdown,this,o),this.dropdown.parent&&this.setState(t.GButton.DOWN)},i.prototype.__popupWinClosed=function(e){this._over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)},i.prototype.__clickItem=function(e){t.GTimers.inst.add(100,1,this.__clickItem2,this,this._list.getChildIndex(e.itemObject))},i.prototype.__clickItem2=function(e){this.dropdown.parent instanceof t.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=e,this._selectedIndex>=0?this.text=this._items[this._selectedIndex]:this.text="",this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))},i.prototype.__rollover=function(e){this._over=!0,this._down||this.dropdown&&this.dropdown.parent||this.setState(t.GButton.OVER)},i.prototype.__rollout=function(e){this._over=!1,this._down||this.dropdown&&this.dropdown.parent||this.setState(t.GButton.UP)},i.prototype.__mousedown=function(e){e.target instanceof egret.TextField&&e.target.type==egret.TextFieldType.INPUT||(this._down=!0,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this.dropdown&&this.showDropdown())},i.prototype.__mouseup=function(e){this._down&&(this._down=!1,t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)))},i}(t.GComponent);t.GComboBox=e,__reflect(e.prototype,"fairygui.GComboBox")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._type=0,t._lineSize=0,t._lineColor=0,t._fillColor=0,t._lineSize=1,t._lineAlpha=1,t._fillAlpha=1,t._fillColor=16777215,t._cornerRadius=null,t}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this._graphics?this._graphics:(this.delayCreateDisplayObject(),this._graphics=this.displayObject.graphics,this._graphics)},enumerable:!0,configurable:!0}),i.prototype.drawRect=function(t,e,i,n,o,r){void 0===r&&(r=null),this._type=1,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=o,this._cornerRadius=r,this.drawCommon()},i.prototype.drawEllipse=function(t,e,i,n,o){this._type=2,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=o,this._cornerRadius=null,this.drawCommon()},i.prototype.clearGraphics=function(){this._graphics&&(this._type=0,this._graphics.clear())},Object.defineProperty(i.prototype,"color",{get:function(){return this._fillColor},set:function(t){this._fillColor=t,0!=this._type&&this.drawCommon()},enumerable:!0,configurable:!0}),i.prototype.drawCommon=function(){this.graphics,this._graphics.clear();var t=this.width,e=this.height;0!=t&&0!=e&&(0==this._lineSize?this._graphics.lineStyle(0,0,0):this._graphics.lineStyle(this._lineSize,this._lineColor,this._lineAlpha),this._graphics.beginFill(this._fillColor,this._fillAlpha),1==this._type?this._cornerRadius?1==this._cornerRadius.length?this._graphics.drawRoundRect(0,0,t,e,2*this._cornerRadius[0],2*this._cornerRadius[0]):this._graphics.drawRoundRect(0,0,t,e,2*this._cornerRadius[0],2*this._cornerRadius[1]):this._graphics.drawRect(0,0,t,e):this._graphics.drawEllipse(0,0,t,e),this._graphics.endFill())},i.prototype.replaceMe=function(t){if(!this._parent)throw"parent not set";t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0)},i.prototype.addBeforeMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e)},i.prototype.addAfterMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e)},i.prototype.setNativeObject=function(t){this.delayCreateDisplayObject(),this.displayObject.addChild(t)},i.prototype.delayCreateDisplayObject=function(){if(this.displayObject)this.displayObject.graphics.clear(),this.displayObject.removeChildren(),this._graphics=null;else{var e=new t.UISprite;e.$owner=this,this.setDisplayObject(e),this._parent&&this._parent.childStateChanged(this),this.handleXYChanged(),e.alpha=this.alpha,e.rotation=this.rotation,e.visible=this.visible,e.touchEnabled=this.touchable,e.touchChildren=this.touchable,e.hitArea=new egret.Rectangle(0,0,this.width,this.height)}},i.prototype.handleSizeChanged=function(){this._graphics&&0!=this._type&&this.drawCommon(),this.displayObject instanceof t.UISprite&&(null==this.displayObject.hitArea?this.displayObject.hitArea=new egret.Rectangle(0,0,this.width,this.height):(this.displayObject.hitArea.width=this.width,this.displayObject.hitArea.height=this.height))},i.prototype.setup_beforeAdd=function(i,n){i.seek(n,5);var o=i.readByte();if(0!=o){this._lineSize=i.readInt();var r=i.readColor(!0);if(this._lineColor=16777215&r,this._lineAlpha=(r>>24&255)/255,r=i.readColor(!0),this._fillColor=16777215&r,this._fillAlpha=(r>>24&255)/255,i.readBool()){this._cornerRadius=new Array(4);for(var s=0;4>s;s++)this._cornerRadius[s]=i.readFloat()}var a=new t.UISprite;a.$owner=this,this.setDisplayObject(a)}e.prototype.setup_beforeAdd.call(this,i,n),null!=this.displayObject&&(this._graphics=this.displayObject.graphics,this._type=o,this.drawCommon())},i}(t.GObject);t.GGraph=e,__reflect(e.prototype,"fairygui.GGraph")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._layout=0,t._lineGap=0,t._columnGap=0,t._percentReady=!1,t._boundsChanged=!1,t._updating=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineGap",{get:function(){return this._lineGap},set:function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnGap",{get:function(){return this._columnGap},set:function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),i.prototype.setBoundsChangedFlag=function(e){void 0===e&&(e=!1),0==this._updating&&null!=this._parent&&(e&&(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,this._layout!=t.GroupLayoutType.None&&t.GTimers.inst.callLater(this.ensureBoundsCorrect,this)))},i.prototype.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()},i.prototype.updateBounds=function(){if(t.GTimers.inst.remove(this.ensureBoundsCorrect,this),this._boundsChanged=!1,null!=this._parent){this.handleLayout();var e,i,n,o=this._parent.numChildren,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=!0;for(e=0;o>e;e++)i=this._parent.getChildAt(e),i.group==this&&(n=i.x,r>n&&(r=n),n=i.y,s>n&&(s=n),n=i.x+i.width,n>a&&(a=n),n=i.y+i.height,n>h&&(h=n),l=!1);l?(this._updating=2,this.setSize(0,0)):(this._updating=1,this.setXY(r,s),this._updating=2,this.setSize(a-r,h-s)),this._updating=0}},i.prototype.handleLayout=function(){this._updating|=1;var e,i,n;if(this._layout==t.GroupLayoutType.Horizontal){var o=0/0;for(n=this._parent.numChildren,i=0;n>i;i++)e=this._parent.getChildAt(i),e.group==this&&(isNaN(o)?o=Math.floor(e.x):e.x=o,0!=e.width&&(o+=Math.floor(e.width+this._columnGap)));this._percentReady||this.updatePercent()}else if(this._layout==t.GroupLayoutType.Vertical){var r=0/0;for(n=this._parent.numChildren,i=0;n>i;i++)e=this._parent.getChildAt(i),e.group==this&&(isNaN(r)?r=Math.floor(e.y):e.y=r,0!=e.height&&(r+=Math.floor(e.height+this._lineGap)));this._percentReady||this.updatePercent()}this._updating&=2},i.prototype.updatePercent=function(){this._percentReady=!0;var e,i,n=this._parent.numChildren,o=0;if(this._layout==t.GroupLayoutType.Horizontal){for(e=0;n>e;e++)i=this._parent.getChildAt(e),i.group==this&&(o+=i.width);for(e=0;n>e;e++)i=this._parent.getChildAt(e),i.group==this&&(o>0?i._sizePercentInGroup=i.width/o:i._sizePercentInGroup=0)}else{for(e=0;n>e;e++)i=this._parent.getChildAt(e),i.group==this&&(o+=i.height);for(e=0;n>e;e++)i=this._parent.getChildAt(e),i.group==this&&(o>0?i._sizePercentInGroup=i.height/o:i._sizePercentInGroup=0)}},i.prototype.moveChildren=function(t,e){if(0==(1&this._updating)&&null!=this._parent){this._updating|=1;var i,n,o=this._parent.numChildren;for(i=0;o>i;i++)n=this._parent.getChildAt(i),n.group==this&&n.setXY(n.x+t,n.y+e);this._updating&=2}},i.prototype.resizeChildren=function(e,i){if(this._layout!=t.GroupLayoutType.None&&0==(2&this._updating)&&null!=this._parent){this._updating|=2,this._percentReady||this.updatePercent();var n,o,r,s=this._parent.numChildren,a=-1,h=0,l=0,u=0,c=!1;for(n=0;s>n;n++)r=this._parent.getChildAt(n),r.group==this&&(a=n,h++);if(this._layout==t.GroupLayoutType.Horizontal){u=l=this.width-(h-1)*this._columnGap;var _,p=0/0;for(n=0;s>n;n++)if(r=this._parent.getChildAt(n),r.group==this)if(isNaN(p)?p=Math.floor(r.x):r.x=p,_=a==n?u:Math.round(r._sizePercentInGroup*l),r.setSize(_,r._rawHeight+i,!0),u-=r.width,a==n){if(u>=1)for(o=0;n>=o;o++)r=this._parent.getChildAt(o),r.group==this&&(c?r.x+=u:(_=r.width+u,(0==r.maxWidth||_<r.maxWidth)&&(0==r.minWidth||_>r.minWidth)&&(r.setSize(_,r.height,!0),c=!0)))}else p+=r.width+this._columnGap}else if(this._layout==t.GroupLayoutType.Vertical){u=l=this.height-(h-1)*this._lineGap;var d,f=0/0;for(n=0;s>n;n++)if(r=this._parent.getChildAt(n),r.group==this)if(isNaN(f)?f=Math.floor(r.y):r.y=f,d=a==n?u:Math.round(r._sizePercentInGroup*l),r.setSize(r._rawWidth+e,d,!0),u-=r.height,a==n){if(u>=1)for(o=0;n>=o;o++)r=this._parent.getChildAt(o),r.group==this&&(c?r.y+=u:(d=r.height+u,(0==r.maxHeight||d<r.maxHeight)&&(0==r.minHeight||d>r.minHeight)&&(r.setSize(r.width,d,!0),c=!0)))}else f+=r.height+this._lineGap}this._updating&=1}},i.prototype.handleAlphaChanged=function(){if(!this._underConstruct)for(var t=this._parent.numChildren,e=0;t>e;e++){var i=this._parent.getChildAt(e);i.group==this&&(i.alpha=this.alpha)}},i.prototype.handleVisibleChanged=function(){if(this._parent)for(var t=this._parent.numChildren,e=0;t>e;e++){var i=this._parent.getChildAt(e);i.group==this&&i.handleVisibleChanged()}},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,5),this._layout=t.readByte(),this._lineGap=t.readInt(),this._columnGap=t.readInt()},i.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),this.visible||this.handleVisibleChanged()},i}(t.GObject);t.GGroup=e,__reflect(e.prototype,"fairygui.GGroup")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._fillMethod=t.FillMethod.None,i._fillOrigin=t.FillOrigin.Left,i._fillAmount=100,i._fillClockwise=!1,i.fillStart=0,i._color=16777215,i._flip=t.FlipType.None,i}return __extends(i,e),i.prototype.getColorMatrix=function(){if(this._matrix)return this._matrix;var t=this.filters;if(t)for(var e=0;e<t.length;e++)if(egret.is(t[e],"egret.ColorMatrixFilter"))return this._matrix=t[e],this._matrix;var i=new egret.ColorMatrixFilter;return this._matrix=i,t=t||[],t.push(i),this.filters=t,i},Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),i.prototype.applyColor=function(){var t=this.getColorMatrix(),e=t.matrix;e[0]=(this._color>>16&255)/255,e[6]=(this._color>>8&255)/255,e[12]=(255&this._color)/255,t.matrix=e},Object.defineProperty(i.prototype,"flip",{get:function(){return this._flip},set:function(e){this._flip!=e&&(this._flip=e,this._content.scaleX=this._content.scaleY=1,(this._flip==t.FlipType.Horizontal||this._flip==t.FlipType.Both)&&(this._content.scaleX=-1),(this._flip==t.FlipType.Vertical||this._flip==t.FlipType.Both)&&(this._content.scaleY=-1),this.handleXYChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMethod",{get:function(){return this._fillMethod},set:function(t){if(this._fillMethod!=t)if(this._fillMethod=t,0!=this._fillMethod)this.setupFill();else{var e=this._content.mask;this._content.mask=null,e instanceof egret.Shape&&e.parent&&e.parent.removeChild(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillOrigin",{get:function(){return this._fillOrigin},set:function(t){this._fillOrigin!=t&&(this._fillOrigin=t,0!=this._fillMethod&&this.setupFill())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillClockwise",{get:function(){return this._fillClockwise},set:function(t){this._fillClockwise!=t&&(this._fillClockwise=t,0!=this._fillMethod&&this.setupFill())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillAmount",{get:function(){return this._fillAmount},set:function(e){this._fillAmount!=e&&(this._fillAmount=t.ToolSet.clamp(e,0,100),0!=this._fillMethod&&this.setupFill())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._content.texture},set:function(t){null!=t?(this.sourceWidth=t.textureWidth,this.sourceHeight=t.textureHeight):(this.sourceWidth=0,this.sourceHeight=0),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this._content.scale9Grid=null,this._content.fillMode=egret.BitmapFillMode.SCALE,this._content.texture=t},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this._content=new egret.Bitmap,this._content.$owner=this,this._content.touchEnabled=!1,this.setDisplayObject(this._content)},i.prototype.setupFill=function(){var e=this._content.mask,i=this._content.width,n=this._content.height;this._fillMethod==t.FillMethod.Horizontal||this._fillMethod==t.FillMethod.Vertical?((!e||e instanceof egret.DisplayObject)&&(e=new egret.Rectangle(0,0,i,n)),this._fillMethod==t.FillMethod.Horizontal?(e.y=0,this._fillOrigin==t.FillOrigin.Top?e.x=i*(this._fillAmount/100-1):e.x=i*(1-this._fillAmount/100)):(e.x=0,this._fillOrigin==t.FillOrigin.Top?e.y=n*(this._fillAmount/100-1):e.y=n*(1-this._fillAmount/100))):this._fillMethod!=t.FillMethod.None&&this._content.parent&&((!e||e instanceof egret.Rectangle)&&(e=new egret.Shape,this._content.parent.addChild(e),e.x=this.x,e.y=this.y),i=this.scaleX*i,n=this.scaleY*n,t.GraphicsHelper.fillImage(this._fillMethod,this._fillAmount,this._fillOrigin,this._fillClockwise,e.graphics,i,n)),this._content.mask=e
},i.prototype.removeFromParent=function(){if(this._fillMethod!=t.FillMethod.None){var i=this._content.mask;i instanceof egret.Shape&&i.parent&&i.parent.removeChild(i)}e.prototype.removeFromParent.call(this)},i.prototype.dispose=function(){e.prototype.dispose.call(this)},i.prototype.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this._content.scale9Grid=this.packageItem.scale9Grid,this._content.smoothing=this.packageItem.smoothing,this.packageItem.scaleByTile&&(this._content.fillMode=egret.BitmapFillMode.REPEAT),this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this._content.texture=this.packageItem.texture},i.prototype.handleXYChanged=function(){if(e.prototype.handleXYChanged.call(this),this._fillMethod!=t.FillMethod.None){var i=this._content.mask;i instanceof egret.Shape&&(i.x=this._content.x,i.y=this._content.y)}this._flip!=t.FlipType.None&&(-1==this._content.scaleX&&(this._content.x+=this.width),-1==this._content.scaleY&&(this._content.y+=this.height))},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,5),t.readBool()&&(this.color=t.readColor()),this.flip=t.readByte(),this._fillMethod=t.readByte(),0!=this._fillMethod&&(this._fillOrigin=t.readByte(),this._fillClockwise=t.readBool(),this.fillAmount=t.readFloat())},i}(t.GObject);t.GImage=e,__reflect(e.prototype,"fairygui.GImage")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return null!=this._iconObject?this._iconObject.icon:void 0},set:function(t){null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._titleObject?this._titleObject.text:null},set:function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){var t=this.getTextField();return null!=t?t.color:0},set:function(t){var e=this.getTextField();null!=e&&(e.color=t),this.updateGear(4)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.titleColor},set:function(t){this.titleColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._titleObject&&this._titleObject instanceof t.GTextInput?this._titleObject.asTextInput.editable:!1},set:function(t){this._titleObject&&(this._titleObject.asTextInput.editable=t)},enumerable:!0,configurable:!0}),i.prototype.getTextField=function(){return this._titleObject instanceof t.GTextField?this._titleObject:this._titleObject instanceof i?this._titleObject.getTextField():this._titleObject instanceof t.GButton?this._titleObject.getTextField():null},i.prototype.constructExtension=function(t){this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon")},i.prototype.setup_afterAdd=function(t,i){if(e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType){var n;n=t.readS(),null!=n&&(this.title=n),n=t.readS(),null!=n&&(this.icon=n),t.readBool()&&(this.titleColor=t.readColor());var o=t.readInt();if(0!=o&&(this.titleFontSize=o),t.readBool()){var r=this.getTextField();null!=r?(n=t.readS(),null!=n&&(r.promptText=n),n=t.readS(),null!=n&&(r.restrict=n),o=t.readInt(),0!=o&&(r.maxLength=o),o=t.readInt(),t.readBool()&&(r.password=!0)):t.skip(13)}}},i}(t.GComponent);t.GLabel=e,__reflect(e.prototype,"fairygui.GLabel")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(){var i=e.call(this)||this;return i.scrollItemToViewOnClick=!0,i.foldInvisibleItems=!1,i._lineCount=0,i._columnCount=0,i._lineGap=0,i._columnGap=0,i._lastSelectedIndex=0,i._numItems=0,i._realNumItems=0,i._firstIndex=0,i._curLineItemCount=0,i._curLineItemCount2=0,i._virtualListChanged=0,i.itemInfoVer=0,i._trackBounds=!0,i._pool=new t.GObjectPool,i._layout=t.ListLayoutType.SingleColumn,i._autoResizeItem=!0,i._lastSelectedIndex=-1,i._selectionMode=t.ListSelectionMode.Single,i.opaque=!0,i._align=t.AlignType.Left,i._verticalAlign=t.VertAlignType.Top,i._container=new egret.DisplayObjectContainer,i._rootContainer.addChild(i._container),i}return __extends(n,e),n.prototype.dispose=function(){this._pool.clear(),e.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineCount",{get:function(){return this._lineCount},set:function(t){this._lineCount!=t&&(this._lineCount=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},set:function(t){this._columnCount!=t&&(this._columnCount=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineGap",{get:function(){return this._lineGap},set:function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnGap",{get:function(){return this._columnGap},set:function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"virtualItemSize",{get:function(){return this._itemSize},set:function(t){this._virtual&&(null==this._itemSize&&(this._itemSize=new egret.Point),this._itemSize.copyFrom(t),this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultItem",{get:function(){return this._defaultItem},set:function(t){this._defaultItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoResizeItem",{get:function(){return this._autoResizeItem},set:function(t){this._autoResizeItem!=t&&(this._autoResizeItem=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){this._selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionController",{get:function(){return this._selectionController},set:function(t){this._selectionController=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemPool",{get:function(){return this._pool},enumerable:!0,configurable:!0}),n.prototype.getFromPool=function(t){void 0===t&&(t=null),t||(t=this._defaultItem);var e=this._pool.getObject(t);return null!=e&&(e.visible=!0),e},n.prototype.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this._pool.returnObject(t)},n.prototype.addChildAt=function(i,n){if(void 0===n&&(n=0),e.prototype.addChildAt.call(this,i,n),i instanceof t.GButton){var o=i;o.selected=!1,o.changeStateOnClick=!1}return i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickItem,this),i},n.prototype.addItem=function(e){return void 0===e&&(e=null),e||(e=this._defaultItem),this.addChild(t.UIPackage.createObjectFromURL(e))},n.prototype.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},n.prototype.removeChildAt=function(t,i){void 0===i&&(i=!1);var n=e.prototype.removeChildAt.call(this,t,i);return n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickItem,this),n},n.prototype.removeChildToPoolAt=function(t){void 0===t&&(t=0);var i=e.prototype.removeChildAt.call(this,t);this.returnToPool(i)},n.prototype.removeChildToPool=function(t){e.prototype.removeChild.call(this,t),this.returnToPool(t)},n.prototype.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(0>e||e>=this._children.length)&&(e=this._children.length-1);for(var i=t;e>=i;++i)this.removeChildToPoolAt(t)},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){var e;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];if(i.obj instanceof t.GButton&&i.obj.selected||null==i.obj&&i.selected)return this._loop?e%this._numItems:e}else{var n=this._children.length;for(e=0;n>e;e++){var o=this._children[e].asButton;if(null!=o&&o.selected)return e}}return-1},set:function(e){e>=0&&e<this.numItems?(this._selectionMode!=t.ListSelectionMode.Single&&this.clearSelection(),this.addSelection(e)):this.clearSelection()},enumerable:!0,configurable:!0}),n.prototype.getSelection=function(){var e,i=new Array;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];if(n.obj instanceof t.GButton&&n.obj.selected||null==n.obj&&n.selected){var o=e;if(this._loop&&(o=e%this._numItems,-1!=i.indexOf(o)))continue;i.push(o)}}else{var r=this._children.length;for(e=0;r>e;e++){var s=this._children[e].asButton;null!=s&&s.selected&&i.push(e)}}return i},n.prototype.addSelection=function(e,i){if(void 0===i&&(i=!1),this._selectionMode!=t.ListSelectionMode.None){this.checkVirtualList(),this._selectionMode==t.ListSelectionMode.Single&&this.clearSelection(),i&&this.scrollToView(e),this._lastSelectedIndex=e;var n=null;if(this._virtual){var o=this._virtualItems[e];null!=o.obj&&(n=o.obj.asButton),o.selected=!0}else n=this.getChildAt(e).asButton;null==n||n.selected||(n.selected=!0,this.updateSelectionController(e))}},n.prototype.removeSelection=function(e){if(this._selectionMode!=t.ListSelectionMode.None){var i=null;if(this._virtual){var n=this._virtualItems[e];null!=n.obj&&(i=n.obj.asButton),n.selected=!1}else i=this.getChildAt(e).asButton;null!=i&&(i.selected=!1)}},n.prototype.clearSelection=function(){var e;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];i.obj instanceof t.GButton&&(i.obj.selected=!1),i.selected=!1}else{var n=this._children.length;for(e=0;n>e;e++){var o=this._children[e].asButton;null!=o&&(o.selected=!1)}}},n.prototype.clearSelectionExcept=function(e){var i;if(this._virtual)for(i=0;i<this._realNumItems;i++){var n=this._virtualItems[i];n.obj!=e&&(n.obj instanceof t.GButton&&(n.obj.selected=!1),n.selected=!1)}else{var o=this._children.length;for(i=0;o>i;i++){var r=this._children[i].asButton;null!=r&&r!=e&&(r.selected=!1)}}},n.prototype.selectAll=function(){this.checkVirtualList();var e,i=-1;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj instanceof t.GButton&&!n.obj.selected&&(n.obj.selected=!0,i=e),n.selected=!0}else{var o=this._children.length;for(e=0;o>e;e++){var r=this._children[e].asButton;null==r||r.selected||(r.selected=!0,i=e)}}-1!=i&&this.updateSelectionController(i)},n.prototype.selectNone=function(){this.clearSelection()},n.prototype.selectReverse=function(){this.checkVirtualList();var e,i=-1;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj instanceof t.GButton&&(n.obj.selected=!n.obj.selected,n.obj.selected&&(i=e)),n.selected=!n.selected}else{var o=this._children.length;for(e=0;o>e;e++){var r=this._children[e].asButton;null!=r&&(r.selected=!r.selected,r.selected&&(i=e))}}-1!=i&&this.updateSelectionController(i)},n.prototype.handleArrowKey=function(e){void 0===e&&(e=0);var i=this.selectedIndex;if(-1!=i)switch(e){case 1:if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowVertical)i--,i>=0&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination){for(var n=this._children[i],o=0,r=i-1;r>=0;r--){var s=this._children[r];if(s.y!=n.y){n=s;break}o++}for(;r>=0;r--)if(s=this._children[r],s.y!=n.y){this.clearSelection(),this.addSelection(r+o+1,!0);break}}break;case 3:if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination)i++,i<this._children.length&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowVertical){n=this._children[i],o=0;var a=this._children.length;for(r=i+1;a>r;r++){if(s=this._children[r],s.x!=n.x){n=s;break}o++}for(;a>r;r++)if(s=this._children[r],s.x!=n.x){this.clearSelection(),this.addSelection(r-o-1,!0);break}}break;case 5:if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowVertical)i++,i<this._children.length&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination){for(n=this._children[i],o=0,a=this._children.length,r=i+1;a>r;r++){if(s=this._children[r],s.y!=n.y){n=s;break}o++}for(;a>r;r++)if(s=this._children[r],s.y!=n.y){this.clearSelection(),this.addSelection(r-o-1,!0);break}}break;case 7:if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination)i--,i>=0&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowVertical){for(n=this._children[i],o=0,r=i-1;r>=0;r--){if(s=this._children[r],s.x!=n.x){n=s;break}o++}for(;r>=0;r--)if(s=this._children[r],s.x!=n.x){this.clearSelection(),this.addSelection(r+o+1,!0);break}}}},n.prototype.__clickItem=function(e){if(null==this._scrollPane||!this._scrollPane.isDragged){var i=e.currentTarget;this.setSelectionOnEvent(i),this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(i,!0);var n=new t.ItemEvent(t.ItemEvent.CLICK,i);n.stageX=e.stageX,n.stageY=e.stageY,this.dispatchEvent(n)}},n.prototype.setSelectionOnEvent=function(e){if(e instanceof t.GButton&&this._selectionMode!=t.ListSelectionMode.None){var i=!1,n=e,o=this.childIndexToItemIndex(this.getChildIndex(e));if(this._selectionMode==t.ListSelectionMode.Single)n.selected||(this.clearSelectionExcept(n),n.selected=!0);else if(t.GRoot.shiftKeyDown){if(!n.selected)if(-1!=this._lastSelectedIndex){var r=Math.min(this._lastSelectedIndex,o),s=Math.max(this._lastSelectedIndex,o);s=Math.min(s,this.numItems-1);var a;if(this._virtual)for(a=r;s>=a;a++){var h=this._virtualItems[a];h.obj instanceof t.GButton&&(h.obj.selected=!0),h.selected=!0}else for(a=r;s>=a;a++){var l=this.getChildAt(a).asButton;null!=l&&(l.selected=!0)}i=!0}else n.selected=!0}else t.GRoot.ctrlKeyDown||this._selectionMode==t.ListSelectionMode.Multiple_SingleClick?n.selected=!n.selected:n.selected?this.clearSelectionExcept(n):(this.clearSelectionExcept(n),n.selected=!0);i||(this._lastSelectedIndex=o),n.selected&&this.updateSelectionController(o)}},n.prototype.resizeToFit=function(e,i){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=0),this.ensureBoundsCorrect();var n=this.numItems;if(e>n&&(e=n),this._virtual){var o=Math.ceil(e/this._curLineItemCount);this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?this.viewHeight=o*this._itemSize.y+Math.max(0,o-1)*this._lineGap:this.viewWidth=o*this._itemSize.x+Math.max(0,o-1)*this._columnGap}else if(0==e)this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?this.viewHeight=i:this.viewWidth=i;else{for(var r=e-1,s=null;r>=0&&(s=this.getChildAt(r),this.foldInvisibleItems&&!s.visible);)r--;if(0>r)this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?this.viewHeight=i:this.viewWidth=i;else{var a=0;this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?(a=s.y+s.height,i>a&&(a=i),this.viewHeight=a):(a=s.x+s.width,i>a&&(a=i),this.viewWidth=a)}}},n.prototype.getMaxItemWidth=function(){for(var t=this._children.length,e=0,i=0;t>i;i++){var n=this.getChildAt(i);n.width>e&&(e=n.width)}return e},n.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)},n.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._selectionController==t&&(this.selectedIndex=t.selectedIndex)},n.prototype.updateSelectionController=function(t){if(null!=this._selectionController&&!this._selectionController.changing&&t<this._selectionController.pageCount){var e=this._selectionController;this._selectionController=null,e.selectedIndex=t,this._selectionController=e}},n.prototype.getSnappingPosition=function(i,o,r){if(this._virtual){r||(r=new egret.Point);var s,a;return this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?(s=o,n.pos_param=o,a=this.getIndexOnPos1(!1),o=n.pos_param,a<this._virtualItems.length&&s-o>this._virtualItems[a].height/2&&a<this._realNumItems&&(o+=this._virtualItems[a].height+this._lineGap)):this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical?(s=i,n.pos_param=i,a=this.getIndexOnPos2(!1),i=n.pos_param,a<this._virtualItems.length&&s-i>this._virtualItems[a].width/2&&a<this._realNumItems&&(i+=this._virtualItems[a].width+this._columnGap)):(s=i,n.pos_param=i,a=this.getIndexOnPos3(!1),i=n.pos_param,a<this._virtualItems.length&&s-i>this._virtualItems[a].width/2&&a<this._realNumItems&&(i+=this._virtualItems[a].width+this._columnGap)),r.x=i,r.y=o,r}return e.prototype.getSnappingPosition.call(this,i,o,r)},n.prototype.scrollToView=function(e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),this._virtual){if(0==this._numItems)return;if(this.checkVirtualList(),e>=this._virtualItems.length)throw"Invalid child index: "+e+">"+this._virtualItems.length;this._loop&&(e=Math.floor(this._firstIndex/this._numItems)*this._numItems+e);var o,r,s=this._virtualItems[e],a=0;if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal){for(r=this._curLineItemCount-1;e>r;r+=this._curLineItemCount)a+=this._virtualItems[r].height+this._lineGap;o=new egret.Rectangle(0,a,this._itemSize.x,s.height)}else if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical){for(r=this._curLineItemCount-1;e>r;r+=this._curLineItemCount)a+=this._virtualItems[r].width+this._columnGap;o=new egret.Rectangle(a,0,s.width,this._itemSize.y)}else{var h=e/(this._curLineItemCount*this._curLineItemCount2);o=new egret.Rectangle(h*this.viewWidth+e%this._curLineItemCount*(s.width+this._columnGap),e/this._curLineItemCount%this._curLineItemCount2*(s.height+this._lineGap),s.width,s.height)}n=!0,null!=this._scrollPane&&this._scrollPane.scrollToView(o,i,n)}else{var l=this.getChildAt(e);null!=l&&(null!=this._scrollPane?this._scrollPane.scrollToView(l,i,n):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(l,i,n))}},n.prototype.getFirstChildInView=function(){return this.childIndexToItemIndex(e.prototype.getFirstChildInView.call(this))},n.prototype.childIndexToItemIndex=function(e){if(!this._virtual)return e;if(this._layout==t.ListLayoutType.Pagination){for(var i=this._firstIndex;i<this._realNumItems;i++)if(null!=this._virtualItems[i].obj&&(e--,0>e))return i;return e}return e+=this._firstIndex,this._loop&&this._numItems>0&&(e%=this._numItems),e},n.prototype.itemIndexToChildIndex=function(e){if(!this._virtual)return e;if(this._layout==t.ListLayoutType.Pagination)return this.getChildIndex(this._virtualItems[e].obj);if(this._loop&&this._numItems>0){var i=this._firstIndex%this._numItems;e>=i?e-=i:e=this._numItems-i+e}else e-=this._firstIndex;return e},n.prototype.setVirtual=function(){this._setVirtual(!1)},n.prototype.setVirtualAndLoop=function(){this._setVirtual(!0)},n.prototype._setVirtual=function(e){if(!this._virtual){if(null==this._scrollPane)throw"Virtual list must be scrollable!";if(e){if(this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.FlowVertical)throw"Loop list is not supported for FlowHorizontal or FlowVertical layout!";this._scrollPane.bouncebackEffect=!1}if(this._virtual=!0,this._loop=e,this._virtualItems=new Array,this.removeChildrenToPool(),null==this._itemSize){this._itemSize=new egret.Point;var i=this.getFromPool(null);if(null==i)throw"Virtual List must have a default list item resource.";this._itemSize.x=i.width,this._itemSize.y=i.height,this.returnToPool(i)}this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?(this._scrollPane.scrollStep=this._itemSize.y,this._loop&&(this._scrollPane._loop=2)):(this._scrollPane.scrollStep=this._itemSize.x,this._loop&&(this._scrollPane._loop=1)),this._scrollPane.addEventListener(t.ScrollPane.SCROLL,this.__scrolled,this),this.setVirtualListChangedFlag(!0)}},Object.defineProperty(n.prototype,"numItems",{get:function(){return this._virtual?this._numItems:this._children.length},set:function(e){if(this._virtual){if(null==this.itemRenderer)throw"Set itemRenderer first!";this._numItems=e,this._loop?this._realNumItems=6*this._numItems:this._realNumItems=this._numItems;var n=this._virtualItems.length;if(this._realNumItems>n)for(s=n;s<this._realNumItems;s++){var o=new i;o.width=this._itemSize.x,o.height=this._itemSize.y,this._virtualItems.push(o)}else for(s=this._realNumItems;n>s;s++)this._virtualItems[s].selected=!1;0!=this._virtualListChanged&&t.GTimers.inst.remove(this._refreshVirtualList,this),this._refreshVirtualList()}else{var r=this._children.length;if(e>r)for(var s=r;e>s;s++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.call(this.callbackThisObj,s));else this.removeChildrenToPool(e,r);if(null!=this.itemRenderer)for(s=0;e>s;s++)this.itemRenderer.call(this.callbackThisObj,s,this.getChildAt(s))}},enumerable:!0,configurable:!0}),n.prototype.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},n.prototype.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),t.GTimers.inst.remove(this._refreshVirtualList,this))},n.prototype.setVirtualListChangedFlag=function(e){void 0===e&&(e=!1),e?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1),t.GTimers.inst.callLater(this._refreshVirtualList,this)},n.prototype._refreshVirtualList=function(){var e=2==this._virtualListChanged;this._virtualListChanged=0,this._eventLocked=!0,e&&(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.SingleRow?this._curLineItemCount=1:this._layout==t.ListLayoutType.FlowHorizontal?this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):this._layout==t.ListLayoutType.FlowVertical?this._lineCount>0?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):(this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)),this._lineCount>0?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount2<=0&&(this._curLineItemCount2=1))));var i=0,n=0;if(this._realNumItems>0){var o,r=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,s=Math.min(this._curLineItemCount,this._realNumItems);if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal){for(o=0;r>o;o+=this._curLineItemCount)i+=this._virtualItems[o].height+this._lineGap;if(i>0&&(i-=this._lineGap),this._autoResizeItem)n=this._scrollPane.viewWidth;else{for(o=0;s>o;o++)n+=this._virtualItems[o].width+this._columnGap;n>0&&(n-=this._columnGap)}}else if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical){for(o=0;r>o;o+=this._curLineItemCount)n+=this._virtualItems[o].width+this._columnGap;if(n>0&&(n-=this._columnGap),this._autoResizeItem)i=this._scrollPane.viewHeight;else{for(o=0;s>o;o++)i+=this._virtualItems[o].height+this._lineGap;i>0&&(i-=this._lineGap)}}else{var a=Math.ceil(r/(this._curLineItemCount*this._curLineItemCount2));n=a*this.viewWidth,i=this.viewHeight}}this.handleAlign(n,i),this._scrollPane.setContentSize(n,i),this._eventLocked=!1,this.handleScroll(!0)},n.prototype.__scrolled=function(t){this.handleScroll(!1)},n.prototype.getIndexOnPos1=function(t){if(this._realNumItems<this._curLineItemCount)return n.pos_param=0,0;var e,i,o;if(this.numChildren>0&&!t){if(i=this.getChildAt(0).y,i>n.pos_param){for(e=this._firstIndex-this._curLineItemCount;e>=0;e-=this._curLineItemCount)if(i-=this._virtualItems[e].height+this._lineGap,i<=n.pos_param)return n.pos_param=i,e;return n.pos_param=0,0}for(e=this._firstIndex;e<this._realNumItems;e+=this._curLineItemCount){if(o=i+this._virtualItems[e].height+this._lineGap,o>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount}for(i=0,e=0;e<this._realNumItems;e+=this._curLineItemCount){if(o=i+this._virtualItems[e].height+this._lineGap,o>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount},n.prototype.getIndexOnPos2=function(t){if(this._realNumItems<this._curLineItemCount)return n.pos_param=0,0;var e,i,o;if(this.numChildren>0&&!t){if(i=this.getChildAt(0).x,i>n.pos_param){for(e=this._firstIndex-this._curLineItemCount;e>=0;e-=this._curLineItemCount)if(i-=this._virtualItems[e].width+this._columnGap,i<=n.pos_param)return n.pos_param=i,e;return n.pos_param=0,0}for(e=this._firstIndex;e<this._realNumItems;e+=this._curLineItemCount){if(o=i+this._virtualItems[e].width+this._columnGap,o>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount}for(i=0,e=0;e<this._realNumItems;e+=this._curLineItemCount){if(o=i+this._virtualItems[e].width+this._columnGap,o>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount},n.prototype.getIndexOnPos3=function(t){if(this._realNumItems<this._curLineItemCount)return n.pos_param=0,0;var e,i,o=this.viewWidth,r=Math.floor(n.pos_param/o),s=r*(this._curLineItemCount*this._curLineItemCount2),a=r*o;for(e=0;e<this._curLineItemCount;e++){if(i=a+this._virtualItems[s+e].width+this._columnGap,i>n.pos_param)return n.pos_param=a,s+e;a=i}return n.pos_param=a,s+this._curLineItemCount-1},n.prototype.handleScroll=function(e){if(!this._eventLocked){if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal){for(var i=0;this.handleScroll1(e);)if(i++,e=!1,i>20){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder1()}else if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical){for(i=0;this.handleScroll2(e);)if(i++,e=!1,i>20){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder2()}else this.handleScroll3(e);this._boundsChanged=!1}},n.prototype.handleScroll1=function(e){var i=this._scrollPane.scrollingPosY,o=i+this._scrollPane.viewHeight,r=o==this._scrollPane.contentHeight;n.pos_param=i;var s=this.getIndexOnPos1(e);if(i=n.pos_param,s==this._firstIndex&&!e)return!1;var a=this._firstIndex;this._firstIndex=s;var h,l,u,c,_,p=s,d=a>s,f=this.numChildren,g=a+f-1,y=d?g:a,m=0,v=i,b=0,w=0,C=this.defaultItem,S=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;p<this._realNumItems&&(r||o>v);){if(l=this._virtualItems[p],(null==l.obj||e)&&(null!=this.itemProvider&&(C=this.itemProvider.call(this.callbackThisObj,p%this._numItems),null==C&&(C=this._defaultItem),C=t.UIPackage.normalizeURL(C)),null!=l.obj&&l.obj.resourceURL!=C&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(d){for(_=y;_>=a;_--)if(u=this._virtualItems[_],null!=u.obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,_==y&&y--;break}}else for(_=y;g>=_;_++)if(u=this._virtualItems[_],null!=u.obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,_==y&&y++;break}null!=l.obj?this.setChildIndex(l.obj,d?p-s:this.numChildren):(l.obj=this._pool.getObject(C),d?this.addChildAt(l.obj,p-s):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=l.selected),h=!0}else h=e;h&&(this._autoResizeItem&&(this._layout==t.ListLayoutType.SingleColumn||this._columnCount>0)&&l.obj.setSize(S,l.obj.height,!0),this.itemRenderer.call(this.callbackThisObj,p%this._numItems,l.obj),p%this._curLineItemCount==0&&(b+=Math.ceil(l.obj.height)-l.height,p==s&&a>s&&(w=Math.ceil(l.obj.height)-l.height)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=this.itemInfoVer,l.obj.setXY(m,v),p==s&&(o+=l.height),m+=l.width+this._columnGap,p%this._curLineItemCount==this._curLineItemCount-1&&(m=0,v+=l.height+this._lineGap),p++}for(c=0;f>c;c++)l=this._virtualItems[a+c],l.updateFlag!=this.itemInfoVer&&null!=l.obj&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null);for(f=this._children.length,c=0;f>c;c++){var T=this._virtualItems[s+c].obj;this._children[c]!=T&&this.setChildIndex(T,c)}return(0!=b||0!=w)&&this._scrollPane.changeContentSizeOnScrolling(0,b,0,w),p>0&&this.numChildren>0&&this._container.y<=0&&this.getChildAt(0).y>-this._container.y?!0:!1},n.prototype.handleScroll2=function(e){var i=this._scrollPane.scrollingPosX,o=i+this._scrollPane.viewWidth,r=i==this._scrollPane.contentWidth;n.pos_param=i;var s=this.getIndexOnPos2(e);if(i=n.pos_param,s==this._firstIndex&&!e)return!1;var a=this._firstIndex;this._firstIndex=s;var h,l,u,c,_,p=s,d=a>s,f=this.numChildren,g=a+f-1,y=d?g:a,m=i,v=0,b=0,w=0,C=this.defaultItem,S=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;p<this._realNumItems&&(r||o>m);){if(l=this._virtualItems[p],(null==l.obj||e)&&(null!=this.itemProvider&&(C=this.itemProvider.call(this.callbackThisObj,p%this._numItems),null==C&&(C=this._defaultItem),C=t.UIPackage.normalizeURL(C)),null!=l.obj&&l.obj.resourceURL!=C&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(d){for(_=y;_>=a;_--)if(u=this._virtualItems[_],null!=u.obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,_==y&&y--;break}}else for(_=y;g>=_;_++)if(u=this._virtualItems[_],null!=u.obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,_==y&&y++;
break}null!=l.obj?this.setChildIndex(l.obj,d?p-s:this.numChildren):(l.obj=this._pool.getObject(C),d?this.addChildAt(l.obj,p-s):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=l.selected),h=!0}else h=e;h&&(this._autoResizeItem&&(this._layout==t.ListLayoutType.SingleRow||this._lineCount>0)&&l.obj.setSize(l.obj.width,S,!0),this.itemRenderer.call(this.callbackThisObj,p%this._numItems,l.obj),p%this._curLineItemCount==0&&(b+=Math.ceil(l.obj.width)-l.width,p==s&&a>s&&(w=Math.ceil(l.obj.width)-l.width)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=this.itemInfoVer,l.obj.setXY(m,v),p==s&&(o+=l.width),v+=l.height+this._lineGap,p%this._curLineItemCount==this._curLineItemCount-1&&(v=0,m+=l.width+this._columnGap),p++}for(c=0;f>c;c++)l=this._virtualItems[a+c],l.updateFlag!=this.itemInfoVer&&null!=l.obj&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null);for(f=this._children.length,c=0;f>c;c++){var T=this._virtualItems[s+c].obj;this._children[c]!=T&&this.setChildIndex(T,c)}return(0!=b||0!=w)&&this._scrollPane.changeContentSizeOnScrolling(b,0,w,0),p>0&&this.numChildren>0&&this._container.x<=0&&this.getChildAt(0).x>-this._container.x?!0:!1},n.prototype.handleScroll3=function(e){var i=this._scrollPane.scrollingPosX;n.pos_param=i;var o=this.getIndexOnPos3(e);if(i=n.pos_param,o!=this._firstIndex||e){var r=this._firstIndex;this._firstIndex=o;var s,a,h,l,u,c=r,_=this._virtualItems.length,p=this._curLineItemCount*this._curLineItemCount2,d=o%this._curLineItemCount,f=this.viewWidth,g=Math.floor(o/p),y=g*p,m=y+2*p,v=this._defaultItem,b=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,w=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;for(this.itemInfoVer++,a=y;m>a;a++)if(!(a>=this._realNumItems)){if(u=a%this._curLineItemCount,p>a-y){if(d>u)continue}else if(u>d)continue;h=this._virtualItems[a],h.updateFlag=this.itemInfoVer}var C=null,S=0;for(a=y;m>a;a++)if(!(a>=this._realNumItems)&&(h=this._virtualItems[a],h.updateFlag==this.itemInfoVer)){if(null==h.obj){for(;_>c;){if(l=this._virtualItems[c],null!=l.obj&&l.updateFlag!=this.itemInfoVer){l.obj instanceof t.GButton&&(l.selected=l.obj.selected),h.obj=l.obj,l.obj=null;break}c++}-1==S&&(S=this.getChildIndex(C)+1),null==h.obj?(null!=this.itemProvider&&(v=this.itemProvider.call(this.callbackThisObj,a%this._numItems),null==v&&(v=this._defaultItem),v=t.UIPackage.normalizeURL(v)),h.obj=this._pool.getObject(v),this.addChildAt(h.obj,S)):S=this.setChildIndexBefore(h.obj,S),S++,h.obj instanceof t.GButton&&(h.obj.selected=h.selected),s=!0}else s=e,S=-1,C=h.obj;s&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?h.obj.setSize(b,w,!0):this._curLineItemCount==this._columnCount?h.obj.setSize(b,h.obj.height,!0):this._curLineItemCount2==this._lineCount&&h.obj.setSize(h.obj.width,w,!0)),this.itemRenderer.call(this.callbackThisObj,a%this._numItems,h.obj),h.width=Math.ceil(h.obj.width),h.height=Math.ceil(h.obj.height))}var T=y/p*f,x=T,I=0,O=0;for(a=y;m>a;a++)a>=this._realNumItems||(h=this._virtualItems[a],h.updateFlag==this.itemInfoVer&&h.obj.setXY(x,I),h.height>O&&(O=h.height),a%this._curLineItemCount==this._curLineItemCount-1?(x=T,I+=O+this._lineGap,O=0,a==y+p-1&&(T+=f,x=T,I=0)):x+=h.width+this._columnGap);for(a=c;_>a;a++)h=this._virtualItems[a],h.updateFlag!=this.itemInfoVer&&null!=h.obj&&(h.obj instanceof t.GButton&&(h.selected=h.obj.selected),this.removeChildToPool(h.obj),h.obj=null)}},n.prototype.handleArchOrder1=function(){if(this._childrenRenderOrder==t.ChildrenRenderOrder.Arch){for(var e=this._scrollPane.posY+this.viewHeight/2,i=Number.POSITIVE_INFINITY,n=0,o=0,r=this.numChildren,s=0;r>s;s++){var a=this.getChildAt(s);(!this.foldInvisibleItems||a.visible)&&(n=Math.abs(e-a.y-a.height/2),i>n&&(i=n,o=s))}this.apexIndex=o}},n.prototype.handleArchOrder2=function(){if(this._childrenRenderOrder==t.ChildrenRenderOrder.Arch){for(var e=this._scrollPane.posX+this.viewWidth/2,i=Number.POSITIVE_INFINITY,n=0,o=0,r=this.numChildren,s=0;r>s;s++){var a=this.getChildAt(s);(!this.foldInvisibleItems||a.visible)&&(n=Math.abs(e-a.x-a.width/2),i>n&&(i=n,o=s))}this.apexIndex=o}},n.prototype.handleAlign=function(e,i){var n=0,o=0;i<this.viewHeight&&(this._verticalAlign==t.VertAlignType.Middle?o=Math.floor((this.viewHeight-i)/2):this._verticalAlign==t.VertAlignType.Bottom&&(o=this.viewHeight-i)),e<this.viewWidth&&(this._align==t.AlignType.Center?n=Math.floor((this.viewWidth-e)/2):this._align==t.AlignType.Right&&(n=this.viewWidth-e)),(n!=this._alignOffset.x||o!=this._alignOffset.y)&&(this._alignOffset.setTo(n,o),null!=this._scrollPane?this._scrollPane.adjustMaskContainer():(this._container.x=this._margin.left+this._alignOffset.x,this._container.y=this._margin.top+this._alignOffset.y))},n.prototype.updateBounds=function(){if(!this._virtual){var e,i,n=0,o=0,r=0,s=0,a=0,h=0,l=0,u=0,c=0,_=this._children.length,p=this.viewWidth,d=this.viewHeight,f=0,g=0,y=0;if(this._layout==t.ListLayoutType.SingleColumn){for(e=0;_>e;e++)i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0!=o&&(o+=this._lineGap),i.y=o,this._autoResizeItem&&i.setSize(p,i.height,!0),o+=Math.ceil(i.height),i.width>r&&(r=i.width));a=Math.ceil(r),h=o}else if(this._layout==t.ListLayoutType.SingleRow){for(e=0;_>e;e++)i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0!=n&&(n+=this._columnGap),i.x=n,this._autoResizeItem&&i.setSize(i.width,d,!0),n+=Math.ceil(i.width),i.height>s&&(s=i.height));a=n,h=Math.ceil(s)}else if(this._layout==t.ListLayoutType.FlowHorizontal)if(this._autoResizeItem&&this._columnCount>0){for(e=0;_>e;e++)if(i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(f+=i.sourceWidth,l++,l==this._columnCount||e==_-1)){for(y=(p-f-(l-1)*this._columnGap)/f,n=0,l=g;e>=l;l++)i=this.getChildAt(l),(!this.foldInvisibleItems||i.visible)&&(i.setXY(n,o),e>l?(i.setSize(i.sourceWidth+Math.round(i.sourceWidth*y),i.height,!0),n+=Math.ceil(i.width)+this._columnGap):i.setSize(p-n,i.height,!0),i.height>s&&(s=i.height));o+=Math.ceil(s)+this._lineGap,s=0,l=0,g=e+1,f=0}h=o+Math.ceil(s),a=p}else{for(e=0;_>e;e++)i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0!=n&&(n+=this._columnGap),(0!=this._columnCount&&l>=this._columnCount||0==this._columnCount&&n+i.width>p&&0!=s)&&(n=0,o+=Math.ceil(s)+this._lineGap,s=0,l=0),i.setXY(n,o),n+=Math.ceil(i.width),n>r&&(r=n),i.height>s&&(s=i.height),l++);h=o+Math.ceil(s),a=Math.ceil(r)}else if(this._layout==t.ListLayoutType.FlowVertical)if(this._autoResizeItem&&this._lineCount>0){for(e=0;_>e;e++)if(i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(f+=i.sourceHeight,l++,l==this._lineCount||e==_-1)){for(y=(d-f-(l-1)*this._lineGap)/f,o=0,l=g;e>=l;l++)i=this.getChildAt(l),(!this.foldInvisibleItems||i.visible)&&(i.setXY(n,o),e>l?(i.setSize(i.width,i.sourceHeight+Math.round(i.sourceHeight*y),!0),o+=Math.ceil(i.height)+this._lineGap):i.setSize(i.width,d-o,!0),i.width>r&&(r=i.width));n+=Math.ceil(r)+this._columnGap,r=0,l=0,g=e+1,f=0}a=n+Math.ceil(r),h=d}else{for(e=0;_>e;e++)i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0!=o&&(o+=this._lineGap),(0!=this._lineCount&&l>=this._lineCount||0==this._lineCount&&o+i.height>d&&0!=r)&&(o=0,n+=Math.ceil(r)+this._columnGap,r=0,l=0),i.setXY(n,o),o+=Math.ceil(i.height),o>s&&(s=o),i.width>r&&(r=i.width),l++);a=n+Math.ceil(r),h=Math.ceil(s)}else{var m;if(this._autoResizeItem&&this._lineCount>0&&(m=Math.floor((d-(this._lineCount-1)*this._lineGap)/this._lineCount)),this._autoResizeItem&&this._columnCount>0){for(e=0;_>e;e++)if(i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0==l&&(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&o+(this._lineCount>0?m:i.height)>d)&&(u++,o=0,c=0),f+=i.sourceWidth,l++,l==this._columnCount||e==_-1)){for(y=(p-f-(l-1)*this._columnGap)/f,n=0,l=g;e>=l;l++)i=this.getChildAt(l),(!this.foldInvisibleItems||i.visible)&&(i.setXY(u*p+n,o),e>l?(i.setSize(i.sourceWidth+Math.round(i.sourceWidth*y),this._lineCount>0?m:i.height,!0),n+=Math.ceil(i.width)+this._columnGap):i.setSize(p-n,this._lineCount>0?m:i.height,!0),i.height>s&&(s=i.height));o+=Math.ceil(s)+this._lineGap,s=0,l=0,g=e+1,f=0,c++}}else for(e=0;_>e;e++)i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0!=n&&(n+=this._columnGap),this._autoResizeItem&&this._lineCount>0&&i.setSize(i.width,m,!0),(0!=this._columnCount&&l>=this._columnCount||0==this._columnCount&&n+i.width>p&&0!=s)&&(n=0,o+=Math.ceil(s)+this._lineGap,s=0,l=0,c++,(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&o+i.height>d&&0!=r)&&(u++,o=0,c=0)),i.setXY(u*p+n,o),n+=Math.ceil(i.width),n>r&&(r=n),i.height>s&&(s=i.height),l++);h=u>0?d:o+Math.ceil(s),a=(u+1)*p}this.handleAlign(a,h),this.setBounds(0,0,a,h)}},n.prototype.setup_beforeAdd=function(i,n){e.prototype.setup_beforeAdd.call(this,i,n),i.seek(n,5);var o,r,s,a,h;this._layout=i.readByte(),this._selectionMode=i.readByte(),this._align=i.readByte(),this._verticalAlign=i.readByte(),this._lineGap=i.readShort(),this._columnGap=i.readShort(),this._lineCount=i.readShort(),this._columnCount=i.readShort(),this._autoResizeItem=i.readBool(),this._childrenRenderOrder=i.readByte(),this._apexIndex=i.readShort(),i.readBool()&&(this._margin.top=i.readInt(),this._margin.bottom=i.readInt(),this._margin.left=i.readInt(),this._margin.right=i.readInt());var l=i.readByte();if(l==t.OverflowType.Scroll){var u=i.position;i.seek(n,7),this.setupScroll(i),i.position=u}else this.setupOverflow(l);i.readBool()&&i.skip(8),i.seek(n,8),this._defaultItem=i.readS();var c=i.readShort();for(o=0;c>o;o++)if(a=i.readShort(),a+=i.position,h=i.readS(),null!=h||(h=this.defaultItem)){var _=this.getFromPool(h);if(null!=_&&(this.addChild(_),h=i.readS(),null!=h&&(_.text=h),h=i.readS(),null!=h&&_ instanceof t.GButton&&(_.selectedTitle=h),h=i.readS(),null!=h&&(_.icon=h),h=i.readS(),null!=h&&_ instanceof t.GButton&&(_.selectedIcon=h),h=i.readS(),null!=h&&(_.name=h),_ instanceof t.GComponent))for(s=i.readShort(),r=0;s>r;r++){var p=_.getController(i.readS());h=i.readS(),null!=p&&(p.selectedPageId=h)}i.position=a}else i.position=a},n.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6);var n=t.readShort();-1!=n&&(this._selectionController=this.parent.getControllerAt(n))},n}(t.GComponent);t.GList=e,__reflect(e.prototype,"fairygui.GList");var i=function(){function t(){this.width=0,this.height=0,this.updateFlag=0,this.selected=!1}return t}();__reflect(i.prototype,"ItemInfo")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"hitArea",{get:function(){return this._hitArea},set:function(t){this._hitArea&&t?(this._hitArea.x=t.x,this._hitArea.y=t.y,this._hitArea.width=t.width,this._hitArea.height=t.height):this._hitArea=t?t.clone():null},enumerable:!0,configurable:!0}),e.prototype.$hitTest=function(e,i){var n=t.prototype.$hitTest.call(this,e,i);if(n==this){if(!this.touchEnabled||null==this._hitArea)return null}else if(null==n&&this.touchEnabled&&null!=this._hitArea){var o=this.$getInvertedConcatenatedMatrix(),r=o.a*e+o.c*i+o.tx,s=o.b*e+o.d*i+o.ty;this._hitArea.contains(r,s)&&(n=this)}return n},e}(egret.Sprite);t.UISprite=e,__reflect(e.prototype,"fairygui.UISprite")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._color=0,i._contentSourceWidth=0,i._contentSourceHeight=0,i._contentWidth=0,i._contentHeight=0,i._url="",i._fill=t.LoaderFillType.None,i._align=t.AlignType.Left,i._verticalAlign=t.VertAlignType.Top,i._showErrorSign=!0,i._color=16777215,i}return __extends(i,e),i.prototype.createDisplayObject=function(){this._container=new t.UIContainer,this._container.$owner=this,this._container.hitArea=new egret.Rectangle,this.setDisplayObject(this._container),this._content=new t.MovieClip,this._container.addChild(this._content)},i.prototype.dispose=function(){if(null==this._contentItem){var t=this._content.texture;null!=t&&this.freeExternal(t)}null!=this._content2&&this._content2.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"url",{get:function(){return this._url},set:function(t){this._url!=t&&(this.clearContent(),this._url=t,this.loadContent(),this.updateGear(7))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill!=t&&(this._fill=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shrinkOnly",{get:function(){return this._shrinkOnly},set:function(t){this._shrinkOnly!=t&&(this._shrinkOnly=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSize",{get:function(){return this._autoSize},set:function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._content.playing},set:function(t){this._content.playing!=t&&(this._content.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._content.frame},set:function(t){this._content.frame!=t&&(this._content.frame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeScale",{get:function(){return this._content.timeScale},set:function(t){this._content.timeScale=t},enumerable:!0,configurable:!0}),i.prototype.advance=function(t){this._content.advance(t)},Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),i.prototype.applyColor=function(){},Object.defineProperty(i.prototype,"showErrorSign",{get:function(){return this._showErrorSign},set:function(t){this._showErrorSign=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"component",{get:function(){return this._content2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._content.texture},set:function(t){this.url=null,this._content.frames=null,this._content.texture=t,null!=t?(this._contentSourceWidth=t.textureWidth,this._contentSourceHeight=t.textureHeight):this._contentSourceWidth=this._contentHeight=0,this.updateLayout()},enumerable:!0,configurable:!0}),i.prototype.loadContent=function(){this._url&&(t.ToolSet.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())},i.prototype.loadFromPackage=function(e){if(this._contentItem=t.UIPackage.getItemByURL(e),null!=this._contentItem)if(this._contentItem.load(),this._autoSize&&this.setSize(this._contentItem.width,this._contentItem.height),this._contentItem.type==t.PackageItemType.Image)null==this._contentItem.texture?this.setErrorState():(this._content.texture=this._contentItem.texture,this._content.scale9Grid=this._contentItem.scale9Grid,this._contentItem.scaleByTile?this._content.fillMode=egret.BitmapFillMode.REPEAT:this._content.fillMode=egret.BitmapFillMode.SCALE,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout());else if(this._contentItem.type==t.PackageItemType.MovieClip)this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this._content.interval=this._contentItem.interval,this._content.swing=this._contentItem.swing,this._content.repeatDelay=this._contentItem.repeatDelay,this._content.frames=this._contentItem.frames,this.updateLayout();else if(this._contentItem.type==t.PackageItemType.Component){var i=t.UIPackage.createObjectFromURL(e);i?i instanceof t.GComponent?(this._content2=i.asCom,this._container.addChild(this._content2.displayObject),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):(i.dispose(),this.setErrorState()):this.setErrorState()}else this.setErrorState();else this.setErrorState()},i.prototype.loadExternal=function(){RES.getResAsync(this._url,this.__getResCompleted,this)},i.prototype.freeExternal=function(t){},i.prototype.onExternalLoadSuccess=function(t){this._content.texture=t,this._content.scale9Grid=null,this._content.fillMode=egret.BitmapFillMode.SCALE,this._contentSourceWidth=t.textureWidth,this._contentSourceHeight=t.textureHeight,this.updateLayout()},i.prototype.onExternalLoadFailed=function(){this.setErrorState()},i.prototype.__getResCompleted=function(t,e){t instanceof egret.Texture?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},i.prototype.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=t.UIConfig.loaderErrorSign&&(this._errorSign=i._errorSignPool.getObject(t.UIConfig.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.setSize(this.width,this.height),this._container.addChild(this._errorSign.displayObject)))},i.prototype.clearErrorState=function(){null!=this._errorSign&&(this._container.removeChild(this._errorSign.displayObject),i._errorSignPool.returnObject(this._errorSign),this._errorSign=null)},i.prototype.updateLayout=function(){if(null==this._content2&&null==this._content)return void(this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1));if(this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,this._autoSize&&(this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1,this._contentWidth==this._width&&this._contentHeight==this._height))return void(null!=this._content2?(this._content2.setXY(0,0),this._content2.setScale(1,1)):(this._content.x=0,this._content.y=0,this._content.width=this._contentWidth,this._content.height=this._contentHeight));var e=1,i=1;this._fill!=t.LoaderFillType.None&&(e=this.width/this._contentSourceWidth,i=this.height/this._contentSourceHeight,(1!=e||1!=i)&&(this._fill==t.LoaderFillType.ScaleMatchHeight?e=i:this._fill==t.LoaderFillType.ScaleMatchWidth?i=e:this._fill==t.LoaderFillType.Scale?e>i?e=i:i=e:this._fill==t.LoaderFillType.ScaleNoBorder&&(e>i?i=e:e=i),this._shrinkOnly&&(e>1&&(e=1),i>1&&(i=1)),this._contentWidth=this._contentSourceWidth*e,this._contentHeight=this._contentSourceHeight*i)),null!=this._content2?this._content2.setScale(e,i):(this._content.width=this._contentWidth,this._content.height=this._contentHeight);var n,o;n=this._align==t.AlignType.Center?Math.floor((this.width-this._contentWidth)/2):this._align==t.AlignType.Right?this.width-this._contentWidth:0,o=this._verticalAlign==t.VertAlignType.Middle?Math.floor((this.height-this._contentHeight)/2):this._verticalAlign==t.VertAlignType.Bottom?this.height-this._contentHeight:0,null!=this._content2?this._content2.setXY(n,o):(this._content.x=n,this._content.y=o)},i.prototype.clearContent=function(){this.clearErrorState(),null==this._contentItem&&null!=this._content.texture&&this.freeExternal(this._content.texture),this._content.texture=null,this._content.frames=null,null!=this._content2&&(this._container.removeChild(this._content2.displayObject),this._content2.dispose(),this._content2=null),this._contentItem=null},i.prototype.handleSizeChanged=function(){this._updatingLayout||this.updateLayout(),this._container.hitArea.setTo(0,0,this.width,this.height)},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,5),this._url=t.readS(),this._align=t.readByte(),this._verticalAlign=t.readByte(),this._fill=t.readByte(),this._shrinkOnly=t.readBool(),this._autoSize=t.readBool(),this._showErrorSign=t.readBool(),this._content.playing=t.readBool(),this._content.frame=t.readInt(),t.readBool()&&(this.color=t.readColor());var n=t.readByte();0!=n&&t.skip(6),this._url&&this.loadContent()},i._errorSignPool=new t.GObjectPool,i}(t.GObject);t.GLoader=e,__reflect(e.prototype,"fairygui.GLoader")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"color",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this._movieClip=new t.MovieClip,this._movieClip.$owner=this,this._movieClip.touchEnabled=!1,this.setDisplayObject(this._movieClip)},Object.defineProperty(i.prototype,"playing",{get:function(){return this._movieClip.playing},set:function(t){this._movieClip.playing!=t&&(this._movieClip.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._movieClip.frame},set:function(t){this._movieClip.frame!=t&&(this._movieClip.frame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeScale",{get:function(){return this._movieClip.timeScale},set:function(t){this._movieClip.timeScale=t},enumerable:!0,configurable:!0}),i.prototype.rewind=function(){this._movieClip.rewind()},i.prototype.syncStatus=function(t){this._movieClip.syncStatus(t._movieClip)},i.prototype.advance=function(t){this._movieClip.advance(t)},i.prototype.setPlaySettings=function(t,e,i,n,o,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),void 0===o&&(o=null),void 0===r&&(r=null),this._movieClip.setPlaySettings(t,e,i,n,o,r)},i.prototype.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this._movieClip.interval=this.packageItem.interval,this._movieClip.swing=this.packageItem.swing,this._movieClip.repeatDelay=this.packageItem.repeatDelay,this._movieClip.frames=this.packageItem.frames,this._movieClip.smoothing=this.packageItem.smoothing},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,5),t.readBool()&&(this.color=t.readColor()),t.readByte(),this._movieClip.frame=t.readInt(),this._movieClip.playing=t.readBool()},i}(t.GObject);t.GMovieClip=e,__reflect(e.prototype,"fairygui.GMovieClip")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._max=0,i._value=0,i._barMaxWidth=0,i._barMaxHeight=0,i._barMaxWidthDelta=0,i._barMaxHeightDelta=0,i._barStartX=0,i._barStartY=0,i._titleType=t.ProgressTitleType.Percent,i._value=50,i._max=100,i}return __extends(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this._titleType},set:function(t){this._titleType!=t&&(this._titleType=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&(t.GTween.kill(this,!1,this.update),this._value=e,this.update(this._value))},enumerable:!0,configurable:!0}),i.prototype.tweenValue=function(e,i){var n,o=t.GTween.getTween(this,this.update);return null!=o?(n=o.value.x,o.kill()):n=this._value,this._value=e,t.GTween.to(n,this._value,i).setTarget(this,this.update).setEase(t.EaseType.Linear)},i.prototype.update=function(e){var i=0!=this._max?Math.min(e/this._max,1):0;if(this._titleObject)switch(this._titleType){case t.ProgressTitleType.Percent:this._titleObject.text=Math.round(100*i)+"%";break;case t.ProgressTitleType.ValueAndMax:this._titleObject.text=Math.round(e)+"/"+Math.round(this._max);break;case t.ProgressTitleType.Value:this._titleObject.text=""+Math.round(e);break;case t.ProgressTitleType.Max:this._titleObject.text=""+Math.round(this._max)}var n=this.width-this._barMaxWidthDelta,o=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(n*i),this._barObjectH.x=this._barStartX+(n-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(o*i),this._barObjectV.y=this._barStartY+(o-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(n*i)),this._barObjectV&&(this._barObjectV.height=Math.round(o*i))),this._aniObject instanceof t.GMovieClip&&(this._aniObject.frame=Math.round(100*i))},i.prototype.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update(this._value)},i.prototype.setup_afterAdd=function(t,i){return e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)?t.readByte()!=this.packageItem.objectType?void this.update(this._value):(this._value=t.readInt(),this._max=t.readInt(),void this.update(this._value)):void this.update(this._value)},i}(t.GComponent);t.GProgressBar=e,__reflect(e.prototype,"fairygui.GProgressBar")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.size=0,this.glyphs={}}return t}();t.BitmapFont=e,__reflect(e.prototype,"fairygui.BitmapFont")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._textField.touchEnabled=!0,t}return __extends(i,e),i.prototype.updateTextFieldText=function(){var e=this._text;null!=this._templateVars&&(e=this.parseTemplate(e));var i;if(i=this._ubbEnabled?t.GTextField._htmlParser.parser(t.ToolSet.parseUBB(e)):t.GTextField._htmlParser.parser(e),this._underline)for(var n=0;n<i.length;n++){var o=i[n];o.style?o.style.underline=!0:o.style={underline:!0}}this._textField.textFlow=i},i}(t.GTextField);t.GRichTextField=e,__reflect(e.prototype,"fairygui.GRichTextField")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return null==i._inst&&(i._inst=t),t.opaque=!1,t._volumeScale=1,t._popupStack=new Array,t._justClosedPopups=new Array,t.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,t.__addedToStage,t),t}return __extends(i,e),Object.defineProperty(i,"inst",{get:function(){return null==i._inst&&new i,i._inst},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nativeStage",{get:function(){return this._nativeStage},enumerable:!0,configurable:!0}),i.prototype.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},i.prototype.hideWindow=function(t){t.hide()},i.prototype.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},i.prototype.bringToFront=function(e){var i,n=this.numChildren;for(i=null==this._modalLayer.parent||e.modal?n-1:this.getChildIndex(this._modalLayer)-1;i>=0;i--){var o=this.getChildAt(i);if(o==e)return;if(o instanceof t.Window)break}i>=0&&this.setChildIndex(e,i)},i.prototype.showModalWait=function(e){void 0===e&&(e=null),null!=t.UIConfig.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.globalModalWaiting)),this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,t.RelationType.Size),this.addChild(this._modalWaitPane),this._modalWaitPane.text=e)},i.prototype.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)},i.prototype.closeAllExceptModals=function(){for(var e=this._children.slice(),i=e.length,n=0;i>n;n++){var o=e[n];o instanceof t.Window&&!o.modal&&o.hide()}},i.prototype.closeAllWindows=function(){for(var e=this._children.slice(),i=e.length,n=0;i>n;n++){var o=e[n];o instanceof t.Window&&o.hide()}},i.prototype.getTopWindow=function(){for(var e=this.numChildren,i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n instanceof t.Window)return n}return null},Object.defineProperty(i.prototype,"modalLayer",{get:function(){return this._modalLayer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasModalWindow",{get:function(){return null!=this._modalLayer.parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modalWaiting",{get:function(){return this._modalWaitPane&&this._modalWaitPane.inContainer},enumerable:!0,configurable:!0}),i.prototype.showPopup=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),this._popupStack.length>0){var o=this._popupStack.indexOf(t);if(-1!=o)for(var r=this._popupStack.length-1;r>=o;r--)this.removeChild(this._popupStack.pop())}if(this._popupStack.push(t),null!=e)for(var s=e;null!=s;){if(s.parent==this){t.sortingOrder<s.sortingOrder&&(t.sortingOrder=s.sortingOrder);break}s=s.parent}this.addChild(t),this.adjustModalLayer();var a,h=0,l=0;e?(a=e.localToRoot(),h=e.width,l=e.height):a=this.globalToLocal(i.mouseX,i.mouseY);var u,c;u=a.x,u+t.width>this.width&&(u=u+h-t.width),c=a.y+l,(null==n&&c+t.height>this.height||0==n)&&(c=a.y-t.height-1,0>c&&(c=0,u+=h/2)),t.x=u,t.y=c},i.prototype.togglePopup=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},i.prototype.hidePopup=function(t){if(void 0===t&&(t=null),null!=t){var e=this._popupStack.indexOf(t);if(-1!=e)for(var i=this._popupStack.length-1;i>=e;i--)this.closePopup(this._popupStack.pop())}else{var n=this._popupStack.length;for(i=n-1;i>=0;i--)this.closePopup(this._popupStack[i]);this._popupStack.length=0}},Object.defineProperty(i.prototype,"hasAnyPopup",{get:function(){return 0!=this._popupStack.length},enumerable:!0,configurable:!0}),i.prototype.closePopup=function(e){null!=e.parent&&(e instanceof t.Window?e.hide():this.removeChild(e))},i.prototype.showTooltips=function(e){if(null==this._defaultTooltipWin){var i=t.UIConfig.tooltipsWin;if(!i)return void console.error("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=t.UIPackage.createObjectFromURL(i)}this._defaultTooltipWin.text=e,this.showTooltipsWin(this._defaultTooltipWin)},i.prototype.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this._tooltipWin=t;var n=0,o=0;null==e?(n=i.mouseX+10,o=i.mouseY+20):(n=e.x,o=e.y);var r=this.globalToLocal(n,o);n=r.x,o=r.y,n+this._tooltipWin.width>this.width&&(n=n-this._tooltipWin.width-1,0>n&&(n=10)),o+this._tooltipWin.height>this.height&&(o=o-this._tooltipWin.height-1,n-this._tooltipWin.width-1>0&&(n=n-this._tooltipWin.width-1),0>o&&(o=10)),this._tooltipWin.x=n,this._tooltipWin.y=o,this.addChild(this._tooltipWin)},i.prototype.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)
},i.prototype.getObjectUnderPoint=function(e,i){var n=this._nativeStage.$hitTest(e,i);return n?t.ToolSet.displayObjectToGObject(n):null},Object.defineProperty(i.prototype,"focus",{get:function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject},set:function(t){if(t&&(!t.focusable||!t.onStage))throw"invalid focus target";this.setFocus(t)},enumerable:!0,configurable:!0}),i.prototype.setFocus=function(t){this._focusedObject!=t&&(this._focusedObject=t,this.dispatchEventWith(i.FOCUS_CHANGED))},Object.defineProperty(i.prototype,"volumeScale",{get:function(){return this._volumeScale},set:function(t){this._volumeScale=t},enumerable:!0,configurable:!0}),i.prototype.playOneShotSound=function(t,e){void 0===e&&(e=1);var i=this._volumeScale*e,n=t.play(0,1);n.volume=i},i.prototype.adjustModalLayer=function(){var e=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,e-1);for(var i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n instanceof t.Window&&n.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,i):this.setChildIndexBefore(this._modalLayer,i))}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)},i.prototype.__addedToStage=function(e){this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this),this._nativeStage=this.displayObject.stage,this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__stageMouseDownCapture,this,!0),this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__stageMouseUpCapture,this,!0),this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__stageMouseMoveCapture,this,!0),this._modalLayer=new t.GGraph,this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,0,0,t.UIConfig.modalLayerColor,t.UIConfig.modalLayerAlpha),this._modalLayer.addRelation(this,t.RelationType.Size),this.displayObject.stage.addEventListener(egret.Event.RESIZE,this.__winResize,this),this.__winResize(null)},i.prototype.__stageMouseDownCapture=function(t){i.mouseX=t.stageX,i.mouseY=t.stageY,i.touchDown=!0;for(var e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var n=e.$owner;if(n.touchable&&n.focusable){this.setFocus(n);break}}e=e.parent}if(null!=this._tooltipWin&&this.hideTooltips(),this._justClosedPopups.length=0,this._popupStack.length>0){for(e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var o=this._popupStack.indexOf(e.$owner);if(-1!=o){for(var r=this._popupStack.length-1;r>o;r--){var s=this._popupStack.pop();this.closePopup(s),this._justClosedPopups.push(s)}return}}e=e.parent}var a=this._popupStack.length;for(r=a-1;r>=0;r--)s=this._popupStack[r],this.closePopup(s),this._justClosedPopups.push(s);this._popupStack.length=0}},i.prototype.__stageMouseMoveCapture=function(t){i.mouseX=t.stageX,i.mouseY=t.stageY},i.prototype.__stageMouseUpCapture=function(t){i.touchDown=!1},i.prototype.__winResize=function(t){this.setSize(this._nativeStage.stageWidth,this._nativeStage.stageHeight)},i.contentScaleFactor=1,i.FOCUS_CHANGED="FocusChanged",i}(t.GComponent);t.GRoot=e,__reflect(e.prototype,"fairygui.GRoot")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}();t.Margin=e,__reflect(e.prototype,"fairygui.Margin")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this._enumI=0,this._enumCount=0,this._lastTime=0,this._items=new Array,this._itemPool=new Array,this._lastTime=egret.getTimer(),t.time=this._lastTime,egret.startTick(this.__timer,this)}return t.prototype.getItem=function(){return this._itemPool.length?this._itemPool.pop():new i},t.prototype.findItem=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var o=this._items[n];if(o.callback==t&&o.thisObj==e)return o}return null},t.prototype.add=function(t,e,i,n,o){void 0===o&&(o=null);var r=this.findItem(i,n);r||(r=this.getItem(),r.callback=i,r.hasParam=1==i.length,r.thisObj=n,this._items.push(r)),r.delay=t,r.counter=0,r.repeat=e,r.param=o,r.end=!1},t.prototype.callLater=function(t,e,i){void 0===i&&(i=null),this.add(1,1,t,e,i)},t.prototype.callDelay=function(t,e,i,n){void 0===n&&(n=null),this.add(t,1,e,i,n)},t.prototype.callBy24Fps=function(e,i,n){void 0===n&&(n=null),this.add(t.FPS24,0,e,i,n)},t.prototype.exists=function(t,e){var i=this.findItem(t,e);return null!=i},t.prototype.remove=function(t,e){var i=this.findItem(t,e);if(i){var n=this._items.indexOf(i);this._items.splice(n,1),n<this._enumI&&this._enumI--,this._enumCount--,i.reset(),this._itemPool.push(i)}},t.prototype.__timer=function(e){for(t.time=e,t.deltaTime=e-this._lastTime,this._lastTime=e,this._enumI=0,this._enumCount=this._items.length;this._enumI<this._enumCount;){var i=this._items[this._enumI];this._enumI++,i.advance(t.deltaTime)&&(i.end&&(this._enumI--,this._enumCount--,this._items.splice(this._enumI,1)),i.hasParam?i.callback.call(i.thisObj,i.param):i.callback.call(i.thisObj),i.end&&(i.reset(),this._itemPool.push(i)))}return!1},t.deltaTime=0,t.time=0,t.inst=new t,t.FPS24=1e3/24,t}();t.GTimers=e,__reflect(e.prototype,"fairygui.GTimers");var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}return t.prototype.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay?(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),this.repeat>0&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0):!1},t.prototype.reset=function(){this.callback=null,this.thisObj=null,this.param=null},t}();__reflect(i.prototype,"TimerItem")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._dragOffset=new egret.Point,e._scrollPerc=0,e}return __extends(e,t),e.prototype.setScrollPane=function(t,e){this._target=t,this._vertical=e},Object.defineProperty(e.prototype,"displayPerc",{set:function(t){this._vertical?(this._fixedGripSize||(this._grip.height=t*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=t*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollPerc",{set:function(t){this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minSize",{get:function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)},enumerable:!0,configurable:!0}),e.prototype.constructExtension=function(t){return t.seek(0,6),this._fixedGripSize=t.readBool(),this._grip=this.getChild("grip"),this._grip?(this._bar=this.getChild("bar"),this._bar?(this._arrowButton1=this.getChild("arrow1"),this._arrowButton2=this.getChild("arrow2"),this._grip.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__gripMouseDown,this),this._arrowButton1&&this._arrowButton1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__arrowButton1Click,this),this._arrowButton2&&this._arrowButton2.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__arrowButton2Click,this),void this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__barMouseDown,this)):void console.error("需要定义bar")):void console.error("需要定义grip")},e.prototype.__gripMouseDown=function(t){this._bar&&(t.stopPropagation(),this.globalToLocal(t.stageX,t.stageY,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y,this._grip.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._grip.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this))},e.prototype.__gripMouseMove=function(t){if(this.onStage){var i=this.globalToLocal(t.stageX,t.stageY,e.sScrollbarHelperPoint);if(this._vertical){var n=i.y-this._dragOffset.y;this._target.setPercY((n-this._bar.y)/(this._bar.height-this._grip.height),!1)}else{var o=i.x-this._dragOffset.x;this._target.setPercX((o-this._bar.x)/(this._bar.width-this._grip.width),!1)}}},e.prototype.__gripMouseUp=function(t){var e=t.currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},e.prototype.__arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft()},e.prototype.__arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight()},e.prototype.__barMouseDown=function(t){var i=this._grip.globalToLocal(t.stageX,t.stageY,e.sScrollbarHelperPoint);this._vertical?i.y<0?this._target.scrollUp(4):this._target.scrollDown(4):i.x<0?this._target.scrollLeft(4):this._target.scrollRight(4)},e.sScrollbarHelperPoint=new egret.Point,e}(t.GComponent);t.GScrollBar=e,__reflect(e.prototype,"fairygui.GScrollBar")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._max=0,i._value=0,i._reverse=!1,i._barMaxWidth=0,i._barMaxHeight=0,i._barMaxWidthDelta=0,i._barMaxHeightDelta=0,i._clickPercent=0,i._barStartX=0,i._barStartY=0,i.changeOnClick=!0,i.canDrag=!0,i._titleType=t.ProgressTitleType.Percent,i._value=50,i._max=100,i._clickPos=new egret.Point,i}return __extends(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this._titleType},set:function(t){this._titleType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.update())},enumerable:!0,configurable:!0}),i.prototype.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t)},i.prototype.updateWidthPercent=function(e){if(this._titleObject)switch(this._titleType){case t.ProgressTitleType.Percent:this._titleObject.text=Math.round(100*e)+"%";break;case t.ProgressTitleType.ValueAndMax:this._titleObject.text=this._value+"/"+this._max;break;case t.ProgressTitleType.Value:this._titleObject.text=""+this._value;break;case t.ProgressTitleType.Max:this._titleObject.text=""+this._max}var i=this.width-this._barMaxWidthDelta,n=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(i*e),this._barObjectH.x=this._barStartX+(i-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(n*e),this._barObjectV.y=this._barStartY+(n-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(i*e)),this._barObjectV&&(this._barObjectV.height=Math.round(n*e)))},i.prototype.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._gripObject=this.getChild("grip"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y),this._gripObject&&this._gripObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__gripMouseDown,this),this.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__barMouseDown,this)},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update()},i.prototype.setup_afterAdd=function(t,i){return e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)?t.readByte()!=this.packageItem.objectType?void this.update():(this._value=t.readInt(),this._max=t.readInt(),void this.update()):void this.update()},i.prototype.__gripMouseDown=function(t){this.canDrag=!0,t.stopPropagation(),this._clickPos=this.globalToLocal(t.stageX,t.stageY),this._clickPercent=this._value/this._max,this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},i.prototype.__gripMouseMove=function(e){if(this.canDrag){var n=this.globalToLocal(e.stageX,e.stageY,i.sSilderHelperPoint),o=n.x-this._clickPos.x,r=n.y-this._clickPos.y;this._reverse&&(o=-o,r=-r);var s;s=this._barObjectH?this._clickPercent+o/this._barMaxWidth:this._clickPercent+r/this._barMaxHeight,s>1?s=1:0>s&&(s=0);var a=Math.round(this._max*s);a!=this._value&&(this._value=a,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))),this.updateWidthPercent(s)}},i.prototype.__gripMouseUp=function(t){t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},i.prototype.__barMouseDown=function(e){if(this.changeOnClick){var n,o=this._gripObject.globalToLocal(e.stageX,e.stageY,i.sSilderHelperPoint),r=this._value/this._max;this._barObjectH&&(n=(o.x-this._gripObject.width/2)/this._barMaxWidth),this._barObjectV&&(n=(o.y-this._gripObject.height/2)/this._barMaxHeight),this._reverse?r-=n:r+=n,r>1?r=1:0>r&&(r=0);var s=Math.round(this._max*r);s!=this._value&&(this._value=s,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))),this.updateWidthPercent(r)}},i.sSilderHelperPoint=new egret.Point,i}(t.GComponent);t.GSlider=e,__reflect(e.prototype,"fairygui.GSlider")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._widthAutoSize=!1,t._heightAutoSize=!1,t.displayObject.touchChildren=!0,t._textField.type=egret.TextFieldType.INPUT,t._textField.addEventListener(egret.Event.CHANGE,t.__textChanged,t),t._textField.addEventListener(egret.FocusEvent.FOCUS_IN,t.__focusIn,t),t._textField.addEventListener(egret.FocusEvent.FOCUS_OUT,t.__focusOut,t),t}return __extends(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"editable",{get:function(){return this._textField.type==egret.TextFieldType.INPUT},set:function(t){t?this._textField.type=egret.TextFieldType.INPUT:this._textField.type=egret.TextFieldType.DYNAMIC},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLength",{get:function(){return this._textField.maxChars},set:function(t){this._textField.maxChars=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"promptText",{get:function(){return this._promptText},set:function(t){this._promptText=t,this.updateTextFieldText()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restrict",{get:function(){return this._textField.restrict},set:function(t){this._textField.restrict=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"password",{get:function(){return this._password},set:function(t){this._password!=t&&(this._password=t,this._textField.displayAsPassword=this._password,t?this._textField.inputType=egret.TextFieldInputType.PASSWORD:this._textField.inputType=egret.TextFieldInputType.TEXT,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.updateVertAlign())},enumerable:!0,configurable:!0}),i.prototype.updateVertAlign=function(){switch(this._verticalAlign){case t.VertAlignType.Top:this._textField.verticalAlign=egret.VerticalAlign.TOP;break;case t.VertAlignType.Middle:this._textField.verticalAlign=egret.VerticalAlign.MIDDLE;break;case t.VertAlignType.Bottom:this._textField.verticalAlign=egret.VerticalAlign.BOTTOM}},i.prototype.updateTextFieldText=function(){!this._text&&this._promptText?(this._textField.displayAsPassword=!1,this._textField.textFlow=(new egret.HtmlTextParser).parser(t.ToolSet.parseUBB(this._promptText))):(this._textField.displayAsPassword=this._password,this._ubbEnabled?this._textField.textFlow=(new egret.HtmlTextParser).parser(t.ToolSet.parseUBB(t.ToolSet.encodeHTML(this._text))):this._textField.text=this._text)},i.prototype.handleSizeChanged=function(){this._updatingSize||(this._textField.width=Math.ceil(this.width),this._textField.height=Math.ceil(this.height))},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,4);var n=t.readS();null!=n&&(this._promptText=n),n=t.readS(),null!=n&&(this._textField.restrict=n);var o=t.readInt();0!=o&&(this._textField.maxChars=o),o=t.readInt(),t.readBool()&&(this.password=!0),this.updateVertAlign()},i.prototype.setup_afterAdd=function(i,n){e.prototype.setup_afterAdd.call(this,i,n),!this._text&&this._promptText&&(this._textField.displayAsPassword=!1,this._textField.textFlow=(new egret.HtmlTextParser).parser(t.ToolSet.parseUBB(t.ToolSet.encodeHTML(this._promptText))))},i.prototype.__textChanged=function(t){this._text=this._textField.text},i.prototype.__focusIn=function(t){!this._text&&this._promptText&&(this._textField.displayAsPassword=this._password,this._textField.text="")},i.prototype.__focusOut=function(e){this._text=this._textField.text,!this._text&&this._promptText&&(this._textField.displayAsPassword=!1,this._textField.textFlow=(new egret.HtmlTextParser).parser(t.ToolSet.parseUBB(t.ToolSet.encodeHTML(this._promptText))))},i}(t.GTextField);t.GTextInput=e,__reflect(e.prototype,"fairygui.GTextInput")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"controller",{set:function(t){this._controller=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._id?this._controller.getPageIndexById(this._id):-1},set:function(t){this._id=this._controller.getPageId(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._id?this._controller.getPageNameById(this._id):null},set:function(t){this._id=this._controller.getPageIdByName(t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._id=null},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),t}();t.PageOption=e,__reflect(e.prototype,"fairygui.PageOption")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(e){if(void 0===e&&(e=null),!e&&(e=t.UIConfig.popupMenu,!e))throw"UIConfig.popupMenu not defined";this._contentPane=t.UIPackage.createObjectFromURL(e).asCom,this._contentPane.addEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this),this._list=this._contentPane.getChild("list"),this._list.removeChildrenToPool(),this._list.addRelation(this._contentPane,t.RelationType.Width),this._list.removeRelation(this._contentPane,t.RelationType.Height),this._contentPane.addRelation(this._list,t.RelationType.Height),this._list.addEventListener(t.ItemEvent.CLICK,this.__clickItem,this)}return e.prototype.dispose=function(){this._contentPane.dispose()},e.prototype.addItem=function(t,e){void 0===e&&(e=null);var i=this._list.addItemFromPool().asButton;i.title=t,i.data=e,i.grayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},e.prototype.addItemAt=function(t,e,i){void 0===i&&(i=null);var n=this._list.getFromPool().asButton;this._list.addChildAt(n,e),n.title=t,n.data=i,n.grayed=!1;var o=n.getController("checked");return null!=o&&(o.selectedIndex=0),n},e.prototype.addSeperator=function(){if(null==t.UIConfig.popupMenu_seperator)throw"UIConfig.popupMenu_seperator not defined";this.list.addItemFromPool(t.UIConfig.popupMenu_seperator)},e.prototype.getItemName=function(t){var e=this._list.getChildAt(t);return e.name},e.prototype.setItemText=function(t,e){var i=this._list.getChild(t).asButton;i.title=e},e.prototype.setItemVisible=function(t,e){var i=this._list.getChild(t).asButton;i.visible!=e&&(i.visible=e,this._list.setBoundsChangedFlag())},e.prototype.setItemGrayed=function(t,e){var i=this._list.getChild(t).asButton;i.grayed=e},e.prototype.setItemCheckable=function(t,e){var i=this._list.getChild(t).asButton,n=i.getController("checked");null!=n&&(e?0==n.selectedIndex&&(n.selectedIndex=1):n.selectedIndex=0)},e.prototype.setItemChecked=function(t,e){var i=this._list.getChild(t).asButton,n=i.getController("checked");null!=n&&(n.selectedIndex=e?2:1)},e.prototype.isItemChecked=function(t){var e=this._list.getChild(t).asButton,i=e.getController("checked");return null!=i?2==i.selectedIndex:!1},e.prototype.removeItem=function(t){var e=this._list.getChild(t);if(null!=e){var i=this._list.getChildIndex(e);return this._list.removeChildToPoolAt(i),!0}return!1},e.prototype.clearItems=function(){this._list.removeChildrenToPool()},Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._list.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.show=function(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=null!=e?e.root:t.GRoot.inst;n.showPopup(this.contentPane,e instanceof t.GRoot?null:e,i)},e.prototype.__clickItem=function(e){t.GTimers.inst.add(100,1,this.__clickItem2,this,e)},e.prototype.__clickItem2=function(t){var e=t.itemObject.asButton;if(null!=e){if(e.grayed)return void(this._list.selectedIndex=-1);var i=e.getController("checked");null!=i&&0!=i.selectedIndex&&(1==i.selectedIndex?i.selectedIndex=2:i.selectedIndex=1);var n=this._contentPane.parent;n.hidePopup(this.contentPane),null!=e.data&&(1==e.data.length?e.data(t):e.data())}},e.prototype.__addedToStage=function(t){this._list.selectedIndex=-1,this._list.resizeToFit(1e5,10)},e}();t.PopupMenu=e,__reflect(e.prototype,"fairygui.PopupMenu")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._owner=t,this._defs=new Array}return Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target))},enumerable:!0,configurable:!0}),e.prototype.add=function(e,i){if(e==t.RelationType.Size)return this.add(t.RelationType.Width,i),void this.add(t.RelationType.Height,i);for(var n=this._defs.length,o=0;n>o;o++){var r=this._defs[o];if(r.type==e)return}this.internalAdd(e,i)},e.prototype.internalAdd=function(e,n){if(e==t.RelationType.Size)return this.internalAdd(t.RelationType.Width,n),void this.internalAdd(t.RelationType.Height,n);var o=new i;o.percent=n,o.type=e,o.axis=e<=t.RelationType.Right_Right||e==t.RelationType.Width||e>=t.RelationType.LeftExt_Left&&e<=t.RelationType.RightExt_Right?0:1,this._defs.push(o),(n||e==t.RelationType.Left_Center||e==t.RelationType.Center_Center||e==t.RelationType.Right_Center||e==t.RelationType.Top_Middle||e==t.RelationType.Middle_Middle||e==t.RelationType.Bottom_Middle)&&(this._owner.pixelSnapping=!0)},e.prototype.remove=function(e){if(void 0===e&&(e=0),e==t.RelationType.Size)return this.remove(t.RelationType.Width),void this.remove(t.RelationType.Height);for(var i=this._defs.length,n=0;i>n;n++)if(this._defs[n].type==e){this._defs.splice(n,1);break}},e.prototype.copyFrom=function(t){this.target=t.target,this._defs.length=0;for(var e=t._defs.length,n=0;e>n;n++){var o=t._defs[n],r=new i;r.copyFrom(o),this._defs.push(r)}},e.prototype.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this._defs.length},enumerable:!0,configurable:!0}),e.prototype.applyOnSelfResized=function(e,i,n){for(var o=this._owner.x,r=this._owner.y,s=this._defs.length,a=0;s>a;a++){var h=this._defs[a];switch(h.type){case t.RelationType.Center_Center:this._owner.x-=(.5-(n?this._owner.pivotX:0))*e;break;case t.RelationType.Right_Center:case t.RelationType.Right_Left:case t.RelationType.Right_Right:this._owner.x-=(1-(n?this._owner.pivotX:0))*e;break;case t.RelationType.Middle_Middle:this._owner.y-=(.5-(n?this._owner.pivotY:0))*i;break;case t.RelationType.Bottom_Middle:case t.RelationType.Bottom_Top:case t.RelationType.Bottom_Bottom:this._owner.y-=(1-(n?this._owner.pivotY:0))*i}}if((o!=this._owner.x||r!=this._owner.y)&&(o=this._owner.x-o,r=this._owner.y-r,this._owner.updateGearFromRelations(1,o,r),null!=this._owner.parent)){var l=this._owner.parent._transitions.length;if(l>0)for(var a=0;l>a;++a)this._owner.parent._transitions[a].updateFromRelations(this._owner.id,o,r)}},e.prototype.applyOnXYChanged=function(e,i,n){var o;switch(e.type){case t.RelationType.Left_Left:case t.RelationType.Left_Center:case t.RelationType.Left_Right:case t.RelationType.Center_Center:case t.RelationType.Right_Left:case t.RelationType.Right_Center:case t.RelationType.Right_Right:this._owner.x+=i;break;case t.RelationType.Top_Top:case t.RelationType.Top_Middle:case t.RelationType.Top_Bottom:case t.RelationType.Middle_Middle:case t.RelationType.Bottom_Top:case t.RelationType.Bottom_Middle:case t.RelationType.Bottom_Bottom:this._owner.y+=n;break;case t.RelationType.Width:case t.RelationType.Height:break;case t.RelationType.LeftExt_Left:case t.RelationType.LeftExt_Right:o=this._owner.xMin,this._owner.width=this._owner._rawWidth-i,this._owner.xMin=o+i;break;case t.RelationType.RightExt_Left:case t.RelationType.RightExt_Right:o=this._owner.xMin,this._owner.width=this._owner._rawWidth+i,this._owner.xMin=o;break;case t.RelationType.TopExt_Top:case t.RelationType.TopExt_Bottom:o=this._owner.yMin,this._owner.height=this._owner._rawHeight-n,this._owner.yMin=o+n;break;case t.RelationType.BottomExt_Top:case t.RelationType.BottomExt_Bottom:o=this._owner.yMin,this._owner.height=this._owner._rawHeight+n,this._owner.yMin=o}},e.prototype.applyOnSizeChanged=function(e){var i,n,o=0,r=0,s=0;switch(0==e.axis?(this._target!=this._owner.parent&&(o=this._target.x,this._target.pivotAsAnchor&&(r=this._target.pivotX)),e.percent?0!=this._targetWidth&&(s=this._target._width/this._targetWidth):s=this._target._width-this._targetWidth):(this._target!=this._owner.parent&&(o=this._target.y,this._target.pivotAsAnchor&&(r=this._target.pivotY)),e.percent?0!=this._targetHeight&&(s=this._target._height/this._targetHeight):s=this._target._height-this._targetHeight),e.type){case t.RelationType.Left_Left:e.percent?this._owner.xMin=o+(this._owner.xMin-o)*s:0!=r&&(this._owner.x+=s*-r);break;case t.RelationType.Left_Center:e.percent?this._owner.xMin=o+(this._owner.xMin-o)*s:this._owner.x+=s*(.5-r);break;case t.RelationType.Left_Right:e.percent?this._owner.xMin=o+(this._owner.xMin-o)*s:this._owner.x+=s*(1-r);break;case t.RelationType.Center_Center:e.percent?this._owner.xMin=o+(this._owner.xMin+.5*this._owner._rawWidth-o)*s-.5*this._owner._rawWidth:this._owner.x+=s*(.5-r);break;case t.RelationType.Right_Left:e.percent?this._owner.xMin=o+(this._owner.xMin+this._owner._rawWidth-o)*s-this._owner._rawWidth:0!=r&&(this._owner.x+=s*-r);break;case t.RelationType.Right_Center:e.percent?this._owner.xMin=o+(this._owner.xMin+this._owner._rawWidth-o)*s-this._owner._rawWidth:this._owner.x+=s*(.5-r);break;case t.RelationType.Right_Right:e.percent?this._owner.xMin=o+(this._owner.xMin+this._owner._rawWidth-o)*s-this._owner._rawWidth:this._owner.x+=s*(1-r);break;case t.RelationType.Top_Top:e.percent?this._owner.yMin=o+(this._owner.yMin-o)*s:0!=r&&(this._owner.y+=s*-r);break;case t.RelationType.Top_Middle:e.percent?this._owner.yMin=o+(this._owner.yMin-o)*s:this._owner.y+=s*(.5-r);break;case t.RelationType.Top_Bottom:e.percent?this._owner.yMin=o+(this._owner.yMin-o)*s:this._owner.y+=s*(1-r);break;case t.RelationType.Middle_Middle:e.percent?this._owner.yMin=o+(this._owner.yMin+.5*this._owner._rawHeight-o)*s-.5*this._owner._rawHeight:this._owner.y+=s*(.5-r);break;case t.RelationType.Bottom_Top:e.percent?this._owner.yMin=o+(this._owner.yMin+this._owner._rawHeight-o)*s-this._owner._rawHeight:0!=r&&(this._owner.y+=s*-r);break;case t.RelationType.Bottom_Middle:e.percent?this._owner.yMin=o+(this._owner.yMin+this._owner._rawHeight-o)*s-this._owner._rawHeight:this._owner.y+=s*(.5-r);break;case t.RelationType.Bottom_Bottom:e.percent?this._owner.yMin=o+(this._owner.yMin+this._owner._rawHeight-o)*s-this._owner._rawHeight:this._owner.y+=s*(1-r);break;case t.RelationType.Width:i=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth,e.percent&&(i*=s),this._target==this._owner.parent?this._owner.pivotAsAnchor?(n=this._owner.xMin,this._owner.setSize(this._target._width+i,this._owner._rawHeight,!0),this._owner.xMin=n):this._owner.setSize(this._target._width+i,this._owner._rawHeight,!0):this._owner.width=this._target._width+i;break;case t.RelationType.Height:i=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight,e.percent&&(i*=s),this._target==this._owner.parent?this._owner.pivotAsAnchor?(n=this._owner.yMin,this._owner.setSize(this._owner._rawWidth,this._target._height+i,!0),this._owner.yMin=n):this._owner.setSize(this._owner._rawWidth,this._target._height+i,!0):this._owner.height=this._target._height+i;break;case t.RelationType.LeftExt_Left:n=this._owner.xMin,i=e.percent?o+(n-o)*s-n:s*-r,this._owner.width=this._owner._rawWidth-i,this._owner.xMin=n+i;break;case t.RelationType.LeftExt_Right:n=this._owner.xMin,i=e.percent?o+(n-o)*s-n:s*(1-r),this._owner.width=this._owner._rawWidth-i,this._owner.xMin=n+i;break;case t.RelationType.RightExt_Left:n=this._owner.xMin,i=e.percent?o+(n+this._owner._rawWidth-o)*s-(n+this._owner._rawWidth):s*-r,this._owner.width=this._owner._rawWidth+i,this._owner.xMin=n;break;case t.RelationType.RightExt_Right:n=this._owner.xMin,e.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=o+this._target._width-this._target._width*r+(this._owner.sourceWidth-o-this._target.initWidth+this._target.initWidth*r)*s:this._owner.width=o+(this._owner._rawWidth-o)*s:(i=o+(n+this._owner._rawWidth-o)*s-(n+this._owner._rawWidth),this._owner.width=this._owner._rawWidth+i,this._owner.xMin=n):this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-r):this._owner.width=this._owner._rawWidth+s*(1-r):(i=s*(1-r),this._owner.width=this._owner._rawWidth+i,this._owner.xMin=n);break;case t.RelationType.TopExt_Top:n=this._owner.yMin,i=e.percent?o+(n-o)*s-n:s*-r,this._owner.height=this._owner._rawHeight-i,this._owner.yMin=n+i;break;case t.RelationType.TopExt_Bottom:n=this._owner.yMin,i=e.percent?o+(n-o)*s-n:s*(1-r),this._owner.height=this._owner._rawHeight-i,this._owner.yMin=n+i;break;case t.RelationType.BottomExt_Top:n=this._owner.yMin,i=e.percent?o+(n+this._owner._rawHeight-o)*s-(n+this._owner._rawHeight):s*-r,this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n;break;case t.RelationType.BottomExt_Bottom:n=this._owner.yMin,e.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=o+this._target._height-this._target._height*r+(this._owner.sourceHeight-o-this._target.initHeight+this._target.initHeight*r)*s:this._owner.height=o+(this._owner._rawHeight-o)*s:(i=o+(n+this._owner._rawHeight-o)*s-(n+this._owner._rawHeight),this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n):this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-r):this._owner.height=this._owner._rawHeight+s*(1-r):(i=s*(1-r),this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n)
}},e.prototype.addRefTarget=function(e){e!=this._owner.parent&&e.addEventListener(t.GObject.XY_CHANGED,this.__targetXYChanged,this),e.addEventListener(t.GObject.SIZE_CHANGED,this.__targetSizeChanged,this),e.addEventListener(t.GObject.SIZE_DELAY_CHANGE,this.__targetSizeWillChange,this),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._width,this._targetHeight=this._target._height},e.prototype.releaseRefTarget=function(e){e.removeEventListener(t.GObject.XY_CHANGED,this.__targetXYChanged,this),e.removeEventListener(t.GObject.SIZE_CHANGED,this.__targetSizeChanged,this),e.removeEventListener(t.GObject.SIZE_DELAY_CHANGE,this.__targetSizeWillChange,this)},e.prototype.__targetXYChanged=function(t){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)return this._targetX=this._target.x,void(this._targetY=this._target.y);this._owner.relations.handling=this._target;for(var e=this._owner.x,i=this._owner.y,n=this._target.x-this._targetX,o=this._target.y-this._targetY,r=this._defs.length,s=0;r>s;s++){var a=this._defs[s];this.applyOnXYChanged(a,n,o)}if(this._targetX=this._target.x,this._targetY=this._target.y,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(h>0)for(var s=0;h>s;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,e,i)}this._owner.relations.handling=null},e.prototype.__targetSizeChanged=function(t){if(null==this._owner.relations.handling){this._owner.relations.handling=this._target;for(var e=this._owner.x,i=this._owner.y,n=this._owner._rawWidth,o=this._owner._rawHeight,r=this._defs.length,s=0;r>s;s++){var a=this._defs[s];this.applyOnSizeChanged(a)}if(this._targetWidth=this._target._width,this._targetHeight=this._target._height,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(h>0)for(var s=0;h>s;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,e,i)}(n!=this._owner._rawWidth||o!=this._owner._rawHeight)&&(n=this._owner._rawWidth-n,o=this._owner._rawHeight-o,this._owner.updateGearFromRelations(2,n,o)),this._owner.relations.handling=null}},e.prototype.__targetSizeWillChange=function(t){this._owner.relations.sizeDirty=!0},e}();t.RelationItem=e,__reflect(e.prototype,"fairygui.RelationItem");var i=function(){function t(){}return t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type,this.axis=t.axis},t}();t.RelationDef=i,__reflect(i.prototype,"fairygui.RelationDef")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._owner=t,this._items=new Array}return e.prototype.add=function(e,i,n){void 0===n&&(n=!1);for(var o=this._items.length,r=0;o>r;r++){var s=this._items[r];if(s.target==e)return void s.add(i,n)}var a=new t.RelationItem(this._owner);a.target=e,a.add(i,n),this._items.push(a)},e.prototype.remove=function(t,e){void 0===e&&(e=0);for(var i=this._items.length,n=0;i>n;){var o=this._items[n];o.target==t?(o.remove(e),o.isEmpty?(o.dispose(),this._items.splice(n,1),i--):n++):n++}},e.prototype.contains=function(t){for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];if(n.target==t)return!0}return!1},e.prototype.clearFor=function(t){for(var e=this._items.length,i=0;e>i;){var n=this._items[i];n.target==t?(n.dispose(),this._items.splice(i,1),e--):i++}},e.prototype.clearAll=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.dispose()}this._items.length=0},e.prototype.copyFrom=function(e){this.clearAll();for(var i=e._items,n=i.length,o=0;n>o;o++){var r=i[o],s=new t.RelationItem(this._owner);s.copyFrom(r),this._items.push(s)}},e.prototype.dispose=function(){this.clearAll()},e.prototype.onOwnerSizeChanged=function(t,e,i){if(0!=this._items.length)for(var n=this._items.length,o=0;n>o;o++){var r=this._items[o];r.applyOnSelfResized(t,e,i)}},e.prototype.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.target.ensureSizeCorrect()}}},Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._items.length},enumerable:!0,configurable:!0}),e.prototype.setup=function(e,i){for(var n,o=e.readByte(),r=0;o>r;r++){var s=e.readShort();n=-1==s?this._owner.parent:i?this._owner.getChildAt(s):this._owner.parent.getChildAt(s);var a=new t.RelationItem(this._owner);a.target=n,this._items.push(a);for(var h=e.readByte(),l=0;h>l;l++){var u=e.readByte(),c=e.readBool();a.internalAdd(u,c)}}},e}();t.Relations=e,__reflect(e.prototype,"fairygui.Relations")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n._owner=i,n._maskContainer=new egret.DisplayObjectContainer,n._owner._rootContainer.addChild(n._maskContainer),n._container=n._owner._container,n._container.x=0,n._container.y=0,n._maskContainer.addChild(n._container),n._scrollBarMargin=new t.Margin,n._scrollBarVisible=!0,n._mouseWheelEnabled=!0,n._xPos=0,n._yPos=0,n._aniFlag=0,n._footerLockedSize=0,n._headerLockedSize=0,n._viewSize=new egret.Point,n._contentSize=new egret.Point,n._pageSize=new egret.Point(1,1),n._overlapSize=new egret.Point,n._tweenTime=new egret.Point,n._tweenStart=new egret.Point,n._tweenDuration=new egret.Point,n._tweenChange=new egret.Point,n._velocity=new egret.Point,n._containerPos=new egret.Point,n._beginTouchPos=new egret.Point,n._lastTouchPos=new egret.Point,n._lastTouchGlobalPos=new egret.Point,n._scrollStep=t.UIConfig.defaultScrollStep,n._mouseWheelStep=2*n._scrollStep,n._decelerationRate=t.UIConfig.defaultScrollDecelerationRate,n._owner.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.__touchBegin,n),n}return __extends(i,e),i.prototype.setup=function(e){this._scrollType=e.readByte();var i=e.readByte(),n=e.readInt();e.readBool()&&(this._scrollBarMargin.top=e.readInt(),this._scrollBarMargin.bottom=e.readInt(),this._scrollBarMargin.left=e.readInt(),this._scrollBarMargin.right=e.readInt());var o=e.readS(),r=e.readS(),s=e.readS(),a=e.readS();if(this._displayOnLeft=0!=(1&n),this._snapToItem=0!=(2&n),this._displayInDemand=0!=(4&n),this._pageMode=0!=(8&n),16&n?this._touchEffect=!0:32&n?this._touchEffect=!1:this._touchEffect=t.UIConfig.defaultScrollTouchEffect,64&n?this._bouncebackEffect=!0:128&n?this._bouncebackEffect=!1:this._bouncebackEffect=t.UIConfig.defaultScrollBounceEffect,this._inertiaDisabled=0!=(256&n),0==(512&n)&&(this._maskContainer.scrollRect=new egret.Rectangle),i==t.ScrollBarDisplayType.Default&&(i=t.UIConfig.defaultScrollBarDisplay),i!=t.ScrollBarDisplayType.Hidden){if(this._scrollType==t.ScrollType.Both||this._scrollType==t.ScrollType.Vertical){var h=o?o:t.UIConfig.verticalScrollBar;if(h){if(this._vtScrollBar=t.UIPackage.createObjectFromURL(h),!this._vtScrollBar)throw"cannot create scrollbar from "+h;this._vtScrollBar.setScrollPane(this,!0),this._owner._rootContainer.addChild(this._vtScrollBar.displayObject)}}if(this._scrollType==t.ScrollType.Both||this._scrollType==t.ScrollType.Horizontal){var h=r?r:t.UIConfig.horizontalScrollBar;if(h){if(this._hzScrollBar=t.UIPackage.createObjectFromURL(h),!this._hzScrollBar)throw"cannot create scrollbar from "+h;this._hzScrollBar.setScrollPane(this,!1),this._owner._rootContainer.addChild(this._hzScrollBar.displayObject)}}this._scrollBarDisplayAuto=i==t.ScrollBarDisplayType.Auto,this._scrollBarDisplayAuto&&(this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1))}if(s&&(this._header=t.UIPackage.createObjectFromURL(s),null==this._header))throw"cannot create scrollPane header from "+s;if(a&&(this._footer=t.UIPackage.createObjectFromURL(a),null==this._footer))throw"cannot create scrollPane footer from "+a;(null!=this._header||null!=this._footer)&&(this._refreshBarAxis=this._scrollType==t.ScrollType.Both||this._scrollType==t.ScrollType.Vertical?"y":"x"),this.setSize(this._owner.width,this._owner.height)},i.prototype.dispose=function(){0!=this._tweening&&egret.stopTick(this.tweenUpdate,this),this._pageController=null,null!=this._hzScrollBar&&this._hzScrollBar.dispose(),null!=this._vtScrollBar&&this._vtScrollBar.dispose(),null!=this._header&&this._header.dispose(),null!=this._footer&&this._footer.dispose()},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hzScrollBar",{get:function(){return this._hzScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vtScrollBar",{get:function(){return this._vtScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bouncebackEffect",{get:function(){return this._bouncebackEffect},set:function(t){this._bouncebackEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"touchEffect",{get:function(){return this._touchEffect},set:function(t){this._touchEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollStep",{get:function(){return this._scrollStep},set:function(e){this._scrollStep=e,0==this._scrollStep&&(this._scrollStep=t.UIConfig.defaultScrollStep),this._mouseWheelStep=2*this._scrollStep},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"decelerationRate",{get:function(){return this._decelerationRate},set:function(t){this._decelerationRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"snapToItem",{get:function(){return this._snapToItem},set:function(t){this._snapToItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"percX",{get:function(){return 0==this._overlapSize.x?0:this._xPos/this._overlapSize.x},set:function(t){this.setPercX(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPercX=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this.setPosX(this._overlapSize.x*t.ToolSet.clamp01(e),i)},Object.defineProperty(i.prototype,"percY",{get:function(){return 0==this._overlapSize.y?0:this._yPos/this._overlapSize.y},set:function(t){this.setPercY(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPercY=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this.setPosY(this._overlapSize.y*t.ToolSet.clamp01(e),i)},Object.defineProperty(i.prototype,"posX",{get:function(){return this._xPos},set:function(t){this.setPosX(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPosX=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(e=this.loopCheckingNewPos(e,"x")),e=t.ToolSet.clamp(e,0,this._overlapSize.x),e!=this._xPos&&(this._xPos=e,this.posChanged(i))},Object.defineProperty(i.prototype,"posY",{get:function(){return this._yPos},set:function(t){this.setPosY(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPosY=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(e=this.loopCheckingNewPos(e,"y")),e=t.ToolSet.clamp(e,0,this._overlapSize.y),e!=this._yPos&&(this._yPos=e,this.posChanged(i))},Object.defineProperty(i.prototype,"contentWidth",{get:function(){return this._contentSize.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){return this._contentSize.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewWidth",{get:function(){return this._viewSize.x},set:function(t){t=t+this._owner.margin.left+this._owner.margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewHeight",{get:function(){return this._viewSize.y},set:function(t){t=t+this._owner.margin.top+this._owner.margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPageX",{get:function(){if(!this._pageMode)return 0;var t=Math.floor(this._xPos/this._pageSize.x);return this._xPos-t*this._pageSize.x>.5*this._pageSize.x&&t++,t},set:function(t){this.setCurrentPageX(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPageY",{get:function(){if(!this._pageMode)return 0;var t=Math.floor(this._yPos/this._pageSize.y);return this._yPos-t*this._pageSize.y>.5*this._pageSize.y&&t++,t},set:function(t){this.setCurrentPageY(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setCurrentPageX=function(t,e){this._pageMode&&this._overlapSize.x>0&&this.setPosX(t*this._pageSize.x,e)},i.prototype.setCurrentPageY=function(t,e){this._pageMode&&this._overlapSize.y>0&&this.setPosY(t*this._pageSize.y,e)},Object.defineProperty(i.prototype,"isBottomMost",{get:function(){return this._yPos==this._overlapSize.y||0==this._overlapSize.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isRightMost",{get:function(){return this._xPos==this._overlapSize.x||0==this._overlapSize.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageController",{get:function(){return this._pageController},set:function(t){this._pageController=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollingPosX",{get:function(){return t.ToolSet.clamp(-this._container.x,0,this._overlapSize.x)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollingPosY",{get:function(){return t.ToolSet.clamp(-this._container.y,0,this._overlapSize.y)},enumerable:!0,configurable:!0}),i.prototype.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},i.prototype.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},i.prototype.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos-this._pageSize.y*t,e):this.setPosY(this._yPos-this._scrollStep*t,e)},i.prototype.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos+this._pageSize.y*t,e):this.setPosY(this._yPos+this._scrollStep*t,e)},i.prototype.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos-this._pageSize.x*t,e):this.setPosX(this._xPos-this._scrollStep*t,e)},i.prototype.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos+this._pageSize.x*t,e):this.setPosX(this._xPos+this._scrollStep*t,e)},i.prototype.scrollToView=function(e,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1),this._owner.ensureBoundsCorrect(),this._needRefresh&&this.refresh();var r;if(e instanceof t.GObject?e.parent!=this._owner?(e.parent.localToGlobalRect(e.x,e.y,e.width,e.height,i.sHelperRect),r=this._owner.globalToLocalRect(i.sHelperRect.x,i.sHelperRect.y,i.sHelperRect.width,i.sHelperRect.height,i.sHelperRect)):(r=i.sHelperRect,r.setTo(e.x,e.y,e.width,e.height)):r=e,this._overlapSize.y>0){var s=this._yPos+this._viewSize.y;o||r.y<=this._yPos||r.height>=this._viewSize.y?this._pageMode?this.setPosY(Math.floor(r.y/this._pageSize.y)*this._pageSize.y,n):this.setPosY(r.y,n):r.y+r.height>s&&(this._pageMode?this.setPosY(Math.floor(r.y/this._pageSize.y)*this._pageSize.y,n):r.height<=this._viewSize.y/2?this.setPosY(r.y+2*r.height-this._viewSize.y,n):this.setPosY(r.y+r.height-this._viewSize.y,n))}if(this._overlapSize.x>0){var a=this._xPos+this._viewSize.x;o||r.x<=this._xPos||r.width>=this._viewSize.x?this._pageMode?this.setPosX(Math.floor(r.x/this._pageSize.x)*this._pageSize.x,n):this.setPosX(r.x,n):r.x+r.width>a&&(this._pageMode?this.setPosX(Math.floor(r.x/this._pageSize.x)*this._pageSize.x,n):r.width<=this._viewSize.x/2?this.setPosX(r.x+2*r.width-this._viewSize.x,n):this.setPosX(r.x+r.width-this._viewSize.x,n))}!n&&this._needRefresh&&this.refresh()},i.prototype.isChildInView=function(t){if(this._overlapSize.y>0){var e=t.y+this._container.y;if(e<-t.height||e>this._viewSize.y)return!1}return this._overlapSize.x>0&&(e=t.x+this._container.x,e<-t.width||e>this._viewSize.x)?!1:!0},i.prototype.cancelDragging=function(){this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__touchMove,this),this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_END,this.__touchEnd,this),this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__touchTap,this),i.draggingPane==this&&(i.draggingPane=null),i._gestureFlag=0,this.isDragged=!1,this._maskContainer.touchChildren=!0},i.prototype.lockHeader=function(t){this._headerLockedSize!=t&&(this._headerLockedSize=t,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]>=0&&(this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0),this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(i.TWEEN_TIME_DEFAULT,i.TWEEN_TIME_DEFAULT),this._tweenTime.setTo(0,0),this._tweening=2,egret.startTick(this.tweenUpdate,this)))},i.prototype.lockFooter=function(t){if(this._footerLockedSize!=t&&(this._footerLockedSize=t,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]<=-this._overlapSize[this._refreshBarAxis])){this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0);var e=this._overlapSize[this._refreshBarAxis];0==e?e=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):e+=this._footerLockedSize,this._tweenChange[this._refreshBarAxis]=-e-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(i.TWEEN_TIME_DEFAULT,i.TWEEN_TIME_DEFAULT),this._tweenTime.setTo(0,0),this._tweening=2,egret.startTick(this.tweenUpdate,this)}},i.prototype.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height),this.posChanged(!1)},i.prototype.handleControllerChanged=function(e){this._pageController==e&&(this._scrollType==t.ScrollType.Horizontal?this.setCurrentPageX(e.selectedIndex,!0):this.setCurrentPageY(e.selectedIndex,!0))},i.prototype.updatePageController=function(){if(null!=this._pageController&&!this._pageController.changing){var e;if(e=this._scrollType==t.ScrollType.Horizontal?this.currentPageX:this.currentPageY,e<this._pageController.pageCount){var i=this._pageController;this._pageController=null,i.selectedIndex=e,this._pageController=i}}},i.prototype.adjustMaskContainer=function(){var t,e;t=this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),e=Math.floor(this._owner.margin.top),this._maskContainer.x=t,this._maskContainer.y=e,0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new egret.DisplayObjectContainer,this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.x=this._owner._alignOffset.x,this._alignContainer.y=this._owner._alignOffset.y):this._alignContainer&&(this._alignContainer.x=this._alignContainer.y=0)},i.prototype.setSize=function(t,e){this.adjustMaskContainer(),this._hzScrollBar&&(this._hzScrollBar.y=e-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=t-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._displayOnLeft?this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width:this._hzScrollBar.x=this._scrollBarMargin.left):(this._hzScrollBar.width=t-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=t-this._vtScrollBar.width),this._hzScrollBar?this._vtScrollBar.height=e-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:this._vtScrollBar.height=e-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),this._viewSize.x=t,this._viewSize.y=e,this._hzScrollBar&&!this._hScrollNone&&(this._viewSize.y-=this._hzScrollBar.height),this._vtScrollBar&&!this._vScrollNone&&(this._viewSize.x-=this._vtScrollBar.width),this._viewSize.x-=this._owner.margin.left+this._owner.margin.right,this._viewSize.y-=this._owner.margin.top+this._owner.margin.bottom,this._viewSize.x=Math.max(1,this._viewSize.x),this._viewSize.y=Math.max(1,this._viewSize.y),this._pageSize.x=this._viewSize.x,this._pageSize.y=this._viewSize.y,this.handleSizeChanged()},i.prototype.setContentSize=function(t,e){(this._contentSize.x!=t||this._contentSize.y!=e)&&(this._contentSize.x=t,this._contentSize.y=e,this.handleSizeChanged())},i.prototype.changeContentSizeOnScrolling=function(t,e,i,n){var o=this._xPos==this._overlapSize.x,r=this._yPos==this._overlapSize.y;this._contentSize.x+=t,this._contentSize.y+=e,this.handleSizeChanged(),1==this._tweening?(0!=t&&o&&this._tweenChange.x<0&&(this._xPos=this._overlapSize.x,this._tweenChange.x=-this._xPos-this._tweenStart.x),0!=e&&r&&this._tweenChange.y<0&&(this._yPos=this._overlapSize.y,this._tweenChange.y=-this._yPos-this._tweenStart.y)):2==this._tweening?(0!=i&&(this._container.x-=i,this._tweenStart.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._tweenStart.y-=n,this._yPos=-this._container.y)):this.isDragged?(0!=i&&(this._container.x-=i,this._containerPos.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._containerPos.y-=n,this._yPos=-this._container.y)):(0!=t&&o&&(this._xPos=this._overlapSize.x,this._container.x=-this._xPos),0!=e&&r&&(this._yPos=this._overlapSize.y,this._container.y=-this._yPos)),this._pageMode&&this.updatePageController()},i.prototype.handleSizeChanged=function(e){void 0===e&&(e=!1),this._displayInDemand&&(this._vtScrollBar&&(this._contentSize.y<=this._viewSize.y?this._vScrollNone||(this._vScrollNone=!0,this._viewSize.x+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewSize.x-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentSize.x<=this._viewSize.x?this._hScrollNone||(this._hScrollNone=!0,this._viewSize.y+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewSize.y-=this._hzScrollBar.height))),this._vtScrollBar&&(this._viewSize.y<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,0==this._contentSize.y?this._vtScrollBar.displayPerc=0:this._vtScrollBar.displayPerc=Math.min(1,this._viewSize.y/this._contentSize.y))),this._hzScrollBar&&(this._viewSize.x<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,0==this._contentSize.x?this._hzScrollBar.displayPerc=0:this._hzScrollBar.displayPerc=Math.min(1,this._viewSize.x/this._contentSize.x)));var i=this._maskContainer.scrollRect;if(i&&(i.width=this._viewSize.x,i.height=this._viewSize.y,this._maskContainer.scrollRect=i),this._scrollType==t.ScrollType.Horizontal||this._scrollType==t.ScrollType.Both?this._overlapSize.x=Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x)):this._overlapSize.x=0,this._scrollType==t.ScrollType.Vertical||this._scrollType==t.ScrollType.Both?this._overlapSize.y=Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y)):this._overlapSize.y=0,this._xPos=t.ToolSet.clamp(this._xPos,0,this._overlapSize.x),this._yPos=t.ToolSet.clamp(this._yPos,0,this._overlapSize.y),null!=this._refreshBarAxis){var n=this._overlapSize[this._refreshBarAxis];0==n?n=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):n+=this._footerLockedSize,"x"==this._refreshBarAxis?(this._container.x=t.ToolSet.clamp(this._container.x,-n,this._headerLockedSize),this._container.y=t.ToolSet.clamp(this._container.y,-this._overlapSize.y,0)):(this._container.x=t.ToolSet.clamp(this._container.x,-this._overlapSize.x,0),this._container.y=t.ToolSet.clamp(this._container.y,-n,this._headerLockedSize)),null!=this._header&&("x"==this._refreshBarAxis?this._header.height=this._viewSize.y:this._header.width=this._viewSize.x),null!=this._footer&&("y"==this._refreshBarAxis?this._footer.height=this._viewSize.y:this._footer.width=this._viewSize.x)}else this._container.x=t.ToolSet.clamp(this._container.x,-this._overlapSize.x,0),this._container.y=t.ToolSet.clamp(this._container.y,-this._overlapSize.y,0);this.syncScrollBar(!0),this.checkRefreshBar(),this._pageMode&&this.updatePageController()},i.prototype.posChanged=function(e){0==this._aniFlag?this._aniFlag=e?1:-1:1!=this._aniFlag||e||(this._aniFlag=-1),this._needRefresh=!0,t.GTimers.inst.callLater(this.refresh,this)},i.prototype.refresh=function(){this._needRefresh=!1,t.GTimers.inst.remove(this.refresh,this),(this._pageMode||this._snapToItem)&&(i.sEndPos.setTo(-this._xPos,-this._yPos),this.alignPosition(i.sEndPos,!1),this._xPos=-i.sEndPos.x,this._yPos=-i.sEndPos.y),this.refresh2(),this.dispatchEventWith(i.SCROLL,!1),this._needRefresh&&(this._needRefresh=!1,t.GTimers.inst.remove(this.refresh,this),this.refresh2()),this.syncScrollBar(),this._aniFlag=0},i.prototype.refresh2=function(){if(1!=this._aniFlag||this.isDragged)0!=this._tweening&&this.killTween(),this._container.x=Math.floor(-this._xPos),this._container.y=Math.floor(-this._yPos),this.loopCheckingCurrent();else{var t,e;this._overlapSize.x>0?t=-Math.floor(this._xPos):(0!=this._container.x&&(this._container.x=0),t=0),this._overlapSize.y>0?e=-Math.floor(this._yPos):(0!=this._container.y&&(this._container.y=0),e=0),t!=this._container.x||e!=this._container.y?(this._tweening=1,this._tweenTime.setTo(0,0),this._tweenDuration.setTo(i.TWEEN_TIME_GO,i.TWEEN_TIME_GO),this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(t-this._tweenStart.x,e-this._tweenStart.y),egret.startTick(this.tweenUpdate,this)):0!=this._tweening&&this.killTween()}this._pageMode&&this.updatePageController()},i.prototype.syncScrollBar=function(e){void 0===e&&(e=!1),null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._overlapSize.y?0:t.ToolSet.clamp(-this._container.y,0,this._overlapSize.y)/this._overlapSize.y,this._scrollBarDisplayAuto&&this.showScrollBar(!e)),null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._overlapSize.x?0:t.ToolSet.clamp(-this._container.x,0,this._overlapSize.x)/this._overlapSize.x,this._scrollBarDisplayAuto&&this.showScrollBar(!e)),e&&(this._maskContainer.touchChildren=!0)},i.prototype.__touchBegin=function(t){if(this._touchEffect){0!=this._tweening?(this.killTween(),this.isDragged=!0):this.isDragged=!1;var e=this._owner.globalToLocal(t.stageX,t.stageY,i.sHelperPoint);this._containerPos.setTo(this._container.x,this._container.y),this._beginTouchPos.setTo(e.x,e.y),this._lastTouchPos.setTo(e.x,e.y),this._lastTouchGlobalPos.setTo(t.stageX,t.stageY),this._isHoldAreaDone=!1,this._velocity.setTo(0,0),this._velocityScale=1,this._lastMoveTime=egret.getTimer()/1e3,this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__touchMove,this),this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__touchEnd,this),this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__touchTap,this)}},i.prototype.__touchMove=function(e){if(null!=this._owner.displayObject.stage&&this._touchEffect&&(null==i.draggingPane||i.draggingPane==this)&&null==t.GObject.draggingObject){var n,o,r,s,a=this._owner.globalToLocal(e.stageX,e.stageY,i.sHelperPoint),h=t.UIConfig.touchScrollSensitivity;if(this._scrollType==t.ScrollType.Vertical){if(!this._isHoldAreaDone){if(i._gestureFlag|=1,n=Math.abs(this._beginTouchPos.y-a.y),h>n)return;if(0!=(2&i._gestureFlag)&&(o=Math.abs(this._beginTouchPos.x-a.x),o>n))return}r=!0}else if(this._scrollType==t.ScrollType.Horizontal){if(!this._isHoldAreaDone){if(i._gestureFlag|=2,n=Math.abs(this._beginTouchPos.x-a.x),h>n)return;if(0!=(1&i._gestureFlag)&&(o=Math.abs(this._beginTouchPos.y-a.y),o>n))return}s=!0}else{if(i._gestureFlag=3,!this._isHoldAreaDone&&(n=Math.abs(this._beginTouchPos.y-a.y),h>n&&(n=Math.abs(this._beginTouchPos.x-a.x),h>n)))return;r=s=!0}var l=Math.floor(this._containerPos.x+a.x-this._beginTouchPos.x),u=Math.floor(this._containerPos.y+a.y-this._beginTouchPos.y);r&&(u>0?this._bouncebackEffect?null!=this._header&&0!=this._header.maxHeight?this._container.y=Math.floor(Math.min(.5*u,this._header.maxHeight)):this._container.y=Math.floor(Math.min(.5*u,this._viewSize.y*i.PULL_RATIO)):this._container.y=0:u<-this._overlapSize.y?this._bouncebackEffect?null!=this._footer&&this._footer.maxHeight>0?this._container.y=Math.floor(Math.max(.5*(u+this._overlapSize.y),-this._footer.maxHeight)-this._overlapSize.y):this._container.y=Math.floor(Math.max(.5*(u+this._overlapSize.y),-this._viewSize.y*i.PULL_RATIO)-this._overlapSize.y):this._container.y=-this._overlapSize.y:this._container.y=u),s&&(l>0?this._bouncebackEffect?null!=this._header&&0!=this._header.maxWidth?this._container.x=Math.floor(Math.min(.5*l,this._header.maxWidth)):this._container.x=Math.floor(Math.min(.5*l,this._viewSize.x*i.PULL_RATIO)):this._container.x=0:l<0-this._overlapSize.x?this._bouncebackEffect?null!=this._footer&&this._footer.maxWidth>0?this._container.x=Math.floor(Math.max(.5*(l+this._overlapSize.x),-this._footer.maxWidth)-this._overlapSize.x):this._container.x=Math.floor(Math.max(.5*(l+this._overlapSize.x),-this._viewSize.x*i.PULL_RATIO)-this._overlapSize.x):this._container.x=-this._overlapSize.x:this._container.x=l);var c=egret.getTimer()/1e3,_=Math.max(c-this._lastMoveTime,1/60),p=a.x-this._lastTouchPos.x,d=a.y-this._lastTouchPos.y;if(s||(p=0),r||(d=0),0!=_){var f=this._owner.displayObject.stage.frameRate,g=_*f-1;if(g>1){var y=Math.pow(.833,g);this._velocity.x=this._velocity.x*y,this._velocity.y=this._velocity.y*y}this._velocity.x=t.ToolSet.lerp(this._velocity.x,60*p/f/_,10*_),this._velocity.y=t.ToolSet.lerp(this._velocity.y,60*d/f/_,10*_)}var m=this._lastTouchGlobalPos.x-e.stageX,v=this._lastTouchGlobalPos.y-e.stageY;0!=p?this._velocityScale=Math.abs(m/p):0!=d&&(this._velocityScale=Math.abs(v/d)),this._lastTouchPos.setTo(a.x,a.y),this._lastTouchGlobalPos.setTo(e.stageX,e.stageY),this._lastMoveTime=c,this._overlapSize.x>0&&(this._xPos=t.ToolSet.clamp(-this._container.x,0,this._overlapSize.x)),this._overlapSize.y>0&&(this._yPos=t.ToolSet.clamp(-this._container.y,0,this._overlapSize.y)),0!=this._loop&&(l=this._container.x,u=this._container.y,this.loopCheckingCurrent()&&(this._containerPos.x+=this._container.x-l,this._containerPos.y+=this._container.y-u)),i.draggingPane=this,this._isHoldAreaDone=!0,this.isDragged=!0,this._maskContainer.touchChildren=!1,this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController(),this.dispatchEventWith(i.SCROLL,!1)}},i.prototype.__touchEnd=function(e){if(e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__touchMove,this),e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.__touchEnd,this),e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__touchTap,this),i.draggingPane==this&&(i.draggingPane=null),i._gestureFlag=0,!this.isDragged||!this._touchEffect||null==this._owner.displayObject.stage)return this.isDragged=!1,void(this._maskContainer.touchChildren=!0);this.isDragged=!1,this._maskContainer.touchChildren=!0,this._tweenStart.setTo(this._container.x,this._container.y),i.sEndPos.setTo(this._tweenStart.x,this._tweenStart.y);var n=!1;if(this._container.x>0?(i.sEndPos.x=0,n=!0):this._container.x<-this._overlapSize.x&&(i.sEndPos.x=-this._overlapSize.x,n=!0),this._container.y>0?(i.sEndPos.y=0,n=!0):this._container.y<-this._overlapSize.y&&(i.sEndPos.y=-this._overlapSize.y,n=!0),n){if(this._tweenChange.setTo(i.sEndPos.x-this._tweenStart.x,i.sEndPos.y-this._tweenStart.y),this._tweenChange.x<-t.UIConfig.touchDragSensitivity||this._tweenChange.y<-t.UIConfig.touchDragSensitivity?(this._refreshEventDispatching=!0,this.dispatchEventWith(i.PULL_DOWN_RELEASE),this._refreshEventDispatching=!1):(this._tweenChange.x>t.UIConfig.touchDragSensitivity||this._tweenChange.y>t.UIConfig.touchDragSensitivity)&&(this._refreshEventDispatching=!0,this.dispatchEventWith(i.PULL_UP_RELEASE),this._refreshEventDispatching=!1),this._headerLockedSize>0&&0==i.sEndPos[this._refreshBarAxis])i.sEndPos[this._refreshBarAxis]=this._headerLockedSize,this._tweenChange.x=i.sEndPos.x-this._tweenStart.x,this._tweenChange.y=i.sEndPos.y-this._tweenStart.y;
else if(this._footerLockedSize>0&&i.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]){var o=this._overlapSize[this._refreshBarAxis];0==o?o=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):o+=this._footerLockedSize,i.sEndPos[this._refreshBarAxis]=-o,this._tweenChange.x=i.sEndPos.x-this._tweenStart.x,this._tweenChange.y=i.sEndPos.y-this._tweenStart.y}this._tweenDuration.setTo(i.TWEEN_TIME_DEFAULT,i.TWEEN_TIME_DEFAULT)}else{if(this._inertiaDisabled)this._tweenDuration.setTo(i.TWEEN_TIME_DEFAULT,i.TWEEN_TIME_DEFAULT);else{var r=this._owner.displayObject.stage.frameRate,s=(egret.getTimer()/1e3-this._lastMoveTime)*r-1;if(s>1){var a=Math.pow(.833,s);this._velocity.x=this._velocity.x*a,this._velocity.y=this._velocity.y*a}this.updateTargetAndDuration(this._tweenStart,i.sEndPos)}if(i.sOldChange.setTo(i.sEndPos.x-this._tweenStart.x,i.sEndPos.y-this._tweenStart.y),this.loopCheckingTarget(i.sEndPos),(this._pageMode||this._snapToItem)&&this.alignPosition(i.sEndPos,!0),this._tweenChange.x=i.sEndPos.x-this._tweenStart.x,this._tweenChange.y=i.sEndPos.y-this._tweenStart.y,0==this._tweenChange.x&&0==this._tweenChange.y)return void(this._scrollBarDisplayAuto&&this.showScrollBar(!1));(this._pageMode||this._snapToItem)&&(this.fixDuration("x",i.sOldChange.x),this.fixDuration("y",i.sOldChange.y))}this._tweening=2,this._tweenTime.setTo(0,0),egret.startTick(this.tweenUpdate,this)},i.prototype.__touchTap=function(t){this.isDragged=!1},i.prototype.__rollOver=function(t){this.showScrollBar(!0)},i.prototype.__rollOut=function(t){this.showScrollBar(!1)},i.prototype.showScrollBar=function(e){e?(this.__showScrollBar(!0),t.GTimers.inst.remove(this.__showScrollBar,this)):t.GTimers.inst.add(500,1,this.__showScrollBar,this,e)},i.prototype.__showScrollBar=function(t){this._scrollBarVisible=t&&this._viewSize.x>0&&this._viewSize.y>0,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)},i.prototype.getLoopPartSize=function(t,e){return(this._contentSize[e]+("x"==e?this._owner.columnGap:this._owner.lineGap))/t},i.prototype.loopCheckingCurrent=function(){var t=!1;return 1==this._loop&&this._overlapSize.x>0?this._xPos<.001?(this._xPos+=this.getLoopPartSize(2,"x"),t=!0):this._xPos>=this._overlapSize.x&&(this._xPos-=this.getLoopPartSize(2,"x"),t=!0):2==this._loop&&this._overlapSize.y>0&&(this._yPos<.001?(this._yPos+=this.getLoopPartSize(2,"y"),t=!0):this._yPos>=this._overlapSize.y&&(this._yPos-=this.getLoopPartSize(2,"y"),t=!0)),t&&(this._container.x=Math.floor(-this._xPos),this._container.y=Math.floor(-this._yPos)),t},i.prototype.loopCheckingTarget=function(t){1==this._loop&&this.loopCheckingTarget2(t,"x"),2==this._loop&&this.loopCheckingTarget2(t,"y")},i.prototype.loopCheckingTarget2=function(t,e){var i,n;t[e]>0?(i=this.getLoopPartSize(2,e),n=this._tweenStart[e]-i,0>=n&&n>=-this._overlapSize[e]&&(t[e]-=i,this._tweenStart[e]=n)):t[e]<-this._overlapSize[e]&&(i=this.getLoopPartSize(2,e),n=this._tweenStart[e]+i,0>=n&&n>=-this._overlapSize[e]&&(t[e]+=i,this._tweenStart[e]=n))},i.prototype.loopCheckingNewPos=function(e,i){if(0==this._overlapSize[i])return e;var n,o="x"==i?this._xPos:this._yPos,r=!1;return.001>e?(e+=this.getLoopPartSize(2,i),e>o&&(n=this.getLoopPartSize(6,i),n=Math.ceil((e-o)/n)*n,o=t.ToolSet.clamp(o+n,0,this._overlapSize[i]),r=!0)):e>=this._overlapSize[i]&&(e-=this.getLoopPartSize(2,i),o>e&&(n=this.getLoopPartSize(6,i),n=Math.ceil((o-e)/n)*n,o=t.ToolSet.clamp(o-n,0,this._overlapSize[i]),r=!0)),r&&("x"==i?this._container.x=-Math.floor(o):this._container.y=-Math.floor(o)),e},i.prototype.alignPosition=function(t,e){if(this._pageMode)t.x=this.alignByPage(t.x,"x",e),t.y=this.alignByPage(t.y,"y",e);else if(this._snapToItem){var n=this._owner.getSnappingPosition(-t.x,-t.y,i.sHelperPoint);t.x<0&&t.x>-this._overlapSize.x&&(t.x=-n.x),t.y<0&&t.y>-this._overlapSize.y&&(t.y=-n.y)}},i.prototype.alignByPage=function(t,e,i){var n;if(t>0)n=0;else if(t<-this._overlapSize[e])n=Math.ceil(this._contentSize[e]/this._pageSize[e])-1;else{n=Math.floor(-t/this._pageSize[e]);var o=i?t-this._containerPos[e]:t-this._container[e],r=Math.min(this._pageSize[e],this._contentSize[e]-(n+1)*this._pageSize[e]),s=-t-n*this._pageSize[e];Math.abs(o)>this._pageSize[e]?s>.5*r&&n++:s>r*(0>o?.3:.7)&&n++,t=-n*this._pageSize[e],t<-this._overlapSize[e]&&(t=-this._overlapSize[e])}if(i){var a,h=this._tweenStart[e];a=h>0?0:h<-this._overlapSize[e]?Math.ceil(this._contentSize[e]/this._pageSize[e])-1:Math.floor(-h/this._pageSize[e]);var l=Math.floor(-this._containerPos[e]/this._pageSize[e]);Math.abs(n-l)>1&&Math.abs(a-l)<=1&&(n=n>l?l+1:l-1,t=-n*this._pageSize[e])}return t},i.prototype.updateTargetAndDuration=function(t,e){e.x=this.updateTargetAndDuration2(t.x,"x"),e.y=this.updateTargetAndDuration2(t.y,"y")},i.prototype.updateTargetAndDuration2=function(t,e){var n=this._velocity[e],o=0;if(t>0)t=0;else if(t<-this._overlapSize[e])t=-this._overlapSize[e];else{var r=egret.Capabilities.isMobile,s=Math.abs(n)*this._velocityScale;r&&(s*=1136/Math.max(this._owner.displayObject.stage.stageWidth,this._owner.displayObject.stage.stageHeight));var a=0;if(this._pageMode||!r?s>500&&(a=Math.pow((s-500)/500,2)):s>1e3&&(a=Math.pow((s-1e3)/1e3,2)),0!=a){a>1&&(a=1),s*=a,n*=a,this._velocity[e]=n,o=Math.log(60/s)/Math.log(this._decelerationRate)/60;var h=Math.floor(n*o*.4);t+=h}}return o<i.TWEEN_TIME_DEFAULT&&(o=i.TWEEN_TIME_DEFAULT),this._tweenDuration[e]=o,t},i.prototype.fixDuration=function(t,e){if(!(0==this._tweenChange[t]||Math.abs(this._tweenChange[t])>=Math.abs(e))){var n=Math.abs(this._tweenChange[t]/e)*this._tweenDuration[t];n<i.TWEEN_TIME_DEFAULT&&(n=i.TWEEN_TIME_DEFAULT),this._tweenDuration[t]=n}},i.prototype.killTween=function(){1==this._tweening&&(this._container.x=this._tweenStart.x+this._tweenChange.x,this._container.y=this._tweenStart.y+this._tweenChange.y,this.dispatchEventWith(i.SCROLL)),this._tweening=0,egret.stopTick(this.tweenUpdate,this),this.dispatchEventWith(i.SCROLL_END)},i.prototype.checkRefreshBar=function(){if(null!=this._header||null!=this._footer){var t=this._container[this._refreshBarAxis];if(null!=this._header)if(t>0){null==this._header.displayObject.parent&&this._maskContainer.addChildAt(this._header.displayObject,0);var e=i.sHelperPoint;e.setTo(this._header.width,this._header.height),e[this._refreshBarAxis]=t,this._header.setSize(e.x,e.y)}else null!=this._header.displayObject.parent&&this._maskContainer.removeChild(this._header.displayObject);if(null!=this._footer){var n=this._overlapSize[this._refreshBarAxis];-n>t||0==n&&this._footerLockedSize>0?(null==this._footer.displayObject.parent&&this._maskContainer.addChildAt(this._footer.displayObject,0),e=i.sHelperPoint,e.setTo(this._footer.x,this._footer.y),n>0?e[this._refreshBarAxis]=t+this._contentSize[this._refreshBarAxis]:e[this._refreshBarAxis]=Math.max(Math.min(t+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]),this._footer.setXY(e.x,e.y),e.setTo(this._footer.width,this._footer.height),n>0?e[this._refreshBarAxis]=-n-t:e[this._refreshBarAxis]=this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis],this._footer.setSize(e.x,e.y)):null!=this._footer.displayObject.parent&&this._maskContainer.removeChild(this._footer.displayObject)}}},i.prototype.tweenUpdate=function(e){var n=this.runTween("x"),o=this.runTween("y");return this._container.x=n,this._container.y=o,2==this._tweening&&(this._overlapSize.x>0&&(this._xPos=t.ToolSet.clamp(-n,0,this._overlapSize.x)),this._overlapSize.y>0&&(this._yPos=t.ToolSet.clamp(-o,0,this._overlapSize.y)),this._pageMode&&this.updatePageController()),0==this._tweenChange.x&&0==this._tweenChange.y?(this._tweening=0,egret.stopTick(this.tweenUpdate,this),this.loopCheckingCurrent(),this.syncScrollBar(!0),this.checkRefreshBar(),this.dispatchEventWith(i.SCROLL),this.dispatchEventWith(i.SCROLL_END)):(this.syncScrollBar(!1),this.checkRefreshBar(),this.dispatchEventWith(i.SCROLL)),!0},i.prototype.runTween=function(e){var n;if(0!=this._tweenChange[e]){if(this._tweenTime[e]+=t.GTimers.deltaTime/1e3,this._tweenTime[e]>=this._tweenDuration[e])n=this._tweenStart[e]+this._tweenChange[e],this._tweenChange[e]=0;else{var o=i.easeFunc(this._tweenTime[e],this._tweenDuration[e]);n=this._tweenStart[e]+Math.floor(this._tweenChange[e]*o)}var r=0,s=-this._overlapSize[e];if(this._headerLockedSize>0&&this._refreshBarAxis==e&&(r=this._headerLockedSize),this._footerLockedSize>0&&this._refreshBarAxis==e){var a=this._overlapSize[this._refreshBarAxis];0==a?a=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):a+=this._footerLockedSize,s=-a}2==this._tweening&&this._bouncebackEffect?n>20+r&&this._tweenChange[e]>0||n>r&&0==this._tweenChange[e]?(this._tweenTime[e]=0,this._tweenDuration[e]=i.TWEEN_TIME_DEFAULT,this._tweenChange[e]=-n+r,this._tweenStart[e]=n):(s-20>n&&this._tweenChange[e]<0||s>n&&0==this._tweenChange[e])&&(this._tweenTime[e]=0,this._tweenDuration[e]=i.TWEEN_TIME_DEFAULT,this._tweenChange[e]=s-n,this._tweenStart[e]=n):n>r?(n=r,this._tweenChange[e]=0):s>n&&(n=s,this._tweenChange[e]=0)}else n=this._container[e];return n},i.easeFunc=function(t,e){return(t=t/e-1)*t*t+1},i._gestureFlag=0,i.SCROLL="__scroll",i.SCROLL_END="__scrollEnd",i.PULL_DOWN_RELEASE="pullDownRelease",i.PULL_UP_RELEASE="pullUpRelease",i.TWEEN_TIME_GO=.5,i.TWEEN_TIME_DEFAULT=.3,i.PULL_RATIO=.5,i.sHelperPoint=new egret.Point,i.sHelperRect=new egret.Rectangle,i.sEndPos=new egret.Point,i.sOldChange=new egret.Point,i}(egret.EventDispatcher);t.ScrollPane=e,__reflect(e.prototype,"fairygui.ScrollPane")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.defaultFont="SimSun",e.modalLayerColor=3355443,e.modalLayerAlpha=.2,e.buttonSoundVolumeScale=1,e.defaultScrollStep=25,e.defaultScrollDecelerationRate=.967,e.defaultScrollBarDisplay=t.ScrollBarDisplayType.Visible,e.defaultScrollTouchEffect=!0,e.defaultScrollBounceEffect=!0,e.defaultComboBoxVisibleItemCount=10,e.touchScrollSensitivity=20,e.touchDragSensitivity=10,e.clickDragSensitivity=2,e.bringWindowToFrontOnClick=!0,e.frameTimeForAsyncUIConstruction=2,e}();t.UIConfig=e,__reflect(e.prototype,"fairygui.UIConfig")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.setPackageItemExtension=function(i,n){if(null==i)throw"Invaild url: "+i;var o=t.UIPackage.getItemByURL(i);null!=o&&(o.extensionType=n),e.packageItemExtensions[i]=n},e.setLoaderExtension=function(t){e.loaderType=t},e.resolvePackageItemExtension=function(t){t.extensionType=e.packageItemExtensions["ui://"+t.owner.id+t.id],t.extensionType||(t.extensionType=e.packageItemExtensions["ui://"+t.owner.name+"/"+t.name])},e.newObject=function(t){return null!=t.extensionType?new t.extensionType:this.newObject2(t.objectType)},e.newObject2=function(i){switch(i){case t.ObjectType.Image:return new t.GImage;case t.ObjectType.MovieClip:return new t.GMovieClip;case t.ObjectType.Component:return new t.GComponent;case t.ObjectType.Text:return new t.GTextField;case t.ObjectType.RichText:return new t.GRichTextField;case t.ObjectType.InputText:return new t.GTextInput;case t.ObjectType.Group:return new t.GGroup;case t.ObjectType.List:return new t.GList;case t.ObjectType.Graph:return new t.GGraph;case t.ObjectType.Loader:return null!=e.loaderType?new e.loaderType:new t.GLoader;case t.ObjectType.Button:return new t.GButton;case t.ObjectType.Label:return new t.GLabel;case t.ObjectType.ProgressBar:return new t.GProgressBar;case t.ObjectType.Slider:return new t.GSlider;case t.ObjectType.ScrollBar:return new t.GScrollBar;case t.ObjectType.ComboBox:return new t.GComboBox;default:return null}},e.packageItemExtensions={},e}();t.UIObjectFactory=e,__reflect(e.prototype,"fairygui.UIObjectFactory")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._items=new Array,this._itemsById={},this._itemsByName={},this._sprites={}}return e.getById=function(t){return e._packageInstById[t]},e.getByName=function(t){return e._packageInstByName[t]},e.addPackage=function(i,n){if(void 0===n&&(n=null),!n&&(n=RES.getRes(i),!n))throw"Resource '"+i+"' not found, please check default.res.json!";var o=new e;return o.loadPackage(new t.ByteBuffer(n),i),e._packageInstById[o.id]=o,e._packageInstByName[o.name]=o,o.customId=i,o},e.removePackage=function(t){var i=e._packageInstById[t];i.dispose(),delete e._packageInstById[i.id],null!=i._customId&&delete e._packageInstById[i._customId],delete e._packageInstByName[i.name]},e.createObject=function(t,i,n){void 0===n&&(n=null);var o=e.getByName(t);return o?o.createObject(i,n):null},e.createObjectFromURL=function(t,i){void 0===i&&(i=null);var n=e.getItemByURL(t);return n?n.owner.internalCreateObject(n,i):null},e.getItemURL=function(t,i){var n=e.getByName(t);if(!n)return null;var o=n._itemsByName[i];return o?"ui://"+n.id+o.id:null},e.getItemByURL=function(t){var i=t.indexOf("//");if(-1==i)return null;var n=t.indexOf("/",i+2);if(-1==n){if(t.length>13){var o=t.substr(5,8),r=e.getById(o);if(null!=r){var s=t.substr(13);return r.getItemById(s)}}}else{var a=t.substr(i+2,n-i-2);if(r=e.getByName(a),null!=r){var h=t.substr(n+1);return r.getItemByName(h)}}return null},e.normalizeURL=function(t){if(null==t)return null;var i=t.indexOf("//");if(-1==i)return null;var n=t.indexOf("/",i+2);if(-1==n)return t;var o=t.substr(i+2,n-i-2),r=t.substr(n+1);return e.getItemURL(o,r)},e.setStringsSource=function(e){t.TranslationHelper.loadFromXML(e)},e.prototype.loadPackage=function(e,n){if(1179080009!=e.readUnsignedInt())throw"FairyGUI: old package format found in '"+n+"'";e.version=e.readInt();var o=e.readBool();if(this._id=e.readUTF(),this._name=e.readUTF(),e.skip(20),o){var r=new Uint8Array(e.buffer,e.position,e.length-e.position),s=new Zlib.RawInflate(r);e=new t.ByteBuffer(s.decompress())}var a,h,l,u=e.position;e.seek(u,4),a=e.readInt();var c=new Array(a);for(c.reduceRight,h=0;a>h;h++)c[h]=e.readUTF();e.stringTable=c,e.seek(u,1);var _;for(n+="_",a=e.readShort(),h=0;a>h;h++){switch(l=e.readInt(),l+=e.position,_=new t.PackageItem,_.owner=this,_.type=e.readByte(),_.id=e.readS(),_.name=e.readS(),e.readS(),_.file=e.readS(),e.readBool(),_.width=e.readInt(),_.height=e.readInt(),_.type){case t.PackageItemType.Image:_.objectType=t.ObjectType.Image;var p=e.readByte();1==p?(_.scale9Grid=new egret.Rectangle,_.scale9Grid.x=e.readInt(),_.scale9Grid.y=e.readInt(),_.scale9Grid.width=e.readInt(),_.scale9Grid.height=e.readInt(),_.tileGridIndice=e.readInt()):2==p&&(_.scaleByTile=!0),_.smoothing=e.readBool();break;case t.PackageItemType.MovieClip:_.smoothing=e.readBool(),_.objectType=t.ObjectType.MovieClip,_.rawData=e.readBuffer();break;case t.PackageItemType.Font:_.rawData=e.readBuffer();break;case t.PackageItemType.Component:var d=e.readByte();d>0?_.objectType=d:_.objectType=t.ObjectType.Component,_.rawData=e.readBuffer(),t.UIObjectFactory.resolvePackageItemExtension(_);break;case t.PackageItemType.Atlas:case t.PackageItemType.Sound:case t.PackageItemType.Misc:_.file=n+t.ToolSet.getFileName(_.file)}this._items.push(_),this._itemsById[_.id]=_,null!=_.name&&(this._itemsByName[_.name]=_),e.position=l}for(e.seek(u,2),a=e.readShort(),h=0;a>h;h++){l=e.readShort(),l+=e.position;var f=e.readS();_=this._itemsById[e.readS()];var g=new i;g.atlas=_,g.rect.x=e.readInt(),g.rect.y=e.readInt(),g.rect.width=e.readInt(),g.rect.height=e.readInt(),g.rotated=e.readBool(),this._sprites[f]=g,e.position=l}e.seek(u,3)},e.prototype.dispose=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e],n=i.texture;if(null!=n)n.dispose();else if(null!=i.frames)for(var o=i.frames.length,r=0;o>r;r++)n=i.frames[r].texture,null!=n&&n.dispose()}},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customId",{get:function(){return this._customId},set:function(t){null!=this._customId&&delete e._packageInstById[this._customId],this._customId=t,null!=this._customId&&(e._packageInstById[this._customId]=this)},enumerable:!0,configurable:!0}),e.prototype.createObject=function(t,e){void 0===e&&(e=null);var i=this._itemsByName[t];return i?this.internalCreateObject(i,e):null},e.prototype.internalCreateObject=function(i,n){void 0===n&&(n=null);var o;return o=i.type==t.PackageItemType.Component&&null!=n?new n:t.UIObjectFactory.newObject(i),null==o?null:(e._constructing++,o.packageItem=i,o.constructFromResource(),e._constructing--,o)},e.prototype.getItemById=function(t){return this._itemsById[t]},e.prototype.getItemByName=function(t){return this._itemsByName[t]},e.prototype.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw"Resource not found -"+t;return this.getItemAsset(e)},e.prototype.getItemAsset=function(e){switch(e.type){case t.PackageItemType.Image:if(!e.decoded){e.decoded=!0;var i=this._sprites[e.id];if(null!=i){var n=this.getItemAsset(i.atlas);e.texture=new egret.Texture,e.texture.bitmapData=n.bitmapData,e.texture.$initData(n.$bitmapX+i.rect.x,n.$bitmapY+i.rect.y,i.rect.width,i.rect.height,0,0,i.rect.width,i.rect.height,n.$sourceWidth,n.$sourceHeight,i.rotated)}}return e.texture;case t.PackageItemType.Atlas:return e.decoded||(e.decoded=!0,e.texture=RES.getRes(e.file),e.texture||console.log("Resource '"+e.file+"' not found, please check default.res.json!")),e.texture;case t.PackageItemType.Sound:return e.decoded||(e.decoded=!0,e.sound=RES.getRes(e.file),e.sound||console.log("Resource '"+e.file+"' not found, please check default.res.json!")),e.sound;case t.PackageItemType.Font:return e.decoded||(e.decoded=!0,this.loadFont(e)),e.bitmapFont;case t.PackageItemType.MovieClip:return e.decoded||(e.decoded=!0,this.loadMovieClip(e)),e.frames;case t.PackageItemType.Misc:return e.file?RES.getRes(e.file):null;default:return null}},e.prototype.loadMovieClip=function(e){var i=e.rawData;i.seek(0,0),e.interval=i.readInt(),e.swing=i.readBool(),e.repeatDelay=i.readInt(),i.seek(0,1);var n=i.readShort();e.frames=Array(n);for(var o,r,s,a,h,l=0;n>l;l++){var u=i.readShort();if(u+=i.position,r=new t.Frame,a=i.readInt(),h=i.readInt(),i.readInt(),i.readInt(),r.addDelay=i.readInt(),o=i.readS(),null!=o&&null!=(s=this._sprites[o])){var c=this.getItemAsset(s.atlas);r.texture=new egret.Texture,r.texture.bitmapData=c.bitmapData,r.texture.$initData(c.$bitmapX+s.rect.x,c.$bitmapY+s.rect.y,s.rect.width,s.rect.height,a,h,e.width,e.height,c.$sourceWidth,c.$sourceHeight,s.rotated)}e.frames[l]=r,i.position=u}},e.prototype.loadFont=function(e){var i=new t.BitmapFont;e.bitmapFont=i;var n=e.rawData;n.seek(0,0),i.ttf=n.readBool(),n.readBool(),i.resizable=n.readBool(),n.readBool(),i.size=n.readInt();var o=n.readInt(),r=n.readInt(),s=null,a=this._sprites[e.id];null!=a&&(s=this.getItemAsset(a.atlas)),n.seek(0,1);for(var h=null,l=n.readInt(),u=0;l>u;u++){var c=n.readShort();c+=n.position,h=new t.BMGlyph;var _=n.readChar();i.glyphs[_]=h;var p=n.readS(),d=n.readInt(),f=n.readInt();if(h.offsetX=n.readInt(),h.offsetY=n.readInt(),h.width=n.readInt(),h.height=n.readInt(),h.advance=n.readInt(),h.channel=n.readByte(),1==h.channel?h.channel=3:2==h.channel?h.channel=2:3==h.channel&&(h.channel=1),i.ttf)h.texture=new egret.Texture,h.texture.bitmapData=s.bitmapData,h.texture.$initData(s.$bitmapX+d+a.rect.x,s.$bitmapY+f+a.rect.y,h.width,h.height,0,0,h.width,h.height,h.width,h.height,a.rotated);else{var g=this._itemsById[p];g&&(this.getItemAsset(g),h.width=g.width,h.height=g.height,h.texture=g.texture)}i.ttf?h.lineHeight=r:(0==h.advance&&(0==o?h.advance=h.offsetX+h.width:h.advance=o),h.lineHeight=h.offsetY<0?h.height:h.offsetY+h.height,h.lineHeight<i.size&&(h.lineHeight=i.size)),n.position=c}},e._constructing=0,e._packageInstById={},e._packageInstByName={},e}();t.UIPackage=e,__reflect(e.prototype,"fairygui.UIPackage");var i=function(){function t(){this.rect=new egret.Rectangle}return t}();__reflect(i.prototype,"AtlasSprite")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._requestingCmd=0,i.focusable=!0,i._uiSources=new Array,i.bringToFontOnClick=t.UIConfig.bringWindowToFrontOnClick,i.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,i.__onShown,i),i.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.__onHidden,i),i.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.__mouseDown,i,!0),i}return __extends(i,e),i.prototype.addUISource=function(t){this._uiSources.push(t)},Object.defineProperty(i.prototype,"contentPane",{get:function(){return this._contentPane},set:function(e){this._contentPane!=e&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=e,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,t.RelationType.Size),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeButton",{get:function(){return this._closeButton},set:function(t){null!=this._closeButton&&this._closeButton.removeClickListener(this.closeEventHandler,this),this._closeButton=t,null!=this._closeButton&&this._closeButton.addClickListener(this.closeEventHandler,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragArea",{get:function(){return this._dragArea},set:function(e){this._dragArea!=e&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.removeEventListener(t.DragEvent.DRAG_START,this.__dragStart,this)),this._dragArea=e,null!=this._dragArea&&(this._dragArea instanceof t.GGraph&&null==this._dragArea.displayObject&&this._dragArea.asGraph.drawRect(0,0,0,0,0),this._dragArea.draggable=!0,this._dragArea.addEventListener(t.DragEvent.DRAG_START,this.__dragStart,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentArea",{get:function(){return this._contentArea},set:function(t){this._contentArea=t},enumerable:!0,configurable:!0}),i.prototype.show=function(){t.GRoot.inst.showWindow(this)},i.prototype.showOn=function(t){t.showWindow(this)},i.prototype.hide=function(){this.isShowing&&this.doHideAnimation()},i.prototype.hideImmediately=function(){var e=this.parent instanceof t.GRoot?this.parent:null;e||(e=t.GRoot.inst),e.hideWindowImmediately(this)},i.prototype.centerOn=function(e,i){void 0===i&&(i=!1),this.setXY(Math.round((e.width-this.width)/2),Math.round((e.height-this.height)/2)),i&&(this.addRelation(e,t.RelationType.Center_Center),this.addRelation(e,t.RelationType.Middle_Middle))},i.prototype.toggleStatus=function(){this.isTop?this.hide():this.show()},Object.defineProperty(i.prototype,"isShowing",{get:function(){return null!=this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modal",{get:function(){return this._modal},set:function(t){this._modal=t},enumerable:!0,configurable:!0}),i.prototype.bringToFront=function(){this.root.bringToFront(this)},i.prototype.showModalWait=function(e){void 0===e&&(e=0),0!=e&&(this._requestingCmd=e),t.UIConfig.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane))},i.prototype.layoutModalWaitPane=function(){if(null!=this._contentArea){var t=this._frame.localToGlobal();t=this.globalToLocal(t.x,t.y,t),this._modalWaitPane.setXY(t.x+this._contentArea.x,t.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height)}else this._modalWaitPane.setSize(this.width,this.height)},i.prototype.closeModalWait=function(t){return void 0===t&&(t=0),0!=t&&this._requestingCmd!=t?!1:(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0)},Object.defineProperty(i.prototype,"modalWaiting",{get:function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent},enumerable:!0,configurable:!0}),i.prototype.init=function(){if(!this._inited&&!this._loading)if(this._uiSources.length>0){this._loading=!1;for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];i.loaded||(i.load(this.__uiLoadComplete,this),this._loading=!0)}this._loading||this._init()}else this._init()},i.prototype.onInit=function(){},i.prototype.onShown=function(){},i.prototype.onHide=function(){},i.prototype.doShowAnimation=function(){this.onShown()},i.prototype.doHideAnimation=function(){this.hideImmediately()},i.prototype.__uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];if(!i.loaded)return}this._loading=!1,this._init()},i.prototype._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},i.prototype.dispose=function(){this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__onShown,this),this.displayObject.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.__onHidden,this),null!=this.parent&&this.hideImmediately(),e.prototype.dispose.call(this)},i.prototype.closeEventHandler=function(t){this.hide()},i.prototype.__onShown=function(t){this._inited?this.doShowAnimation():this.init()},i.prototype.__onHidden=function(t){this.closeModalWait(),this.onHide()},i.prototype.__mouseDown=function(t){this.isShowing&&this.bringToFontOnClick&&this.bringToFront()},i.prototype.__dragStart=function(t){t.preventDefault(),this.startDrag(t.touchPointID)},i}(t.GComponent);t.Window=e,__reflect(e.prototype,"fairygui.Window")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._agent=new t.GLoader,this._agent.draggable=!0,this._agent.touchable=!1,this._agent.setSize(100,100),this._agent.setPivot(.5,.5,!0),this._agent.align=t.AlignType.Center,this._agent.verticalAlign=t.VertAlignType.Middle,this._agent.sortingOrder=1e6,this._agent.addEventListener(t.DragEvent.DRAG_END,this.__dragEnd,this)}return Object.defineProperty(e,"inst",{get:function(){return null==e._inst&&(e._inst=new e),e._inst},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragAgent",{get:function(){return this._agent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return null!=this._agent.parent},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(e,i,n,o){if(void 0===o&&(o=-1),null==this._agent.parent){this._sourceData=n,this._agent.url=i,t.GRoot.inst.addChild(this._agent);var r=t.GRoot.inst.globalToLocal(t.GRoot.mouseX,t.GRoot.mouseY);this._agent.setXY(r.x,r.y),this._agent.startDrag(o)}},e.prototype.cancel=function(){null!=this._agent.parent&&(this._agent.stopDrag(),t.GRoot.inst.removeChild(this._agent),this._sourceData=null)},e.prototype.__dragEnd=function(e){if(null!=this._agent.parent){t.GRoot.inst.removeChild(this._agent);var i=this._sourceData;this._sourceData=null;for(var n=t.GRoot.inst.getObjectUnderPoint(e.stageX,e.stageY);null!=n;){if(n.hasEventListener(t.DropEvent.DROP)){var o=new t.DropEvent(t.DropEvent.DROP,i);return n.requestFocus(),void n.dispatchEvent(o)}n=n.parent}}},e}();t.DragDropManager=e,__reflect(e.prototype,"fairygui.DragDropManager")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._itemList=new Array,this._objectPool=new Array}return e.prototype.createObject=function(e,i){var n=t.UIPackage.getByName(e);if(!n)throw new Error("package not found: "+e);var o=n.getItemByName(i);if(!o)throw new Error("resource not found: "+i);this.internalCreateObject(o)},e.prototype.createObjectFromURL=function(e){var i=t.UIPackage.getItemByURL(e);if(!i)throw new Error("resource not found: "+e);this.internalCreateObject(i)},e.prototype.cancel=function(){t.GTimers.inst.remove(this.run,this),this._itemList.length=0;var e=this._objectPool.length;if(e>0){for(var i=0;e>i;i++)this._objectPool[i].dispose();this._objectPool.length=0}},e.prototype.internalCreateObject=function(e){this._itemList.length=0,this._objectPool.length=0;var n=new i(e,0);n.childCount=this.collectComponentChildren(e),this._itemList.push(n),this._index=0,t.GTimers.inst.add(1,0,this.run,this)},e.prototype.collectComponentChildren=function(e){var n=e.rawData;n.seek(0,2);var o,r,s,a,h,l,u=n.readShort();for(s=0;u>s;s++){a=n.readShort(),h=n.position,n.seek(h,0);var c=n.readByte(),_=n.readS(),p=n.readS();n.position=h,null!=_?(l=null!=p?t.UIPackage.getById(p):e.owner,r=null!=l?l.getItemById(_):null,o=new i(r,c),null!=r&&r.type==t.PackageItemType.Component&&(o.childCount=this.collectComponentChildren(r))):(o=new i(null,c),c==t.ObjectType.List&&(o.listItemCount=this.collectListChildren(n))),this._itemList.push(o),n.position=h+a}return u},e.prototype.collectListChildren=function(e){e.seek(e.position,8);var n,o,r,s,a,h=0,l=e.readS(),u=e.readShort();for(n=0;u>n;n++)o=e.readShort(),o+=e.position,r=e.readS(),null==r&&(r=l),r&&(s=t.UIPackage.getItemByURL(r),null!=s&&(a=new i(s,s.objectType),s.type==t.PackageItemType.Component&&(a.childCount=this.collectComponentChildren(s)),this._itemList.push(a),h++)),e.position=o;return h},e.prototype.run=function(){for(var e,i,n,o,r=egret.getTimer(),s=t.UIConfig.frameTimeForAsyncUIConstruction,a=this._itemList.length;this._index<a;){if(i=this._itemList[this._index],null!=i.packageItem)e=t.UIObjectFactory.newObject(i.packageItem),e.packageItem=i.packageItem,this._objectPool.push(e),t.UIPackage._constructing++,i.packageItem.type==t.PackageItemType.Component?(n=this._objectPool.length-i.childCount-1,e.constructFromResource2(this._objectPool,n),this._objectPool.splice(n,i.childCount)):e.constructFromResource(),t.UIPackage._constructing--;else if(e=t.UIObjectFactory.newObject2(i.type),this._objectPool.push(e),i.type==t.ObjectType.List&&i.listItemCount>0){for(n=this._objectPool.length-i.listItemCount-1,o=0;o<i.listItemCount;o++)e.itemPool.returnObject(this._objectPool[o+n]);this._objectPool.splice(n,i.listItemCount)}if(this._index++,this._index%5==0&&egret.getTimer()-r>=s)return}t.GTimers.inst.remove(this.run,this);var h=this._objectPool[0];this._itemList.length=0,this._objectPool.length=0,null!=this.callback&&this.callback.call(this.callbackObj,h)},e}();t.AsyncOperation=e,__reflect(e.prototype,"fairygui.AsyncOperation");var i=function(){function t(t,e){this.packageItem=t,this.type=e}return t}();__reflect(i.prototype,"DisplayListItem")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}return e.loadFromXML=function(t){e.strings={};for(var i=egret.XML.parse(t),n=i.children,o=n.length,r=0;o>r;r++){var s=n[r];if("string"==s.name){var a=s.attributes.name,h=s.children.length>0?s.children[0].text:"",l=a.indexOf("-");if(-1==l)continue;var u=a.substr(0,l),c=a.substr(l+1),_=e.strings[u];_||(_={},e.strings[u]=_),_[c]=h}}},e.translateComponent=function(i){if(null!=e.strings){var n=e.strings[i.owner.id+i.id];if(null!=n){var o,r,s,a,h,l,u,c,_,p,d,f=i.rawData;f.seek(0,2);var g=f.readShort();for(h=0;g>h;h++){c=f.readShort(),_=f.position,f.seek(_,0);var y=f.readByte();f.skip(4),o=f.readS(),y==t.ObjectType.Component&&f.seek(_,6)&&(y=f.readByte()),f.seek(_,1),null!=(r=n[o+"-tips"])&&f.writeS(r),f.seek(_,2);var m=f.readShort();for(l=0;m>l;l++){if(s=f.readShort(),s+=f.position,6==f.readByte()){for(f.skip(2),p=f.readShort(),u=0;p>u;u++)d=f.readS(),null!=d&&(null!=(r=n[o+"-texts_"+u])?f.writeS(r):f.skip(2));
f.readBool()&&null!=(r=n[o+"-texts_def"])&&f.writeS(r)}f.position=s}switch(y){case t.ObjectType.Text:case t.ObjectType.RichText:case t.ObjectType.InputText:null!=(r=n[o])&&(f.seek(_,6),f.writeS(r)),null!=(r=n[o+"-prompt"])&&(f.seek(_,4),f.writeS(r));break;case t.ObjectType.List:for(f.seek(_,8),f.skip(2),a=f.readShort(),l=0;a>l;l++)s=f.readShort(),s+=f.position,f.skip(2),null!=(r=n[o+"-"+l])?f.writeS(r):f.skip(2),null!=(r=n[o+"-"+l+"-0"])&&f.writeS(r),f.position=s;break;case t.ObjectType.Label:f.seek(_,6)&&f.readByte()==y&&(null!=(r=n[o])?f.writeS(r):f.skip(2),f.skip(2),f.readBool()&&f.skip(4),f.skip(4),f.readBool()&&null!=(r=n[o+"-prompt"])&&f.writeS(r));break;case t.ObjectType.Button:f.seek(_,6)&&f.readByte()==y&&(null!=(r=n[o])?f.writeS(r):f.skip(2),null!=(r=n[o+"-0"])&&f.writeS(r));break;case t.ObjectType.ComboBox:if(f.seek(_,6)&&f.readByte()==y){for(a=f.readShort(),l=0;a>l;l++)s=f.readShort(),s+=f.position,null!=(r=n[o+"-"+l])&&f.writeS(r),f.position=s;null!=(r=n[o])&&f.writeS(r)}}f.position=_+c}}}},e.strings=null,e}();t.TranslationHelper=e,__reflect(e.prototype,"fairygui.TranslationHelper")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.stringTable=null,n.version=0,n}return __extends(e,t),e.prototype.skip=function(t){this.position+=t},e.prototype.readBool=function(){return 1==this.readByte()},e.prototype.readS=function(){var t=this.readUnsignedShort();return 65534==t?null:65533==t?"":this.stringTable[t]},e.prototype.writeS=function(t){var e=this.readUnsignedShort();65534!=e&&65533!=e&&(this.stringTable[e]=t)},e.prototype.readColor=function(t){void 0===t&&(t=!1);var e=this.readUnsignedByte(),i=this.readUnsignedByte(),n=this.readUnsignedByte(),o=this.readUnsignedByte();return(t?o<<24:0)+(e<<16)+(i<<8)+n},e.prototype.readChar=function(){var t=this.readUnsignedShort();return String.fromCharCode(t)},e.prototype.readBuffer=function(){var t=this.readUnsignedInt(),i=new e(new Uint8Array(this.buffer,this.position,t));return i.stringTable=this.stringTable,i.version=this.version,i},e.prototype.seek=function(t,e){var i=this.position;this.position=t;var n=this.readByte();if(n>e){var o,r=1==this.readByte();return r?(this.position+=2*e,o=this.readUnsignedShort()):(this.position+=4*e,o=this.readUnsignedInt()),o>0?(this.position=t+o,!0):(this.position=i,!1)}return this.position=i,!1},e}(egret.ByteArray);t.ByteBuffer=e,__reflect(e.prototype,"fairygui.ByteBuffer")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.interval=0,t.repeatDelay=0,t.timeScale=1,t._playing=!0,t._frameCount=0,t._frame=0,t._start=0,t._end=0,t._times=0,t._endAt=0,t._status=0,t._smoothing=!0,t._frameElapsed=0,t._reversed=!1,t._repeatedCount=0,t.touchEnabled=!1,t.setPlaySettings(),t}return __extends(i,e),Object.defineProperty(i.prototype,"frames",{get:function(){return this._frames},set:function(t){this._frames=t,this.scale9Grid=null,this.fillMode=egret.BitmapFillMode.SCALE,null!=this._frames?this._frameCount=this._frames.length:this._frameCount=0,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),(-1==this._endAt||this._endAt>this._frameCount-1)&&(this._endAt=this._frameCount-1),(this._frame<0||this._frame>this._frameCount-1)&&(this._frame=this._frameCount-1),this.drawFrame(),this._frameElapsed=0,this._repeatedCount=0,this._reversed=!1,this.checkTimer()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameCount",{get:function(){return this._frameCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame!=t&&(null!=this._frames&&t>=this._frameCount&&(t=this._frameCount-1),this._frame=t,this._frameElapsed=0,this.drawFrame())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},set:function(t){this._playing!=t&&(this._playing=t,this.checkTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smoothing",{get:function(){return this._smoothing},set:function(t){this._smoothing=t},enumerable:!0,configurable:!0}),i.prototype.rewind=function(){this._frame=0,this._frameElapsed=0,this._reversed=!1,this._repeatedCount=0,this.drawFrame()},i.prototype.syncStatus=function(t){this._frame=t._frame,this._frameElapsed=t._frameElapsed,this._reversed=t._reversed,this._repeatedCount=t._repeatedCount,this.drawFrame()},i.prototype.advance=function(t){for(var e=this._frame,i=this._reversed,n=t;;){var o=this.interval+this._frames[this._frame].addDelay;if(0==this._frame&&this._repeatedCount>0&&(o+=this.repeatDelay),o>t){this._frameElapsed=0;break}if(t-=o,this.swing?this._reversed?(this._frame--,this._frame<=0&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),this._frame==e&&this._reversed==i){var r=n-t;t-=Math.floor(t/r)*r}}this.drawFrame()},i.prototype.setPlaySettings=function(t,e,i,n,o,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),void 0===o&&(o=null),void 0===r&&(r=null),this._start=t,this._end=e,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),this._times=i,this._endAt=n,-1==this._endAt&&(this._endAt=this._end),this._status=0,this._callback=o,this._callbackObj=r,this.frame=t},i.prototype.update=function(){if(this._playing&&0!=this._frameCount&&3!=this._status){var e=t.GTimers.deltaTime;1!=this.timeScale&&(e*=this.timeScale),this._frameElapsed+=e;var i=this.interval+this._frames[this._frame].addDelay;if(0==this._frame&&this._repeatedCount>0&&(i+=this.repeatDelay),!(this._frameElapsed<i)){if(this._frameElapsed-=i,this._frameElapsed>this.interval&&(this._frameElapsed=this.interval),this.swing?this._reversed?(this._frame--,this._frame<=0&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),1==this._status)this._frame=this._start,this._frameElapsed=0,this._status=0;else if(2==this._status){if(this._frame=this._endAt,this._frameElapsed=0,this._status=3,null!=this._callback){var n=this._callback,o=this._callbackObj;this._callback=null,this._callbackObj=null,n.call(o)}}else this._frame==this._end&&(this._times>0?(this._times--,0==this._times?this._status=2:this._status=1):0!=this._start&&(this._status=1));this.drawFrame()}}},i.prototype.drawFrame=function(){if(this._frameCount>0&&this._frame<this._frames.length){var t=this._frames[this._frame];this.texture=t.texture}else this.texture=null},i.prototype.checkTimer=function(){this._playing&&this._frameCount>0&&null!=this.stage?t.GTimers.inst.add(1,0,this.update,this):t.GTimers.inst.remove(this.update,this)},i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),this._playing&&this._frameCount>0&&t.GTimers.inst.add(1,0,this.update,this)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),t.GTimers.inst.remove(this.update,this)},i}(egret.Bitmap);t.MovieClip=e,__reflect(e.prototype,"fairygui.MovieClip")}(fairygui||(fairygui={}));